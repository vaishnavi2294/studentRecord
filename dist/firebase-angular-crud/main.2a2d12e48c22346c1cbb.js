(self.webpackChunkfirebase_angular_crud=self.webpackChunkfirebase_angular_crud||[]).push([[179],{255:tt=>{function be(V){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+V+"'");throw f.code="MODULE_NOT_FOUND",f})}be.keys=()=>[],be.resolve=be,be.id=255,tt.exports=be},18:(tt,be,V)=>{"use strict";V.d(be,{deG:()=>xh,tb:()=>Kw,AFp:()=>uT,ip1:()=>Ed,CZH:()=>wd,hGG:()=>du,z2F:()=>lu,sBO:()=>Wm,Sil:()=>Dd,_Vd:()=>nd,EJc:()=>Cd,SBq:()=>yn,qLn:()=>uc,vpe:()=>Qt,gxx:()=>rf,tBr:()=>Rs,XFs:()=>fe,OlP:()=>fn,zs3:()=>Dn,ZZ4:()=>Af,aQg:()=>lr,soG:()=>Xf,YKP:()=>dr,v3s:()=>wT,h0i:()=>ea,PXZ:()=>sp,R0b:()=>bi,FiY:()=>ss,Lbi:()=>cu,g9A:()=>zw,Qsj:()=>ZI,FYo:()=>Tf,JOm:()=>_o,Tiy:()=>rw,q3G:()=>cn,tp0:()=>xs,EAV:()=>Sd,Rgc:()=>Ac,dDg:()=>fT,DyG:()=>ao,GfV:()=>KI,s_b:()=>zm,ifc:()=>Wt,eFA:()=>M_,G48:()=>Jx,Gpc:()=>ue,X6Q:()=>x_,_c5:()=>aM,VLi:()=>rp,c2e:()=>Yw,zSh:()=>yc,wAp:()=>Ye,vHH:()=>Se,EiD:()=>Dl,mCW:()=>Oa,qzn:()=>ka,JVY:()=>Hy,pB0:()=>ic,eBb:()=>mg,L6k:()=>qy,LAX:()=>jh,cg1:()=>VE,Tjo:()=>AT,kL8:()=>UE,yhl:()=>Bh,dqk:()=>L,sIi:()=>uf,CqO:()=>Wl,QGY:()=>lm,F4k:()=>CE,RDi:()=>Xr,AaK:()=>Y,z3N:()=>ks,qOj:()=>zv,TTD:()=>Hp,_Bn:()=>HI,xp6:()=>us,uIk:()=>eE,ekj:()=>iI,Suo:()=>wi,Xpm:()=>oe,lG2:()=>wt,Yz7:()=>on,cJS:()=>Lr,oAB:()=>In,Yjl:()=>Qr,Y36:()=>Cc,_UZ:()=>zC,qZA:()=>wE,TgZ:()=>EE,EpF:()=>Eo,n5z:()=>ba,Ikx:()=>LE,LFG:()=>He,$8M:()=>io,NdJ:()=>dm,CRH:()=>zD,oxw:()=>YC,Q6J:()=>hf,s9C:()=>pf,DdM:()=>Fw,VKq:()=>ru,iGM:()=>WD,CHM:()=>al,LSH:()=>Fa,kYT:()=>rr,YNc:()=>BC,_uU:()=>fR,Oqu:()=>PE,hij:()=>Em});var f=V(765),H=V(319),O=V(574),pe=V(682),Oe=V(441);var Ae=V(307);function se(){return new f.xQ}function k(i){for(let s in i)if(i[s]===k)return s;throw Error("Could not find renamed property on target object.")}function Q(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function Y(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Y).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function we(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ie=k({__forward_ref__:k});function ue(i){return i.__forward_ref__=ue,i.toString=function(){return Y(this())},i}function G(i){return ce(i)?i():i}function ce(i){return"function"==typeof i&&i.hasOwnProperty(Ie)&&i.__forward_ref__===ue}class Se extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function Fe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ct(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Fe(i)}function Et(i,s){const o=s?` in ${s}`:"";throw new Se("201",`No provider for ${Ct(i)} found${o}`)}function tn(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function on(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Lr(i){return{providers:i.providers||[],imports:i.imports||[]}}function _e(i){return Pn(i,xt)||Pn(i,li)}function Pn(i,s){return i.hasOwnProperty(s)?i[s]:null}function xn(i){return i&&(i.hasOwnProperty(nr)||i.hasOwnProperty(rt))?i[nr]:null}const xt=k({\u0275prov:k}),nr=k({\u0275inj:k}),li=k({ngInjectableDef:k}),rt=k({ngInjectorDef:k});var fe=(()=>((fe=fe||{})[fe.Default=0]="Default",fe[fe.Host=1]="Host",fe[fe.Self=2]="Self",fe[fe.SkipSelf=4]="SkipSelf",fe[fe.Optional=8]="Optional",fe))();let Nt;function qt(i){const s=Nt;return Nt=i,s}function kt(i,s,o){const u=_e(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&fe.Optional?null:void 0!==s?s:void Et(Y(i),"Injector")}function je(i){return{toString:i}.toString()}var vr=(()=>((vr=vr||{})[vr.OnPush=0]="OnPush",vr[vr.Default=1]="Default",vr))(),Wt=(()=>((Wt=Wt||{})[Wt.Emulated=0]="Emulated",Wt[Wt.None=2]="None",Wt[Wt.ShadowDom=3]="ShadowDom",Wt))();const jt="undefined"!=typeof globalThis&&globalThis,gs="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,L=jt||"undefined"!=typeof global&&global||gs||U,Ve={},Pe=[],Lt=k({\u0275cmp:k}),Mn=k({\u0275dir:k}),Cn=k({\u0275pipe:k}),$n=k({\u0275mod:k}),yt=k({\u0275loc:k}),X=k({\u0275fac:k}),j=k({__NG_ELEMENT_ID__:k});let B=0;function oe(i){return je(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===vr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Pe,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Wt.Emulated,id:"c",styles:i.styles||Pe,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,d=i.features,g=i.pipes;return u.id+=B++,u.inputs=Hn(i.inputs,o),u.outputs=Hn(i.outputs),d&&d.forEach(y=>y(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(ht):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(ft):null,u})}function ht(i){return Nn(i)||function(i){return i[Mn]||null}(i)}function ft(i){return function(i){return i[Cn]||null}(i)}const Ft={};function In(i){return je(()=>{const s={type:i.type,bootstrap:i.bootstrap||Pe,declarations:i.declarations||Pe,imports:i.imports||Pe,exports:i.exports||Pe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Ft[i.id]=i.type),s})}function rr(i,s){return je(()=>{const o=Vr(i,!0);o.declarations=s.declarations||Pe,o.imports=s.imports||Pe,o.exports=s.exports||Pe})}function Hn(i,s){if(null==i)return Ve;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const wt=oe;function Qr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Nn(i){return i[Lt]||null}function Vr(i,s){const o=i[$n]||null;if(!o&&!0===s)throw new Error(`Type ${Y(i)} does not have '\u0275mod' property.`);return o}function ys(i){return Array.isArray(i)&&"object"==typeof i[1]}function Xt(i){return Array.isArray(i)&&!0===i[1]}function el(i){return 0!=(8&i.flags)}function fa(i){return 2==(2&i.flags)}function ku(i){return 1==(1&i.flags)}function Jr(i){return null!==i.template}function uy(i){return 0!=(512&i[2])}function Mo(i,s){return i.hasOwnProperty(X)?i[X]:null}class nl{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Hp(){return Ou}function Ou(i){return i.type.prototype.ngOnChanges&&(i.setInput=qp),d0}function d0(){const i=rh(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===Ve)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function qp(i,s,o,u){const l=rh(i)||function(i,s){return i[hy]=s}(i,{previous:Ve,current:null}),d=l.current||(l.current={}),g=l.previous,y=this.declaredInputs[o],E=g[y];d[y]=new nl(E&&E.currentValue,s,g===Ve),i[u]=s}Hp.ngInherit=!0;const hy="__ngSimpleChanges__";function rh(i){return i[hy]||null}let No;function Xr(i){No=i}function mn(i){return!!i.listen}const Gp={createRenderer:(i,s)=>void 0!==No?No:"undefined"!=typeof document?document:void 0};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function rl(i,s){return zt(s[i])}function hi(i,s){return zt(s[i.index])}function ir(i,s){return i.data[s]}function ei(i,s){const o=s[i];return ys(o)?o:o[0]}function il(i){return 4==(4&i[2])}function _a(i){return 128==(128&i[2])}function Es(i,s){return null==s?null:i[s]}function Wp(i){i[18]=0}function Pu(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const ot={lFrame:cl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fu(){return ot.bindingsEnabled}function le(){return ot.lFrame.lView}function vt(){return ot.lFrame.tView}function al(i){return ot.lFrame.contextLView=i,i[8]}function _n(){let i=ah();for(;null!==i&&64===i.type;)i=i.parent;return i}function ah(){return ot.lFrame.currentTNode}function rs(i,s){const o=ot.lFrame;o.currentTNode=i,o.isParent=s}function Lu(){return ot.lFrame.isParent}function Xs(){return ot.isInCheckNoChangesMode}function ws(i){ot.isInCheckNoChangesMode=i}function Br(){const i=ot.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function eo(){return ot.lFrame.bindingIndex++}function Vu(i,s){const o=ot.lFrame;o.bindingIndex=o.bindingRootIndex=i,Uu(s)}function Uu(i){ot.lFrame.currentDirectiveIndex=i}function ul(){return ot.lFrame.currentQueryIndex}function Yp(i){ot.lFrame.currentQueryIndex=i}function yy(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ph(i,s,o){if(o&fe.SkipSelf){let l=s,d=i;for(;!(l=l.parent,null!==l||o&fe.Host||(l=yy(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,i=d}const u=ot.lFrame=Qp();return u.currentTNode=s,u.lView=i,!0}function Bu(i){const s=Qp(),o=i[1];ot.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Qp(){const i=ot.lFrame,s=null===i?null:i.child;return null===s?cl(i):s}function cl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function gh(){const i=ot.lFrame;return ot.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const mh=gh;function _h(){const i=gh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function sr(){return ot.lFrame.selectedIndex}function to(i){ot.lFrame.selectedIndex=i}function un(){const i=ot.lFrame;return ir(i.tView,i.selectedIndex)}function ju(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:D}=d;g&&(i.contentHooks||(i.contentHooks=[])).push(-o,g),y&&((i.contentHooks||(i.contentHooks=[])).push(o,y),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,y)),E&&(i.viewHooks||(i.viewHooks=[])).push(-o,E),C&&((i.viewHooks||(i.viewHooks=[])).push(o,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,C)),null!=D&&(i.destroyHooks||(i.destroyHooks=[])).push(o,D)}}function wa(i,s,o){Ch(i,s,3,o)}function bh(i,s,o,u){(3&i[2])===o&&Ch(i,s,o,u)}function Po(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function Ch(i,s,o,u){const d=null!=u?u:-1,g=s.length-1;let y=0;for(let E=void 0!==u?65535&i[18]:0;E<g;E++)if("number"==typeof s[E+1]){if(y=s[E],null!=u&&y>=u)break}else s[E]<0&&(i[18]+=65536),(y<d||-1==d)&&(wy(i,o,s,E),i[18]=(4294901760&i[18])+E+2),E++}function wy(i,s,o,u){const l=o[u]<0,d=o[u+1],y=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class $u{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Hu(i,s,o){const u=mn(i);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const g=o[l++],y=o[l++],E=o[l++];u?i.setAttribute(s,y,E,g):s.setAttributeNS(g,y,E)}else{const g=d,y=o[++l];ro(g)?u&&i.setProperty(s,g,y):u?i.setAttribute(s,g,y):s.setAttribute(g,y),l++}}return l}function qu(i){return 3===i||4===i||6===i}function ro(i){return 64===i.charCodeAt(0)}function Gu(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Iy(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function Iy(i,s,o,u,l){let d=0,g=i.length;if(-1===s)g=-1;else for(;d<i.length;){const y=i[d++];if("number"==typeof y){if(y===s){g=-1;break}if(y>s){g=d-1;break}}}for(;d<i.length;){const y=i[d];if("number"==typeof y)break;if(y===o){if(null===u)return void(null!==l&&(i[d+1]=l));if(u===i[d+1])return void(i[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==g&&(i.splice(g,0,s),d=g+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==l&&i.splice(d++,0,l)}function Xp(i){return-1!==i}function Zu(i){return 32767&i}function Lo(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let ll=!0;function Dh(i){const s=ll;return ll=i,s}let Ah=0;function dl(i,s){const o=Cs(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,ze(u.data,i),ze(s,null),ze(u.blueprint,null));const l=Vo(i,s),d=i.injectorIndex;if(Xp(l)){const g=Zu(l),y=Lo(l,s),E=y[1].data;for(let C=0;C<8;C++)s[d+C]=y[g+C]|E[g+C]}return s[d+8]=l,d}function ze(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Cs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Vo(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){const d=l[1],g=d.type;if(u=2===g?d.declTNode:1===g?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function jr(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(j)&&(u=o[j]),null==u&&(u=o[j]=Ah++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function Ln(i,s,o){if(o&fe.Optional)return i;Et(s,"NodeInjector")}function ng(i,s,o,u){if(o&fe.Optional&&void 0===u&&(u=null),0==(o&(fe.Self|fe.Host))){const l=i[9],d=qt(void 0);try{return l?l.get(s,u,o&fe.Optional):kt(s,u,o&fe.Optional)}finally{qt(d)}}return Ln(u,s,o)}function kn(i,s,o,u=fe.Default,l){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(j)?i[j]:void 0;return"number"==typeof s?s>=0?255&s:Vn:s}(o);if("function"==typeof d){if(!ph(s,i,u))return u&fe.Host?Ln(l,o,u):ng(s,o,u,l);try{const g=d(u);if(null!=g||u&fe.Optional)return g;Et(o)}finally{mh()}}else if("number"==typeof d){let g=null,y=Cs(i,s),E=-1,C=u&fe.Host?s[16][6]:null;for((-1===y||u&fe.SkipSelf)&&(E=-1===y?Vo(i,s):s[y+8],-1!==E&&Sy(u,!1)?(g=s[1],y=Zu(E),s=Lo(E,s)):y=-1);-1!==y;){const D=s[1];if(Sh(d,y,D.data)){const R=Ty(y,s,o,g,u,C);if(R!==rg)return R}E=s[y+8],-1!==E&&Sy(u,s[1].data[y+8]===C)&&Sh(d,y,s)?(g=D,y=Zu(E),s=Lo(E,s)):y=-1}}}return ng(s,o,u,l)}const rg={};function Vn(){return new pi(_n(),le())}function Ty(i,s,o,u,l,d){const g=s[1],y=g.data[i+8],D=Uo(y,g,o,null==u?fa(y)&&ll:u!=g&&0!=(3&y.type),l&fe.Host&&d===y);return null!==D?Wu(s,g,D,y):rg}function Uo(i,s,o,u,l){const d=i.providerIndexes,g=s.data,y=1048575&d,E=i.directiveStart,D=d>>20,M=l?y+D:i.directiveEnd;for(let P=u?y:y+D;P<M;P++){const q=g[P];if(P<E&&o===q||P>=E&&q.type===o)return P}if(l){const P=g[E];if(P&&Jr(P)&&P.type===o)return E}return null}function Wu(i,s,o,u){let l=i[o];const d=s.data;if(function(i){return i instanceof $u}(l)){const g=l;g.resolving&&function(i,s){throw new Se("200",`Circular dependency in DI detected for ${i}`)}(Ct(d[o]));const y=Dh(g.canSeeViewProviders);g.resolving=!0;const E=g.injectImpl?qt(g.injectImpl):null;ph(i,u,fe.Default);try{l=i[o]=g.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const g=Ou(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,g)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==E&&qt(E),Dh(y),g.resolving=!1,mh()}}return l}function Sh(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function Sy(i,s){return!(i&fe.Self||i&fe.Host&&s)}class pi{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return kn(this._tNode,this._lView,s,u,o)}}function ba(i){return je(()=>{const s=i.prototype.constructor,o=s[X]||Bo(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const d=l[X]||Bo(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function Bo(i){return ce(i)?()=>{const s=Bo(G(i));return s&&s()}:Mo(i)}function io(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(qu(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(_n(),i)}const Oi="__parameters__";function it(i,s,o){return je(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const g=new l(...d);return y.annotation=g,y;function y(E,C,D){const R=E.hasOwnProperty(Oi)?E[Oi]:Object.defineProperty(E,Oi,{value:[]})[Oi];for(;R.length<=D;)R.push(null);return(R[D]=R[D]||[]).push(g),E}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class fn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=on({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const xh=new fn("AnalyzeForEntryComponents"),ao=Function;function $r(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),$r(u,s)):s!==i&&s.push(u)}return s}function is(i,s){i.forEach(o=>Array.isArray(o)?is(o,s):s(o))}function fl(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function $o(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Er(i,s,o){let u=Aa(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function Zn(i,s){const o=Aa(i,s);if(o>=0)return i[1|o]}function Aa(i,s){return function(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const d=u+(l-u>>1),g=i[d<<o];if(s===g)return d<<o;g>s?l=d:u=d+1}return~(l<<o)}(i,s,1)}const Ho={},Oh="__NG_DI_FLAG__",co="ngTempTokenPath",Ph=/\n/gm,ml="__source",Lh=k({provide:String,useValue:k});let Qu;function lo(i){const s=Qu;return Qu=i,s}function _l(i,s=fe.Default){if(void 0===Qu)throw new Error("inject() must be called from an injection context");return null===Qu?kt(i,void 0,s):Qu.get(i,s&fe.Optional?null:void 0,s)}function He(i,s=fe.Default){return(Nt||_l)(G(i),s)}function As(i){const s=[];for(let o=0;o<i.length;o++){const u=G(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=fe.Default;for(let g=0;g<u.length;g++){const y=u[g],E=Fy(y);"number"==typeof E?-1===E?l=y.token:d|=E:l=y}s.push(He(l,d))}else s.push(He(u))}return s}function qo(i,s){return i[Oh]=s,i.prototype[Oh]=s,i}function Fy(i){return i[Oh]}function yl(i,s,o,u){const l=i[co];throw s[ml]&&l.unshift(s[ml]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=Y(s);if(Array.isArray(s))l=s.map(Y).join(" -> ");else if("object"==typeof s){let d=[];for(let g in s)if(s.hasOwnProperty(g)){let y=s[g];d.push(g+":"+("string"==typeof y?JSON.stringify(y):Y(y)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(Ph,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[co]=null,i}const Rs=qo(it("Inject",i=>({token:i})),-1),ss=qo(it("Optional"),8),xs=qo(it("SkipSelf"),4);let wl;function fo(i){var s;return(null===(s=function(){if(void 0===wl&&(wl=null,L.trustedTypes))try{wl=L.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return wl}())||void 0===s?void 0:s.createHTML(i))||i}class po{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gg extends po{getTypeName(){return"HTML"}}class Uh extends po{getTypeName(){return"Style"}}class jy extends po{getTypeName(){return"Script"}}class $y extends po{getTypeName(){return"URL"}}class Il extends po{getTypeName(){return"ResourceURL"}}function ks(i){return i instanceof po?i.changingThisBreaksApplicationSecurity:i}function ka(i,s){const o=Bh(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function Bh(i){return i instanceof po&&i.getTypeName()||null}function Hy(i){return new gg(i)}function qy(i){return new Uh(i)}function mg(i){return new jy(i)}function jh(i){return new $y(i)}function ic(i){return new Il(i)}class Zo{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(fo(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class _g{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=fo(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=fo(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let l=o.length-1;0<l;l--){const g=o.item(l).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&s.removeAttribute(g)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Gy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oa(i){return(i=String(i)).match(Gy)||i.match(yg)?i:"unsafe:"+i}function Li(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function zo(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const Hh=Li("area,br,col,hr,img,wbr"),qh=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=Li("rp,rt"),T=zo(Hh,zo(qh,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zo(v,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zo(v,qh)),S=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),W=Li("srcset"),Ce=zo(S,W,Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ke=Li("script,style,template");class Ot{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!T.hasOwnProperty(o))return this.sanitizedSomething=!0,!Ke.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),g=d.name,y=g.toLowerCase();if(!Ce.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let E=d.value;S[y]&&(E=Oa(E)),W[y]&&(i=E,E=(i=String(i)).split(",").map(s=>Oa(s.trim())).join(", ")),this.buf.push(" ",g,'="',Os(E),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();T.hasOwnProperty(o)&&!Hh.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(Os(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const Yt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function Os(i){return i.replace(/&/g,"&amp;").replace(Yt,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ko;function Dl(i,s){let o=null;try{Ko=Ko||function(i){const s=new _g(i);return function(){try{return!!(new window.DOMParser).parseFromString(fo(""),"text/html")}catch(i){return!1}}()?new Zo(s):s}(i);let u=s?String(s):"";o=Ko.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=Ko.getInertBodyElement(u)}while(u!==d);return fo((new Ot).sanitizeChildren(sc(o)||o))}finally{if(o){const u=sc(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function sc(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var cn=(()=>((cn=cn||{})[cn.NONE=0]="NONE",cn[cn.HTML=1]="HTML",cn[cn.STYLE=2]="STYLE",cn[cn.SCRIPT=3]="SCRIPT",cn[cn.URL=4]="URL",cn[cn.RESOURCE_URL=5]="RESOURCE_URL",cn))();function Fa(i){const s=function(){const i=le();return i&&i[12]}();return s?s.sanitize(cn.URL,i)||"":ka(i,"URL")?ks(i):Oa(Fe(i))}const E0="__ngContext__";function Wn(i,s){i[E0]=s}function wg(i){const s=function(i){return i[E0]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function La(i){return i.ngOriginalError}function Dg(i,...s){i.error(...s)}class uc{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),l=(i=s)&&i.ngErrorLogger||Dg;var i;l(this._console,"ERROR",s),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(La(s)):null}_findOriginalError(s){let o=s&&La(s);for(;o&&La(o);)o=La(o);return o||null}}const S0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function mo(i){return i instanceof Function?i():i}var _o=(()=>((_o=_o||{})[_o.Important=1]="Important",_o[_o.DashCase=2]="DashCase",_o))();function nv(i,s){return undefined(i,s)}function Wh(i){const s=i[3];return Xt(s)?s[3]:s}function iv(i){return ov(i[13])}function sv(i){return ov(i[4])}function ov(i){for(;null!==i&&!Xt(i);)i=i[4];return i}function cc(i,s,o,u,l){if(null!=u){let d,g=!1;Xt(u)?d=u:ys(u)&&(g=!0,u=u[0]);const y=zt(u);0===i&&null!==o?null==l?F0(s,o,y):lc(s,o,y,l||null,!0):1===i&&null!==o?lc(s,o,y,l||null,!0):2===i?function(i,s,o){const u=xg(i,s);u&&function(i,s,o,u){mn(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,y,g):3===i&&s.destroyNode(y),null!=d&&function(i,s,o,u,l){const d=o[7];d!==zt(o)&&cc(s,i,u,d,l);for(let y=10;y<o.length;y++){const E=o[y];xl(E[1],E,i,s,u,d)}}(s,i,d,o,l)}}function uv(i,s,o){return mn(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function k0(i,s){const o=i[9],u=o.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,Pu(l,-1)),o.splice(u,1)}function lv(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&k0(l,u),s>0&&(i[o-1][4]=u[4]);const d=$o(i,10+s);!function(i,s){xl(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Sg(i,s){if(!(256&s[2])){const o=s[11];mn(o)&&o.destroyNode&&xl(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return Rg(i[1],i);for(;s;){let o=null;if(ys(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)ys(s)&&Rg(s[1],s),s=s[3];null===s&&(s=i),ys(s)&&Rg(s[1],s),o=s&&s[4]}s=o}}(s)}}function Rg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof $u)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const y=l[d[g]],E=d[g+1];try{E.call(y)}finally{}}else try{d.call(l)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],y="function"==typeof g?g(s):zt(s[g]),E=u[l=o[d+2]],C=o[d+3];"boolean"==typeof C?y.removeEventListener(o[d],E,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),d+=2}else{const g=u[l=o[d+1]];o[d].call(g)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&mn(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&Xt(s[3])){o!==s[3]&&k0(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function O0(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===Wt.None||l===Wt.Emulated)return null}return hi(u,o)}(i,s.parent,o)}function lc(i,s,o,u,l){mn(i)?i.insertBefore(s,o,u,l):s.insertBefore(o,u,l)}function F0(i,s,o){mn(i)?i.appendChild(s,o):s.appendChild(o)}function dv(i,s,o,u,l){null!==u?lc(i,s,o,u,l):F0(i,s,o)}function xg(i,s){return mn(i)?i.parentNode(s):s.parentNode}let Mg=function(i,s,o){return 40&i.type?hi(i,o):null};function Ng(i,s,o,u){const l=O0(i,u,s),d=s[11],y=function(i,s,o){return Mg(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let E=0;E<o.length;E++)dv(d,l,o[E],y,!1);else dv(d,l,o,y,!1)}function kg(i,s){if(null!==s){const o=s.type;if(3&o)return hi(s,i);if(4&o)return hv(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return kg(i,u);{const l=i[s.index];return Xt(l)?hv(-1,l):zt(l)}}if(32&o)return nv(s,i)()||zt(i[s.index]);{const u=Og(i,s);return null!==u?Array.isArray(u)?u[0]:kg(Wh(i[16]),u):kg(i,s.next)}}return null}function Og(i,s){return null!==s?i[16][6].projection[s.projection]:null}function hv(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return kg(u,l)}return s[7]}function pv(i,s,o,u,l,d,g){for(;null!=o;){const y=u[o.index],E=o.type;if(g&&0===s&&(y&&Wn(zt(y),u),o.flags|=4),64!=(64&o.flags))if(8&E)pv(i,s,o.child,u,l,d,!1),cc(s,i,l,y,d);else if(32&E){const C=nv(o,u);let D;for(;D=C();)cc(s,i,l,D,d);cc(s,i,l,y,d)}else 16&E?Pg(i,s,u,o,l,d):cc(s,i,l,y,d);o=g?o.projectionNext:o.next}}function xl(i,s,o,u,l,d){pv(o,u,i.firstChild,s,l,d,!1)}function Pg(i,s,o,u,l,d){const g=o[16],E=g[6].projection[u.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)cc(s,i,l,E[C],d);else pv(i,s,E,g[3],l,d,!0)}function gv(i,s,o){mn(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function mv(i,s,o){mn(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function U0(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||i.charCodeAt(l+d)<=32)return l}o=l+1}}const _v="ng-template";function KA(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==U0(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function B0(i){return 4===i.type&&i.value!==_v}function YA(i,s,o){return s===(4!==i.type||o?i.value:_v)}function j0(i,s,o){let u=4;const l=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(qu(i[s]))return s;return i.length}(l);let g=!1;for(let y=0;y<s.length;y++){const E=s[y];if("number"!=typeof E){if(!g)if(4&u){if(u=2|1&u,""!==E&&!YA(i,E,o)||""===E&&1===s.length){if(Fs(u))return!1;g=!0}}else{const C=8&u?E:s[++y];if(8&u&&null!==i.attrs){if(!KA(i.attrs,C,o)){if(Fs(u))return!1;g=!0}continue}const R=QA(8&u?"class":E,l,B0(i),o);if(-1===R){if(Fs(u))return!1;g=!0;continue}if(""!==C){let M;M=R>d?"":l[R+1].toLowerCase();const P=8&u?M:null;if(P&&-1!==U0(P,C,0)||2&u&&C!==M){if(Fs(u))return!1;g=!0}}}}else{if(!g&&!Fs(u)&&!Fs(E))return!1;if(g&&Fs(E))continue;g=!1,u=E|1&u}}return Fs(u)||g}function Fs(i){return 0==(1&i)}function QA(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const g=s[l];if(g===i)return l;if(3===g||6===g)d=!0;else{if(1===g||2===g){let y=s[++l];for(;"string"==typeof y;)y=s[++l];continue}if(4===g)break;if(0===g){l+=4;continue}}l+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function $0(i,s,o=!1){for(let u=0;u<s.length;u++)if(j0(i,s[u],o))return!0;return!1}function q0(i,s){return i?":not("+s.trim()+")":s}function gk(i){let s=i[0],o=1,u=2,l="",d=!1;for(;o<i.length;){let g=i[o];if("string"==typeof g)if(2&u){const y=i[++o];l+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?l+="."+g:4&u&&(l+=" "+g);else""!==l&&!Fs(g)&&(s+=q0(d,l),l=""),u=g,d=d||!Fs(u);o++}return""!==l&&(s+=q0(d,l)),s}const ke={};function us(i){gi(vt(),le(),sr()+i,Xs())}function gi(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&wa(s,d,o)}else{const d=i.preOrderHooks;null!==d&&bh(s,d,0,o)}to(o)}function Fg(i,s){return i<<17|s<<2}function Ls(i){return i>>17&32767}function mi(i){return 2|i}function _i(i){return(131068&i)>>2}function vv(i,s){return-131069&i|s<<2}function Ev(i){return 1|i}function vo(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const g=i.data[d];Yp(l),g.contentQueries(2,s[d],d)}}}function Nl(i,s,o,u,l,d,g,y,E,C){const D=s.blueprint.slice();return D[0]=l,D[2]=140|u,Wp(D),D[3]=D[15]=i,D[8]=o,D[10]=g||i&&i[10],D[11]=y||i&&i[11],D[12]=E||i&&i[12]||null,D[9]=C||i&&i[9]||null,D[6]=d,D[16]=2==s.type?i[16]:D,D}function Ua(i,s,o,u,l){let d=i.data[s];if(null===d)d=function(i,s,o,u,l){const d=ah(),g=Lu(),E=i.data[s]=function(i,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=E),null!==d&&(g?null==d.child&&null!==E.parent&&(d.child=E):null===d.next&&(d.next=E)),E}(i,s,o,u,l),ot.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const g=function(){const i=ot.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return rs(d,!0),d}function pc(i,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function kl(i,s,o){Bu(s);try{const u=i.viewQuery;null!==u&&Uv(1,u,o);const l=i.template;null!==l&&X0(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&vo(i,s),i.staticViewQueries&&Uv(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)Vv(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,_h()}}function Ba(i,s,o,u){const l=s[2];if(256==(256&l))return;Bu(s);const d=Xs();try{Wp(s),function(i){ot.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&X0(i,s,o,2,u);const g=3==(3&l);if(!d)if(g){const C=i.preOrderCheckHooks;null!==C&&wa(s,C,null)}else{const C=i.preOrderHooks;null!==C&&bh(s,C,0,null),Po(s,0)}if(function(i){for(let s=iv(i);null!==s;s=sv(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&Pu(d,1),l[2]|=1024}}}(s),function(i){for(let s=iv(i);null!==s;s=sv(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];_a(u)&&Ba(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&vo(i,s),!d)if(g){const C=i.contentCheckHooks;null!==C&&wa(s,C)}else{const C=i.contentHooks;null!==C&&bh(s,C,1),Po(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)to(~l);else{const d=l,g=o[++u],y=o[++u];Vu(g,d),y(2,s[d])}}}finally{to(-1)}}(i,s);const y=i.components;null!==y&&function(i,s){for(let o=0;o<s.length;o++)mS(i,s[o])}(s,y);const E=i.viewQuery;if(null!==E&&Uv(2,E,u),!d)if(g){const C=i.viewCheckHooks;null!==C&&wa(s,C)}else{const C=i.viewHooks;null!==C&&bh(s,C,2),Po(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Pu(s[3],-1))}finally{_h()}}function Av(i,s,o,u){const l=s[10],d=!Xs(),g=il(s);try{d&&!g&&l.begin&&l.begin(),g&&kl(i,s,u),Ba(i,s,o,u)}finally{d&&!g&&l.end&&l.end()}}function X0(i,s,o,u,l){const d=sr(),g=2&u;try{to(-1),g&&s.length>20&&gi(i,s,20,Xs()),o(u,l)}finally{to(d)}}function Sv(i,s,o){!Fu()||(function(i,s,o,u){const l=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||dl(o,s),Wn(u,s);const g=o.initialInputs;for(let y=l;y<d;y++){const E=i.data[y],C=Jr(E);C&&fS(s,o,E);const D=Wu(s,i,y,o);Wn(D,s),null!==g&&Fv(0,y-l,D,E,0,g),C&&(ei(o.index,s)[8]=D)}}(i,s,o,hi(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,l=o.directiveEnd,g=o.index,y=ot.lFrame.currentDirectiveIndex;try{to(g);for(let E=u;E<l;E++){const C=i.data[E],D=s[E];Uu(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Wg(C,D)}}finally{to(-1),Uu(y)}}(i,s,o))}function Jh(i,s,o=hi){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],y=-1===g?o(s,i):i[g];i[l++]=y}}}function Rv(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Hg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Hg(i,s,o,u,l,d,g,y,E,C){const D=20+u,R=D+l,M=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:ke);return o}(D,R),P="function"==typeof C?C():C;return M[1]={type:i,blueprint:M,template:o,queries:null,viewQuery:y,declTNode:s,data:M.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:E,consts:P,incompleteFirstPass:!1}}function gc(i,s,o,u){const l=uC(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&Qg(i).push(u,l.length-1))}function xv(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function yi(i,s,o,u,l,d,g,y){const E=hi(s,o);let D,C=s.inputs;!y&&null!=C&&(D=C[u])?(lC(i,o,D,u,l),fa(s)&&function(i,s){const o=ei(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=g?g(l,s.value||"",u):l,mn(d)?d.setProperty(E,u,l):ro(u)||(E.setProperty?E.setProperty(u,l):E[u]=l))}function Xh(i,s,o,u){let l=!1;if(Fu()){const d=function(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];$0(o,g.selectors,!1)&&(l||(l=[]),jr(dl(o,s),i,g.type),Jr(g)?(zg(i,o),l.unshift(g)):l.push(g))}return l}(i,s,o),g=null===u?null:{"":-1};if(null!==d){l=!0,rC(o,i.data.length,d.length);for(let D=0;D<d.length;D++){const R=d[D];R.providersResolver&&R.providersResolver(R)}let y=!1,E=!1,C=pc(i,s,d.length,null);for(let D=0;D<d.length;D++){const R=d[D];o.mergedAttrs=Gu(o.mergedAttrs,R.hostAttrs),iC(i,o,s,C,R),Ov(C,R,g),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const M=R.type.prototype;!y&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),y=!0),!E&&(M.ngOnChanges||M.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),E=!0),C++}!function(i,s){const u=s.directiveEnd,l=i.data,d=s.attrs,g=[];let y=null,E=null;for(let C=s.directiveStart;C<u;C++){const D=l[C],R=D.inputs,M=null===d||B0(s)?null:sC(R,d);g.push(M),y=xv(R,C,y),E=xv(D.outputs,C,E)}null!==y&&(y.hasOwnProperty("class")&&(s.flags|=16),y.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=g,s.inputs=y,s.outputs=E}(i,o)}g&&function(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new Se("301",`Export of name '${s[l+1]}' not found!`);u.push(s[l],d)}}}(o,u,g)}return o.mergedAttrs=Gu(o.mergedAttrs,o.attrs),l}function Gg(i,s,o,u,l,d){const g=d.hostBindings;if(g){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const E=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(y)!=E&&y.push(E),y.push(u,l,g)}}function Wg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function zg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ov(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;Jr(s)&&(o[""]=i)}}function rC(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function iC(i,s,o,u,l){i.data[u]=l;const d=l.factory||(l.factory=Mo(l.type)),g=new $u(d,Jr(l),null);i.blueprint[u]=g,o[u]=g,Gg(i,s,0,u,pc(i,o,l.hostVars,ke),l)}function fS(i,s,o){const u=hi(s,i),l=Rv(o),d=i[10],g=Pl(i,Nl(i,l,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=g}function cs(i,s,o,u,l,d){const g=hi(i,s);!function(i,s,o,u,l,d,g){if(null==d)mn(i)?i.removeAttribute(s,l,o):s.removeAttribute(l);else{const y=null==g?Fe(d):g(d,u||"",l);mn(i)?i.setAttribute(s,l,y,o):o?s.setAttributeNS(o,l,y):s.setAttribute(l,y)}}(s[11],g,d,i.value,o,u,l)}function Fv(i,s,o,u,l,d){const g=d[s];if(null!==g){const y=u.setInput;for(let E=0;E<g.length;){const C=g[E++],D=g[E++],R=g[E++];null!==y?u.setInput(o,R,C,D):o[D]=R}}}function sC(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function oC(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function mS(i,s){const o=ei(s,i);if(_a(o)){const u=o[1];80&o[2]?Ba(u,o,u.template,o[8]):o[5]>0&&tf(o)}}function tf(i){for(let u=iv(i);null!==u;u=sv(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const g=d[1];Ba(g,d,g.template,d[8])}else d[5]>0&&tf(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=ei(o[u],i);_a(l)&&l[5]>0&&tf(l)}}function Vv(i,s){const o=ei(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),kl(u,o,o[8])}function Pl(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Kg(i){for(;i;){i[2]|=64;const s=Wh(i);if(uy(i)&&!s)return i;i=s}return null}function Yg(i,s,o){const u=s[10];u.begin&&u.begin();try{Ba(i,s,i.template,o)}catch(l){throw Jg(s,l),l}finally{u.end&&u.end()}}function aC(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=wg(o),l=u[1];Av(l,u,l.template,o)}}(i[8])}function Uv(i,s,o){Yp(0),s(i,o)}const Bv=(()=>Promise.resolve(null))();function uC(i){return i[7]||(i[7]=[])}function Qg(i){return i.cleanup||(i.cleanup=[])}function Jg(i,s){const o=i[9],u=o?o.get(uc,null):null;u&&u.handleError(s)}function lC(i,s,o,u,l){for(let d=0;d<o.length;){const g=o[d++],y=o[d++],E=s[g],C=i.data[g];null!==C.setInput?C.setInput(E,l,u,y):E[y]=l}}function Vs(i,s,o){const u=rl(s,i);!function(i,s,o){mn(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function Xg(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,d=0;if(null!==s)for(let g=0;g<s.length;g++){const y=s[g];"number"==typeof y?d=y:1==d?l=we(l,y):2==d&&(u=we(u,y+": "+s[++g]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}const rf=new fn("INJECTOR",-1);class dC{get(s,o=Ho){if(o===Ho){const u=new Error(`NullInjectorError: No provider for ${Y(s)}!`);throw u.name="NullInjectorError",u}return o}}const yc=new fn("Set Injector scope."),Fl={},wS={};let $v;function hC(){return void 0===$v&&($v=new dC),$v}function em(i,s=null,o=null,u){return new fC(i,o,s||hC(),u)}class fC{constructor(s,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&is(o,y=>this.processProvider(y,s,o)),is([s],y=>this.processInjectorType(y,[],d)),this.records.set(rf,Ll(void 0,this));const g=this.records.get(yc);this.scope=null!=g?g.value:null,this.source=l||("object"==typeof s?null:Y(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=Ho,u=fe.Default){this.assertNotDestroyed();const l=lo(this),d=qt(void 0);try{if(!(u&fe.SkipSelf)){let y=this.records.get(s);if(void 0===y){const E=("function"==typeof(i=s)||"object"==typeof i&&i instanceof fn)&&_e(s);y=E&&this.injectableDefInScope(E)?Ll(Hv(s),Fl):null,this.records.set(s,y)}if(null!=y)return this.hydrate(s,y)}return(u&fe.Self?hC():this.parent).get(s,o=u&fe.Optional&&o===Ho?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[co]=g[co]||[]).unshift(Y(s)),l)throw g;return yl(g,s,"R3InjectorError",this.source)}throw g}finally{qt(d),lo(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(Y(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=G(s)))return!1;let l=xn(s);const d=null==l&&s.ngModule||void 0,g=void 0===d?s:d,y=-1!==u.indexOf(g);if(void 0!==d&&(l=xn(d)),null==l)return!1;if(null!=l.imports&&!y){let D;u.push(g);try{is(l.imports,R=>{this.processInjectorType(R,o,u)&&(void 0===D&&(D=[]),D.push(R))})}finally{}if(void 0!==D)for(let R=0;R<D.length;R++){const{ngModule:M,providers:P}=D[R];is(P,q=>this.processProvider(q,M,P||Pe))}}this.injectorDefTypes.add(g);const E=Mo(g)||(()=>new g);this.records.set(g,Ll(E,Fl));const C=l.providers;if(null!=C&&!y){const D=s;is(C,R=>this.processProvider(R,D,C))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let l=Vl(s=G(s))?s:G(s&&s.provide);const d=gC(i=s)?Ll(void 0,i.useValue):Ll(ii(i),Fl);var i;if(Vl(s)||!0!==s.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=Ll(void 0,Fl,!0),g.factory=()=>As(g.multi),this.records.set(l,g)),l=s,g.multi.push(s)}this.records.set(l,d)}hydrate(s,o){return o.value===Fl&&(o.value=wS,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=G(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Hv(i){const s=_e(i),o=null!==s?s.factory:Mo(i);if(null!==o)return o;if(i instanceof fn)throw new Error(`Token ${Y(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${Y(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[xt]||i[li]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function ii(i,s,o){let u;if(Vl(i)){const l=G(i);return Mo(l)||Hv(l)}if(gC(i))u=()=>G(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...As(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>He(G(i.useExisting));else{const l=G(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Mo(l)||Hv(l);u=()=>new l(...As(i.deps))}return u}function Ll(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function gC(i){return null!==i&&"object"==typeof i&&Lh in i}function Vl(i){return"function"==typeof i}const tm=function(i,s,o){return function(i,s=null,o=null,u){const l=em(i,s,o,u);return l._resolveInjectorDefTypes(),l}({name:o},s,i,o)};let Dn=(()=>{class i{static create(o,u){return Array.isArray(o)?tm(o,u,""):tm(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=Ho,i.NULL=new dC,i.\u0275prov=on({token:i,providedIn:"any",factory:()=>He(rf)}),i.__NG_ELEMENT_ID__=-1,i})();function Wv(i,s){ju(wg(i)[1],_n())}function zv(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(Jr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");l=s.\u0275dir}if(l){if(o){u.push(l);const g=i;g.inputs=af(i.inputs),g.declaredInputs=af(i.declaredInputs),g.outputs=af(i.outputs);const y=l.hostBindings;y&&Yv(i,y);const E=l.viewQuery,C=l.contentQueries;if(E&&Kv(i,E),C&&NC(i,C),Q(i.inputs,l.inputs),Q(i.declaredInputs,l.declaredInputs),Q(i.outputs,l.outputs),Jr(l)&&l.data.animation){const D=i.data;D.animation=(D.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let g=0;g<d.length;g++){const y=d[g];y&&y.ngInherit&&y(i),y===zv&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=Gu(l.hostAttrs,o=Gu(o,l.hostAttrs))}}(u)}function af(i){return i===Ve?{}:i===Pe?[]:i}function Kv(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function NC(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,d)=>{s(u,l,d),o(u,l,d)}:s}function Yv(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let jl=null;function qa(){if(!jl){const i=L.Symbol;if(i&&i.iterator)jl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(jl=u)}}}return jl}function uf(i){return!!cf(i)&&(Array.isArray(i)||!(i instanceof Map)&&qa()in i)}function cf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Us(i,s,o){return i[s]=o}function wr(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function eE(i,s,o,u){const l=le();return wr(l,eo(),s)&&(vt(),cs(un(),l,i,s,o,u)),eE}function Ga(i,s,o,u){return wr(i,eo(),o)?s+Fe(o)+u:ke}function BC(i,s,o,u,l,d,g,y){const E=le(),C=vt(),D=i+20,R=C.firstCreatePass?function(i,s,o,u,l,d,g,y,E){const C=s.consts,D=Ua(s,i,4,g||null,Es(C,y));Xh(s,o,D,Es(C,E)),ju(s,D);const R=D.tViews=Hg(2,D,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,D),R.queries=s.queries.embeddedTView(D)),D}(D,C,E,s,o,u,l,d,g):C.data[D];rs(R,!1);const M=E[11].createComment("");Ng(C,E,M,R),Wn(M,E),Pl(E,E[D]=oC(M,E,M,R)),ku(R)&&Sv(C,E,R),null!=g&&Jh(E,R,y)}function Cc(i,s=fe.Default){const o=le();return null===o?He(i,s):kn(_n(),o,G(i),s)}function hf(i,s,o){const u=le();return wr(u,eo(),s)&&yi(vt(),un(),u,i,s,u[11],o,!1),hf}function um(i,s,o,u,l){const g=l?"class":"style";lC(i,o,s.inputs[g],g,u)}function EE(i,s,o,u){const l=le(),d=vt(),g=20+i,y=l[11],E=l[g]=uv(y,s,ot.lFrame.currentNamespace),C=d.firstCreatePass?function(i,s,o,u,l,d,g){const y=s.consts,C=Ua(s,i,2,l,Es(y,d));return Xh(s,o,C,Es(y,g)),null!==C.attrs&&Xg(C,C.attrs,!1),null!==C.mergedAttrs&&Xg(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(g,d,l,0,s,o,u):d.data[g];rs(C,!0);const D=C.mergedAttrs;null!==D&&Hu(y,E,D);const R=C.classes;null!==R&&mv(y,E,R);const M=C.styles;null!==M&&gv(y,E,M),64!=(64&C.flags)&&Ng(d,l,E,C),0===ot.lFrame.elementDepthCount&&Wn(E,l),ot.lFrame.elementDepthCount++,ku(C)&&(Sv(d,l,C),function(i,s,o){if(el(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const g=i.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,C,l)),null!==u&&Jh(l,C)}function wE(){let i=_n();Lu()?ot.lFrame.isParent=!1:(i=i.parent,rs(i,!1));const s=i;ot.lFrame.elementDepthCount--;const o=vt();o.firstCreatePass&&(ju(o,i),el(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&um(o,s,le(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&um(o,s,le(),s.stylesWithoutHost,!1)}function zC(i,s,o,u){EE(i,s,o,u),wE()}function Eo(){return le()}function lm(i){return!!i&&"function"==typeof i.then}function CE(i){return!!i&&"function"==typeof i.subscribe}const Wl=CE;function dm(i,s,o,u){const l=le(),d=vt(),g=_n();return function(i,s,o,u,l,d,g,y){const E=ku(u),D=i.firstCreatePass&&Qg(i),R=s[8],M=uC(s);let P=!0;if(3&u.type||y){const K=hi(u,s),ye=y?y(K):K,ie=M.length,qe=y?at=>y(zt(at[u.index])):u.index;if(mn(o)){let at=null;if(!y&&E&&(at=function(i,s,o,u){const l=i.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const g=l[d];if(g===o&&l[d+1]===u){const y=s[7],E=l[d+2];return y.length>E?y[E]:null}"string"==typeof g&&(d+=2)}return null}(i,s,l,u.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=d,at.__ngLastListenerFn__=d,P=!1;else{d=DE(u,s,R,d,!1);const At=o.listen(ye,l,d);M.push(d,At),D&&D.push(l,qe,ie,ie+1)}}else d=DE(u,s,R,d,!0),ye.addEventListener(l,d,g),M.push(d),D&&D.push(l,qe,ie,g)}else d=DE(u,s,R,d,!1);const q=u.outputs;let ee;if(P&&null!==q&&(ee=q[l])){const K=ee.length;if(K)for(let ye=0;ye<K;ye+=2){const Qn=s[ee[ye]][ee[ye+1]].subscribe(d),Wi=M.length;M.push(d,Qn),D&&D.push(l,u.index,Wi,-(Wi+1))}}}(d,l,l[11],g,i,s,!!o,u),dm}function tR(i,s,o,u){try{return!1!==o(u)}catch(l){return Jg(i,l),!1}}function DE(i,s,o,u,l){return function d(g){if(g===Function)return u;const y=2&i.flags?ei(i.index,s):s;0==(32&s[2])&&Kg(y);let E=tR(s,0,u,g),C=d.__ngNextListenerFn__;for(;C;)E=tR(s,0,C,g)&&E,C=C.__ngNextListenerFn__;return l&&!1===E&&(g.preventDefault(),g.returnValue=!1),E}}function YC(i=1){return function(i){return(ot.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,ot.lFrame.contextLView))[8]}(i)}function pf(i,s,o){return AE(i,"",s,"",o),pf}function AE(i,s,o,u,l){const d=le(),g=Ga(d,s,o,u);return g!==ke&&yi(vt(),un(),d,i,g,d[11],l,!1),AE}function sR(i,s,o,u,l){const d=i[o+1],g=null===s;let y=u?Ls(d):_i(d),E=!1;for(;0!==y&&(!1===E||g);){const D=i[y+1];Qk(i[y],s)&&(E=!0,i[y+1]=u?Ev(D):mi(D)),y=u?Ls(D):_i(D)}E&&(i[o+1]=u?mi(d):Ev(d))}function Qk(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Aa(i,s)>=0}function iI(i,s){return function(i,s,o,u){const l=le(),d=vt(),g=function(i){const s=ot.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);d.firstUpdatePass&&function(i,s,o,u){const l=i.data;if(null===l[o+1]){const d=l[sr()],g=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!g&&(s=!1),s=function(i,s,o,u){const l=function(i){const s=ot.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=gf(o=kE(null,i,s,o,u),s.attrs,u),d=null);else{const g=s.directiveStylingLast;if(-1===g||i[g]!==l)if(o=kE(l,i,s,o,u),null===d){let E=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==_i(u))return i[Ls(u)]}(i,s,u);void 0!==E&&Array.isArray(E)&&(E=kE(null,i,s,E[1],u),E=gf(E,s.attrs,u),function(i,s,o,u){i[Ls(o?s.classBindings:s.styleBindings)]=u}(i,s,u,E))}else d=function(i,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=gf(u,i[d].hostAttrs,o);return gf(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function(i,s,o,u,l,d){let g=d?s.classBindings:s.styleBindings,y=Ls(g),E=_i(g);i[u]=o;let D,C=!1;if(Array.isArray(o)){const R=o;D=R[1],(null===D||Aa(R,D)>0)&&(C=!0)}else D=o;if(l)if(0!==E){const M=Ls(i[y+1]);i[u+1]=Fg(M,y),0!==M&&(i[M+1]=vv(i[M+1],u)),i[y+1]=function(i,s){return 131071&i|s<<17}(i[y+1],u)}else i[u+1]=Fg(y,0),0!==y&&(i[y+1]=vv(i[y+1],u)),y=u;else i[u+1]=Fg(E,0),0===y?y=u:i[E+1]=vv(i[E+1],u),E=u;C&&(i[u+1]=mi(i[u+1])),sR(i,D,u,!0),sR(i,D,u,!1),function(i,s,o,u,l){const d=l?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&Aa(d,s)>=0&&(o[u+1]=Ev(o[u+1]))}(s,D,i,u,d),g=Fg(y,E),d?s.classBindings=g:s.styleBindings=g}(l,d,s,o,g,u)}}(d,i,g,u),s!==ke&&wr(l,g,s)&&function(i,s,o,u,l,d,g,y){if(!(3&s.type))return;const E=i.data,C=E[y+1];vm(function(i){return 1==(1&i)}(C)?dR(E,s,o,l,_i(C),g):void 0)||(vm(d)||function(i){return 2==(2&i)}(C)&&(d=dR(E,null,o,l,y,g)),function(i,s,o,u,l){const d=mn(i);if(s)l?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let g=-1===u.indexOf("-")?void 0:_o.DashCase;if(null==l)d?i.removeStyle(o,u,g):o.style.removeProperty(u);else{const y="string"==typeof l&&l.endsWith("!important");y&&(l=l.slice(0,-10),g|=_o.Important),d?i.setStyle(o,u,l,g):o.style.setProperty(u,l,y?"important":"")}}}(u,g,rl(sr(),o),l,d))}(d,d.data[sr()],l,l[11],i,l[g+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Y(ks(i)))),i}(s,o),u,g)}(i,s,null,!0),iI}function kE(i,s,o,u,l){let d=null;const g=o.directiveEnd;let y=o.directiveStylingLast;for(-1===y?y=o.directiveStart:y++;y<g&&(d=s[y],u=gf(u,d.hostAttrs,l),d!==i);)y++;return null!==i&&(o.directiveStylingLast=y),u}function gf(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const g=s[d];"number"==typeof g?l=g:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Er(i,g,!!o||s[++d]))}return void 0===i?null:i}function dR(i,s,o,u,l,d){const g=null===s;let y;for(;l>0;){const E=i[l],C=Array.isArray(E),D=C?E[1]:E,R=null===D;let M=o[l+1];M===ke&&(M=R?Pe:void 0);let P=R?Zn(M,u):D===u?M:void 0;if(C&&!vm(P)&&(P=Zn(E,u)),vm(P)&&(y=P,g))return y;const q=i[l+1];l=g?Ls(q):_i(q)}if(null!==s){let E=d?s.residualClasses:s.residualStyles;null!=E&&(y=Zn(E,u))}return y}function vm(i){return void 0!==i}function fR(i,s=""){const o=le(),u=vt(),l=i+20,d=u.firstCreatePass?Ua(u,l,1,s,null):u.data[l],g=o[l]=function(i,s){return mn(i)?i.createText(s):i.createTextNode(s)}(o[11],s);Ng(u,o,g,d),rs(d,!1)}function PE(i){return Em("",i,""),PE}function Em(i,s,o){const u=le(),l=Ga(u,i,s,o);return l!==ke&&Vs(u,sr(),l),Em}function LE(i,s,o){const u=le();return wr(u,eo(),s)&&yi(vt(),un(),u,i,s,u[11],o,!0),LE}const Qa=void 0;var mI=["en",[["a","p"],["AM","PM"],Qa],[["AM","PM"],Qa,Qa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qa,"{1} 'at' {0}",Qa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let Yl={};function VE(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=Am(s);if(o)return o;const u=s.split("-")[0];if(o=Am(u),o)return o;if("en"===u)return mI;throw new Error(`Missing locale data for the locale "${i}".`)}function UE(i){return VE(i)[Ye.PluralCase]}function Am(i){return i in Yl||(Yl[i]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[i]),Yl[i]}var Ye=(()=>((Ye=Ye||{})[Ye.LocaleId=0]="LocaleId",Ye[Ye.DayPeriodsFormat=1]="DayPeriodsFormat",Ye[Ye.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ye[Ye.DaysFormat=3]="DaysFormat",Ye[Ye.DaysStandalone=4]="DaysStandalone",Ye[Ye.MonthsFormat=5]="MonthsFormat",Ye[Ye.MonthsStandalone=6]="MonthsStandalone",Ye[Ye.Eras=7]="Eras",Ye[Ye.FirstDayOfWeek=8]="FirstDayOfWeek",Ye[Ye.WeekendRange=9]="WeekendRange",Ye[Ye.DateFormat=10]="DateFormat",Ye[Ye.TimeFormat=11]="TimeFormat",Ye[Ye.DateTimeFormat=12]="DateTimeFormat",Ye[Ye.NumberSymbols=13]="NumberSymbols",Ye[Ye.NumberFormats=14]="NumberFormats",Ye[Ye.CurrencyCode=15]="CurrencyCode",Ye[Ye.CurrencySymbol=16]="CurrencySymbol",Ye[Ye.CurrencyName=17]="CurrencyName",Ye[Ye.Currencies=18]="Currencies",Ye[Ye.Directionality=19]="Directionality",Ye[Ye.PluralCase=20]="PluralCase",Ye[Ye.ExtraData=21]="ExtraData",Ye))();const Ql="en-US";let Rm=Ql;function BE(i){tn(i,"Expected localeId to be defined"),"string"==typeof i&&(Rm=i.toLowerCase().replace(/_/g,"-"))}function Be(i,s,o,u,l){if(i=G(i),Array.isArray(i))for(let d=0;d<i.length;d++)Be(i[d],s,o,u,l);else{const d=vt(),g=le();let y=Vl(i)?i:G(i.provide),E=ii(i);const C=_n(),D=1048575&C.providerIndexes,R=C.directiveStart,M=C.providerIndexes>>20;if(Vl(i)||!i.multi){const P=new $u(E,l,Cc),q=td(y,s,l?D:D+M,R);-1===q?(jr(dl(C,g),d,y),bf(d,i,s.length),s.push(y),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(P),g.push(P)):(o[q]=P,g[q]=P)}else{const P=td(y,s,D+M,R),q=td(y,s,D,D+M),ee=P>=0&&o[P],K=q>=0&&o[q];if(l&&!K||!l&&!ee){jr(dl(C,g),d,y);const ye=function(i,s,o,u,l){const d=new $u(i,o,Cc);return d.multi=[],d.index=s,d.componentProviders=0,ct(d,l,u&&!o),d}(l?Cf:YE,o.length,l,u,E);!l&&K&&(o[q].providerFactory=ye),bf(d,i,s.length,0),s.push(y),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(ye),g.push(ye)}else bf(d,i,P>-1?P:q,ct(o[l?q:P],E,!l&&u));!l&&u&&K&&o[q].componentProviders++}}}function bf(i,s,o,u){const l=Vl(s);if(l||function(i){return!!i.useClass}(s)){const g=(s.useClass||s).prototype.ngOnDestroy;if(g){const y=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const E=y.indexOf(o);-1===E?y.push(o,[u,g]):y[E+1].push(u,g)}else y.push(o,g)}}}function ct(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function td(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function YE(i,s,o,u){return QE(this.multi,[])}function Cf(i,s,o,u){const l=this.multi;let d;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=Wu(o,o[1],this.providerFactory.index,u);d=y.slice(0,g),QE(l,d);for(let E=g;E<y.length;E++)d.push(y[E])}else d=[],QE(l,d);return d}function QE(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function HI(i,s=[]){return o=>{o.providersResolver=(u,l)=>function(i,s,o){const u=vt();if(u.firstCreatePass){const l=Jr(i);Be(o,u.data,u.blueprint,l,!0),Be(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class qI{}const If="ngComponent";class Ja{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${Y(i)}. Did you add it to @NgModule.entryComponents?`);return s[If]=i,s}(s)}}let nd=(()=>{class i{}return i.NULL=new Ja,i})();function Df(...i){}function Dc(i,s){return new yn(hi(i,s))}const GI=function(){return Dc(_n(),le())};let yn=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=GI,i})();function Bm(i){return i instanceof yn?i.nativeElement:i}class Tf{}let ZI=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>WI(),i})();const WI=function(){const i=le(),o=ei(_n().index,i);return function(i){return i[11]}(ys(o)?o:i)};let rw=(()=>{class i{}return i.\u0275prov=on({token:i,providedIn:"root",factory:()=>null}),i})();class KI{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Tc=new KI("12.2.15");class iw{constructor(){}supports(s){return uf(s)}create(s){return new ax(s)}}const sw=(i,s)=>s;class ax{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||sw}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<Hm(u,l,d)?o:u,y=Hm(g,l,d),E=g.currentIndex;if(g===u)l--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)l++;else{d||(d=[]);const C=y-l,D=E-l;if(C!=D){for(let M=0;M<C;M++){const P=M<d.length?d[M]:d[M]=0,q=P+M;D<=q&&q<C&&(d[M]=P+1)}d[g.previousIndex]=D-C}}y!==E&&s(g,y,E)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!uf(s))throw new Error(`Error trying to diff '${Y(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,g,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)d=s[y],g=this._trackByFn(y,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,y)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,y),u=!0),o=o._next}else l=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[qa()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,y=>{g=this._trackByFn(l,y),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,y,g,l)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,g,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new YI(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new $m),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $m),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class YI{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class $m{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new jm,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hm(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class qm{constructor(){}supports(s){return s instanceof Map||cf(s)}create(){return new ux}}class ux{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||cf(s)))throw new Error(`Error trying to diff '${Y(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,g=l._next;return d&&(d._next=g),g&&(g._prev=d),l._next=null,l._prev=null,l}const u=new cx(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class cx{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gm(){return new Af([new iw])}let Af=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Gm()),deps:[[i,new xs,new ss]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=on({token:i,providedIn:"root",factory:Gm}),i})();function QI(){return new lr([new qm])}let lr=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||QI()),deps:[[i,new xs,new ss]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=on({token:i,providedIn:"root",factory:QI}),i})();function Xa(i,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(zt(d)),Xt(d))for(let y=10;y<d.length;y++){const E=d[y],C=E[1].firstChild;null!==C&&Xa(E[1],E,C,u)}const g=o.type;if(8&g)Xa(i,s,o.child,u);else if(32&g){const y=nv(o,s);let E;for(;E=y();)u.push(E)}else if(16&g){const y=Og(s,o);if(Array.isArray(y))u.push(...y);else{const E=Wh(s[16]);Xa(E[1],E,y,u,!0)}}o=l?o.projectionNext:o.next}return u}class Sf{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Xa(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Xt(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(lv(s,u),$o(o,u))}this._attachedToViewContainer=!1}Sg(this._lView[1],this._lView)}onDestroy(s){gc(this._lView[1],this._lView,null,s)}markForCheck(){Kg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Yg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){ws(!0);try{Yg(i,s,o)}finally{ws(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,xl(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Rf extends Sf{constructor(s){super(s),this._view=s}detectChanges(){aC(this._view)}checkNoChanges(){!function(i){ws(!0);try{aC(i)}finally{ws(!1)}}(this._view)}get context(){return null}}const Zm=function(i){return function(i,s,o){if(fa(i)&&!o){const u=ei(i.index,s);return new Sf(u,u)}return 47&i.type?new Sf(s[16],s):null}(_n(),le(),16==(16&i))};let Wm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Zm,i})();const uw=[new qm],JI=new Af([new iw]),XI=new lr(uw),eD=function(){return rd(_n(),le())};let Ac=(()=>{class i{}return i.__NG_ELEMENT_ID__=eD,i})();const tD=Ac,px=class extends tD{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=Nl(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),kl(o,u,s),new Sf(u)}};function rd(i,s){return 4&i.type?new px(s,i,Dc(i,s)):null}class ea{}class dr{}const hw=function(){return Km(_n(),le())};let zm=(()=>{class i{}return i.__NG_ELEMENT_ID__=hw,i})();const nD=zm,rD=class extends nD{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Dc(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Vo(this._hostTNode,this._hostLView);if(Xp(s)){const o=Lo(s,this._hostLView),u=Zu(s);return new pi(o[1].data[u+8],o)}return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=iD(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const l=s.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(s,o,u,l,d){const g=u||this.parentInjector;if(!d&&null==s.ngModule&&g){const E=g.get(ea,null);E&&(d=E)}const y=s.create(g,l,void 0,d);return this.insert(y.hostView,o),y}insert(s,o){const u=s._lView,l=u[1];if(Xt(u[3])){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const R=u[3],M=new rD(R,R[6],R[3]);M.detach(M.indexOf(s))}}const d=this._adjustIndex(o),g=this._lContainer;!function(i,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],fl(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const g=s[17];null!==g&&o!==g&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(g,s);const y=s[19];null!==y&&y.insertView(i),s[2]|=128}(l,u,g,d);const y=hv(d,g),E=u[11],C=xg(E,g[7]);return null!==C&&function(i,s,o,u,l,d){u[0]=l,u[6]=s,xl(i,u,o,1,l,d)}(l,g[6],E,u,C,y),s.attachToViewContainerRef(),fl(xf(g),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=iD(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=lv(this._lContainer,o);u&&($o(xf(this._lContainer),o),Sg(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=lv(this._lContainer,o);return u&&null!=$o(xf(this._lContainer),o)?new Sf(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function iD(i){return i[8]}function xf(i){return i[8]||(i[8]=[])}function Km(i,s){let o;const u=s[i.index];if(Xt(u))o=u;else{let l;if(8&i.type)l=zt(u);else{const d=s[11];l=d.createComment("");const g=hi(i,s);lc(d,xg(d,g),l,function(i,s){return mn(i)?i.nextSibling(s):s.nextSibling}(d,g),!1)}s[i.index]=o=oC(u,s,l,i),Pl(s,o)}return new rD(o,i,s)}const Pc={};class u_ extends nd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Nn(s);return new xw(o,this.ngModule)}}function hd(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const Rw=new fn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>S0});class xw extends qI{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(gk).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return hd(this.componentDef.inputs)}get outputs(){return hd(this.componentDef.outputs)}create(s,o,u,l){const d=(l=l||this.ngModule)?function(i,s){return{get:(o,u,l)=>{const d=i.get(o,Pc,l);return d!==Pc||u===Pc?d:s.get(o,u,l)}}}(s,l.injector):s,g=d.get(Tf,Gp),y=d.get(rw,null),E=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",D=u?function(i,s,o){if(mn(i))return i.selectRootElement(s,o===Wt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(E,u,this.componentDef.encapsulation):uv(g.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),R=this.componentDef.onPush?576:528,M=function(i,s){return{components:[],scheduler:i||S0,clean:Bv,playerHandler:s||null,flags:0}}(),P=Hg(0,null,null,1,0,null,null,null,null,null),q=Nl(null,P,M,R,null,null,g,E,y,d);let ee,K;Bu(q);try{const ye=function(i,s,o,u,l,d){const g=o[1];o[20]=i;const E=Ua(g,20,2,"#host",null),C=E.mergedAttrs=s.hostAttrs;null!==C&&(Xg(E,C,!0),null!==i&&(Hu(l,i,C),null!==E.classes&&mv(l,i,E.classes),null!==E.styles&&gv(l,i,E.styles)));const D=u.createRenderer(i,s),R=Nl(o,Rv(s),null,s.onPush?64:16,o[20],E,u,D,d||null,null);return g.firstCreatePass&&(jr(dl(E,o),g,s.type),zg(g,E),rC(E,o.length,1)),Pl(o,R),o[20]=R}(D,this.componentDef,q,g,E);if(D)if(u)Hu(E,D,["ng-version",Tc.full]);else{const{attrs:ie,classes:qe}=function(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===l?""!==d&&s.push(d,i[++u]):8===l&&o.push(d);else{if(!Fs(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);ie&&Hu(E,D,ie),qe&&qe.length>0&&mv(E,D,qe.join(" "))}if(K=ir(P,20),void 0!==o){const ie=K.projection=[];for(let qe=0;qe<this.ngContentSelectors.length;qe++){const at=o[qe];ie.push(null!=at?Array.from(at):null)}}ee=function(i,s,o,u,l){const d=o[1],g=function(i,s,o){const u=_n();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),iC(i,u,s,pc(i,s,1,null),o));const l=Wu(s,i,u.directiveStart,u);Wn(l,s);const d=hi(u,s);return d&&Wn(d,s),l}(d,o,s);if(u.components.push(g),i[8]=g,l&&l.forEach(E=>E(g,s)),s.contentQueries){const E=_n();s.contentQueries(1,g,E.directiveStart)}const y=_n();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(to(y.index),Gg(o[1],y,0,y.directiveStart,y.directiveEnd,s),Wg(s,g)),g}(ye,this.componentDef,q,M,[Wv]),kl(P,q,null)}finally{_h()}return new Rx(this.componentType,ee,Dc(K,q),q,K)}}class Rx extends class{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new Rf(l),this.componentType=s}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const Co=new Map;class l_ extends ea{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new u_(this);const u=Vr(s),l=s[yt]||null;l&&BE(l),this._bootstrapComponents=mo(u.bootstrap),this._r3Injector=em(s,o,[{provide:ea,useValue:this},{provide:nd,useValue:this.componentFactoryResolver}],Y(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=Dn.THROW_IF_NOT_FOUND,u=fe.Default){return s===Dn||s===ea||s===rf?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class d_ extends dr{constructor(s){super(),this.moduleType=s,null!==Vr(s)&&function(i){const s=new Set;!function o(u){const l=Vr(u,!0),d=l.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${Y(s)} vs ${Y(s.name)}`)}(d,Co.get(d),u),Co.set(d,u));const g=mo(l.imports);for(const y of g)s.has(y)||(s.add(y),o(y))}(i)}(s)}create(s){return new l_(this.moduleType,s)}}function Fw(i,s,o){const u=Br()+i,l=le();return l[u]===ke?Us(l,u,o?s.call(o):s()):function(i,s){return i[s]}(l,u)}function ru(i,s,o,u){return function(i,s,o,u,l,d){const g=s+o;return wr(i,g,l)?Us(i,g+1,d?u.call(d,l):u(l)):function(i,s){const o=i[s];return o===ke?void 0:o}(i,g+1)}(le(),Br(),i,s,o,u)}function De(i){return s=>{setTimeout(i,void 0,s)}}const Qt=class extends f.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var l,d,g;let y=s,E=o||(()=>null),C=u;if(s&&"object"==typeof s){const R=s;y=null===(l=R.next)||void 0===l?void 0:l.bind(R),E=null===(d=R.error)||void 0===d?void 0:d.bind(R),C=null===(g=R.complete)||void 0===g?void 0:g.bind(R)}this.__isAsync&&(E=De(E),y&&(y=De(y)),C&&(C=De(C)));const D=super.subscribe({next:y,error:E,complete:C});return s instanceof H.w&&s.add(D),D}};function Hf(){return this._results[qa()]()}class pd{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=qa(),u=pd.prototype;u[o]||(u[o]=Hf)}get changes(){return this._changes||(this._changes=new Qt)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=$r(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class xe{constructor(s){this.queryList=s,this.matches=null}clone(){return new xe(this.queryList)}setDirty(){this.queryList.setDirty()}}class ne{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);l.push(this.queries[g.indexInDeclarationView].clone())}return new ne(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==fr(s,o).matches&&this.queries[o].setDirty()}}class me{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class Kn{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new Kn(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class g_{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new g_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,Ox(o,d)),this.matchTNodeWithReadOption(s,o,Uo(o,s,d,!1,!1))}else u===Ac?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Uo(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===yn||l===zm||l===Ac&&4&o.type)this.addMatch(o.index,-2);else{const d=Uo(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function Ox(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function Fx(i,s,o,u){return-1===o?function(i,s){return 11&i.type?Dc(i,s):4&i.type?rd(i,s):null}(s,i):-2===o?function(i,s,o){return o===yn?Dc(s,i):o===Ac?rd(s,i):o===zm?Km(s,i):void 0}(i,s,u):Wu(i,i[1],o,s)}function ZD(i,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=i.data,g=o.matches,y=[];for(let E=0;E<g.length;E+=2){const C=g[E];y.push(C<0?null:Fx(s,d[C],g[E+1],o.metadata.read))}l.matches=y}return l.matches}function m_(i,s,o,u){const l=i.queries.getByIndex(o),d=l.matches;if(null!==d){const g=ZD(i,s,l,o);for(let y=0;y<d.length;y+=2){const E=d[y];if(E>0)u.push(g[y/2]);else{const C=d[y+1],D=s[-E];for(let R=10;R<D.length;R++){const M=D[R];M[17]===M[3]&&m_(M[1],M,C,u)}if(null!==D[9]){const R=D[9];for(let M=0;M<R.length;M++){const P=R[M];m_(P[1],P,C,u)}}}}}return u}function WD(i){const s=le(),o=vt(),u=ul();Yp(u+1);const l=fr(o,u);if(i.dirty&&il(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const d=l.crossesNgTemplate?m_(o,s,u,[]):ZD(o,s,l,u);i.reset(d,Bm),i.notifyOnChanges()}return!0}return!1}function wi(i,s,o,u){const l=vt();if(l.firstCreatePass){const d=_n();(function(i,s,o){null===i.queries&&(i.queries=new Kn),i.queries.track(new g_(s,o))})(l,new me(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(l,i),2==(2&o)&&(l.staticContentQueries=!0)}!function(i,s,o){const u=new pd(4==(4&o));gc(i,s,u,u.destroy),null===s[19]&&(s[19]=new ne),s[19].queries.push(new xe(u))}(l,le(),o)}function zD(){return i=le(),s=ul(),i[19].queries[s].queryList;var i,s}function fr(i,s){return i.queries.getByIndex(s)}const Ed=new fn("Application Initializer");let wd=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Df,this.reject=Df,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(lm(d))o.push(d);else if(Wl(d)){const g=new Promise((y,E)=>{d.subscribe({complete:y,error:E})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(He(Ed,8))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();const uT=new fn("AppId"),bd={provide:uT,useFactory:function(){return`${ua()}${ua()}${ua()}`},deps:[]};function ua(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zw=new fn("Platform Initializer"),cu=new fn("Platform ID"),Kw=new fn("appBootstrapListener");let Yw=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();const Xf=new fn("LocaleId"),Cd=new fn("DefaultCurrencyCode");class Jw{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const S_=function(i){return new d_(i)},ep=S_,lT=function(i){return Promise.resolve(S_(i))},Id=function(i){const s=S_(i),u=mo(Vr(i).declarations).reduce((l,d)=>{const g=Nn(d);return g&&l.push(new xw(g)),l},[]);return new Jw(s,u)},Xw=Id,Pt=function(i){return Promise.resolve(Id(i))};let Dd=(()=>{class i{constructor(){this.compileModuleSync=ep,this.compileModuleAsync=lT,this.compileModuleAndAllComponentsSync=Xw,this.compileModuleAndAllComponentsAsync=Pt}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();const R_=(()=>Promise.resolve(0))();function yr(i){"undefined"==typeof Zone?R_.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class bi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qt(!1),this.onMicrotaskEmpty=new Qt(!1),this.onStable=new Qt(!1),this.onError=new Qt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=L.requestAnimationFrame,s=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(L,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,tb(i),i.isCheckStableRunning=!0,Ci(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),tb(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,g,y)=>{try{return nb(i),o.invokeTask(l,d,g,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),hT(i)}},onInvoke:(o,u,l,d,g,y,E)=>{try{return nb(i),o.invoke(l,d,g,y,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),hT(i)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,tb(i),Ci(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+l,s,Yx,Df,Df);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Yx={};function Ci(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function tb(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function nb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function hT(i){i._nesting--,Ci(i)}class Jt{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qt,this.onMicrotaskEmpty=new Qt,this.onStable=new Qt,this.onError=new Qt}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}let fT=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bi.assertNotInAngularZone(),yr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yr(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(He(bi))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})(),tp=(()=>{class i{constructor(){this._applications=new Map,Td.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Td.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();class np{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function rp(i){Td=i}let Td=new np,rb=!0,ib=!1;function x_(){return ib=!0,rb}function Jx(){if(ib)throw new Error("Cannot enable prod mode after platform setup.");rb=!1}let hs;const ob=new fn("AllowMultipleToken");class sp{constructor(s,o){this.name=s,this.token=o}}function M_(i,s,o=[]){const u=`Platform: ${s}`,l=new fn(u);return(d=[])=>{let g=ab();if(!g||g.injector.get(ob,!1))if(i)i(o.concat(d).concat({provide:l,useValue:!0}));else{const y=o.concat(d).concat({provide:l,useValue:!0},{provide:yc,useValue:"platform"});!function(i){if(hs&&!hs.destroyed&&!hs.injector.get(ob,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");hs=i.get(ub);const s=i.get(zw,null);s&&s.forEach(o=>o())}(Dn.create({providers:y,name:u}))}return function(i){const s=ab();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function ab(){return hs&&!hs.destroyed?hs:null}let ub=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const y=function(i,s){let o;return o="noop"===i?new Jt:("zone.js"===i?void 0:i)||new bi({enableLongStackTrace:x_(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),E=[{provide:bi,useValue:y}];return y.run(()=>{const C=Dn.create({providers:E,parent:this.injector,name:o.moduleType.name}),D=o.create(C),R=D.injector.get(uc,null);if(!R)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const M=y.onError.subscribe({next:P=>{R.handleError(P)}});D.onDestroy(()=>{k_(this._modules,D),M.unsubscribe()})}),function(i,s,o){try{const u=o();return lm(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(R,y,()=>{const M=D.injector.get(wd);return M.runInitializers(),M.donePromise.then(()=>(BE(D.injector.get(Xf,Ql)||Ql),this._moduleDoBootstrap(D),D))})})}bootstrapModule(o,u=[]){const l=yT({},u);return function(i,s,o){const u=new d_(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(lu);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${Y(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(He(Dn))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();function yT(i,s){return Array.isArray(s)?s.reduce(yT,i):Object.assign(Object.assign({},i),s)}let lu=(()=>{class i{constructor(o,u,l,d,g){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new O.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{bi.assertNotInAngularZone(),yr(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{bi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),R.unsubscribe()}});this.isStable=(0,pe.T)(y,E.pipe(i=>(0,Ae.x)()(function(i,s){return function(u){let l;l="function"==typeof i?i:function(){return i};const d=Object.create(u,Oe.N);return d.source=u,d.subjectFactory=l,d}}(se)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof qI?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(ea),y=l.create(Dn.NULL,[],u||l.selector,d),E=y.location.nativeElement,C=y.injector.get(fT,null),D=C&&y.injector.get(tp);return C&&D&&D.registerApplication(E,C),y.onDestroy(()=>{this.detachView(y.hostView),k_(this.components,y),D&&D.unregisterApplication(E)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;k_(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(Kw,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(He(bi),He(Dn),He(uc),He(nd),He(wd))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();function k_(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class wT{}class sM{}const Ad={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Sd=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||Ad}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),V(255)(u).then(d=>d[l]).then(d=>bT(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),V(255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[l+d]).then(g=>bT(g,u,l))}}return i.\u0275fac=function(o){return new(o||i)(He(Dd),He(sM,8))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();function bT(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const AT=function(i){return null},aM=M_(null,"core",[{provide:cu,useValue:"unknown"},{provide:ub,deps:[Dn]},{provide:tp,deps:[]},{provide:Yw,deps:[]}]),hb=[{provide:lu,useClass:lu,deps:[bi,Dn,uc,nd,wd]},{provide:Rw,deps:[bi],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:wd,useClass:wd,deps:[[new ss,Ed]]},{provide:Dd,useClass:Dd,deps:[]},bd,{provide:Af,useFactory:function(){return JI},deps:[]},{provide:lr,useFactory:function(){return XI},deps:[]},{provide:Xf,useFactory:function(i){return BE(i=i||"undefined"!=typeof $localize&&$localize.locale||Ql),i},deps:[[new Rs(Xf),new ss,new xs]]},{provide:Cd,useValue:"USD"}];let du=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(He(lu))},i.\u0275mod=In({type:i}),i.\u0275inj=Lr({providers:hb}),i})()},939:(tt,be,V)=>{"use strict";V.d(be,{xv:()=>Ae,Dh:()=>ve,GT:()=>Oe,cc:()=>Y,on:()=>se,pX:()=>pe});var f=V(18),H=V(841);tt=V.hmd(tt);const O=["ngOnDestroy"],pe=(G,ce,he,Se={})=>new Proxy(G,{get:($e,_t)=>he.runOutsideAngular(()=>{var Fe;if(G[_t])return(null===(Fe=null==Se?void 0:Se.spy)||void 0===Fe?void 0:Fe.get)&&Se.spy.get(_t,G[_t]),G[_t];if(O.indexOf(_t)>-1)return()=>{};const Ct=ce.toPromise().then(bt=>{const Zt=bt&&bt[_t];return"function"==typeof Zt?Zt.bind(bt):Zt&&Zt.then?Zt.then(It=>he.run(()=>It)):he.run(()=>Zt)});return new Proxy(()=>{},{get:(bt,Zt)=>Ct[Zt],apply:(bt,Zt,It)=>Ct.then(Et=>{var nt;const Je=Et&&Et(...It);return(null===(nt=null==Se?void 0:Se.spy)||void 0===nt?void 0:nt.apply)&&Se.spy.apply(_t,It,Je),Je})})})}),Oe=(G,ce)=>{ce.forEach(he=>{Object.getOwnPropertyNames(he.prototype||he).forEach(Se=>{Object.defineProperty(G.prototype,Se,Object.getOwnPropertyDescriptor(he.prototype||he,Se))})})};class de{constructor(ce){return ce}}const ve=new f.OlP("angularfire2.app.options"),Ae=new f.OlP("angularfire2.app.name");function se(G,ce,he){const $e="object"==typeof he&&he||{};$e.name=$e.name||"string"==typeof he&&he||"[DEFAULT]";const Fe=H.Z.apps.filter(Ct=>Ct&&Ct.name===$e.name)[0]||ce.runOutsideAngular(()=>H.Z.initializeApp(G,$e));try{JSON.stringify(G)!==JSON.stringify(Fe.options)&&N("error",`${Fe.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ct){}return new de(Fe)}const N=(G,...ce)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[G](...ce)};function Y(G,ce,he,Se,$e){const[,_t,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Ct=>Ct[0]===G)||[];if(_t)return function(G,ce){try{return G.toString()===ce.toString()}catch(he){return G===ce}}($e,Fe)||(ue("error",`${ce} was already initialized on the ${he} Firebase App with different settings.${Ie?" You may need to reload as Firebase is not HMR aware.":""}`),ue("warn",{is:$e,was:Fe})),_t;{const Ct=Se();return globalThis.\u0275AngularfireInstanceCache.push([G,Ct,$e]),Ct}}const Ie=!!tt.hot,ue=(G,...ce)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[G](...ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},538:(tt,be,V)=>{"use strict";V.d(be,{$:()=>Br,A:()=>Tu,E:()=>Nu,G:()=>Xt,I:()=>vs,K:()=>ms,L:()=>No,M:()=>mn,N:()=>gy,P:()=>dg,Q:()=>Gp,R:()=>fl,T:()=>ko,U:()=>sh,V:()=>rl,W:()=>ei,X:()=>le,Y:()=>al,Z:()=>ah,_:()=>Ea,a:()=>Vo,a0:()=>lh,a1:()=>bs,a2:()=>hh,a3:()=>Kp,a4:()=>fh,a5:()=>Yp,a6:()=>yy,a7:()=>Bu,a8:()=>Qp,a9:()=>_h,aA:()=>Xu,aB:()=>hg,aC:()=>qn,aG:()=>Ln,aJ:()=>zt,aa:()=>h0,ab:()=>to,ae:()=>Eh,af:()=>vy,ag:()=>Ey,aj:()=>Wp,ak:()=>by,am:()=>Iy,an:()=>Dh,ao:()=>xu,ap:()=>tr,aq:()=>Fn,ar:()=>Ks,as:()=>bn,at:()=>ic,au:()=>Ma,av:()=>dn,aw:()=>_e,ax:()=>xn,ay:()=>an,az:()=>ho,b:()=>ze,c:()=>y0,d:()=>Py,e:()=>Oh,f:()=>qo,g:()=>ss,h:()=>fg,i:()=>xy,j:()=>ar,k:()=>$h,l:()=>ug,m:()=>yg,o:()=>Xn,r:()=>Ta,s:()=>ag,u:()=>Aa,z:()=>Au});var f=V(239),H=V(854),O=V(26);function ve(v,p){var m={};for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&p.indexOf(b)<0&&(m[b]=v[b]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(b=Object.getOwnPropertySymbols(v);T<b.length;T++)p.indexOf(b[T])<0&&Object.prototype.propertyIsEnumerable.call(v,b[T])&&(m[b[T]]=v[b[T]])}return m}var Je=V(422),Rt=V(910);const Xn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Tu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Au=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Su=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ri=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),St=new Je.Yd("@firebase/auth");function wn(v,...p){St.logLevel<=Je.in.ERROR&&St.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function bn(v,...p){throw Lr(v,...p)}function dn(v,...p){return Lr(v,...p)}function on(v,p,m){const b=Object.assign(Object.assign({},Su()),{[p]:m});return new H.LL("auth","Firebase",b).create(p,{appName:v.name})}function Xi(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&bn(v,"argument-error"),on(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lr(v,...p){if("string"!=typeof v){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(m,...b)}return Ri.create(v,...p)}function _e(v,p,...m){if(!v)throw Lr(p,...m)}function Pn(v){const p="INTERNAL ASSERTION FAILED: "+v;throw wn(p),new Error(p)}function tr(v,p){v||Pn(p)}const es=new Map;function xn(v){tr(v instanceof Function,"Expected a class definition");let p=es.get(v);return p?(tr(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,es.set(v,p),p)}function li(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function rt(){return"http:"===fe()||"https:"===fe()}function fe(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class qt{constructor(p,m){this.shortDelay=p,this.longDelay=m,tr(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rt()||(0,H.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function kt(v,p){tr(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Ue{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new qt(3e4,6e4);function rn(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Bt(v,p,m,b){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(v,p,m,b,T={}){return jt(v,T,(0,f.Z)(function*(){let S={},W={};b&&("GET"===p?W=b:S={body:JSON.stringify(b)});const re=(0,H.xO)(Object.assign({key:v.config.apiKey},W)).slice(1),Ne=yield v._getAdditionalHeaders();return Ne["Content-Type"]="application/json",v.languageCode&&(Ne["X-Firebase-Locale"]=v.languageCode),Ue.fetch()(L(v,v.config.apiHost,m,re),Object.assign({method:p,headers:Ne,referrerPolicy:"no-referrer"},S))}))})).apply(this,arguments)}function jt(v,p,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(v,p,m){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},je),p);try{const T=new ae(v),S=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const W=yield S.json();if("needConfirmation"in W)throw J(v,"account-exists-with-different-credential",W);if(S.ok&&!("errorMessage"in W))return W;{const re=S.ok?W.errorMessage:W.error.message,[Ne,Ce]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw J(v,"credential-already-in-use",W);if("EMAIL_EXISTS"===Ne)throw J(v,"email-already-in-use",W);const Ke=b[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw on(v,Ke,Ce);bn(v,Ke)}}catch(T){if(T instanceof H.ZR)throw T;bn(v,"network-request-failed")}})).apply(this,arguments)}function U(v,p,m,b){return $.apply(this,arguments)}function $(){return($=(0,f.Z)(function*(v,p,m,b,T={}){const S=yield Bt(v,p,m,b,T);return"mfaPendingCredential"in S&&bn(v,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function L(v,p,m,b){const T=`${p}${m}?${b}`;return v.config.emulator?kt(v.config,T):`${v.config.apiScheme}://${T}`}class ae{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(dn(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function J(v,p,m){const b={appName:v.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const T=dn(v,p,b);return T.customData._tokenResponse=m,T}function Pe(){return(Pe=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Lt(v,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Cn(v,p){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function yt(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function B(){return(B=(0,f.Z)(function*(v,p=!1){const m=(0,H.m9)(v),b=yield m.getIdToken(p),T=Me(b);_e(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const S="object"==typeof T.firebase?T.firebase:void 0,W=null==S?void 0:S.sign_in_provider;return{claims:T,token:b,authTime:yt(oe(T.auth_time)),issuedAtTime:yt(oe(T.iat)),expirationTime:yt(oe(T.exp)),signInProvider:W||null,signInSecondFactor:(null==S?void 0:S.sign_in_second_factor)||null}})).apply(this,arguments)}function oe(v){return 1e3*Number(v)}function Me(v){const[p,m,b]=v.split(".");if(void 0===p||void 0===m||void 0===b)return wn("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,H.tV)(m);return T?JSON.parse(T):(wn("Failed to decode base64 JWT payload"),null)}catch(T){return wn("Caught error parsing JWT payload as JSON",T),null}}function ft(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof H.ZR&&In(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function In({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class rr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class Hn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=yt(this.lastLoginAt),this.creationTime=yt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wt(v){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(v){var p;const m=v.auth,b=yield v.getIdToken(),T=yield ft(v,Cn(m,{idToken:b}));_e(null==T?void 0:T.users.length,m,"internal-error");const S=T.users[0];v._notifyReloadListener(S);const W=(null===(p=S.providerUserInfo)||void 0===p?void 0:p.length)?Vr(S.providerUserInfo):[],re=Ro(v.providerData,W),Ke=!!v.isAnonymous&&!(v.email&&S.passwordHash||(null==re?void 0:re.length)),Ot={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:re,metadata:new Hn(S.createdAt,S.lastLoginAt),isAnonymous:Ke};Object.assign(v,Ot)})).apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(v){const p=(0,H.m9)(v);yield wt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ro(v,p){return[...v.filter(b=>!p.some(T=>T.providerId===b.providerId)),...p]}function Vr(v){return v.map(p=>{var{providerId:m}=p,b=ve(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ur(){return(Ur=(0,f.Z)(function*(v,p){const m=yield jt(v,{},(0,f.Z)(function*(){const b=(0,H.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:S}=v.config,W=L(v,T,"/v1/token",`key=${S}`),re=yield v._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Ue.fetch()(W,{method:"POST",headers:re,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Re{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){_e(p.idToken,"internal-error"),_e(void 0!==p.idToken,"internal-error"),_e(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(v){const p=Me(v);return _e(p,"internal-error"),_e(void 0!==p.exp,"internal-error"),_e(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,f.Z)(function*(){return _e(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:S,expiresIn:W}=yield function(v,p){return Ur.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(T,S,Number(W))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:T,expirationTime:S}=m,W=new Re;return b&&(_e("string"==typeof b,"internal-error",{appName:p}),W.refreshToken=b),T&&(_e("string"==typeof T,"internal-error",{appName:p}),W.accessToken=T),S&&(_e("number"==typeof S,"internal-error",{appName:p}),W.expirationTime=S),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Re,this.toJSON())}_performRefresh(){return Pn("not implemented")}}function st(v,p){_e("string"==typeof v||void 0===v,"internal-error",{appName:p})}class Vt{constructor(p){var{uid:m,auth:b,stsTokenManager:T}=p,S=ve(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.metadata=new Hn(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,f.Z)(function*(){const b=yield ft(m,m.stsTokenManager.getToken(m.auth,p));return _e(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function(v){return B.apply(this,arguments)}(this,p)}reload(){return function(v){return xi.apply(this,arguments)}(this)}_assign(p){this!==p&&(_e(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Vt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,f.Z)(function*(){let T=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield wt(b)),yield b.auth._persistUserIfCurrent(b),T&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,f.Z)(function*(){const m=yield p.getIdToken();return yield ft(p,function(v,p){return Pe.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,T,S,W,re,Ne,Ce,Ke;const Ot=null!==(b=m.displayName)&&void 0!==b?b:void 0,Yt=null!==(T=m.email)&&void 0!==T?T:void 0,ur=null!==(S=m.phoneNumber)&&void 0!==S?S:void 0,Os=null!==(W=m.photoURL)&&void 0!==W?W:void 0,Ko=null!==(re=m.tenantId)&&void 0!==re?re:void 0,Dl=null!==(Ne=m._redirectEventId)&&void 0!==Ne?Ne:void 0,sc=null!==(Ce=m.createdAt)&&void 0!==Ce?Ce:void 0,oc=null!==(Ke=m.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:cn,emailVerified:Tl,isAnonymous:vg,providerData:Fa,stsTokenManager:Al}=m;_e(cn&&Al,p,"internal-error");const Zy=Re.fromJSON(this.name,Al);_e("string"==typeof cn,p,"internal-error"),st(Ot,p.name),st(Yt,p.name),_e("boolean"==typeof Tl,p,"internal-error"),_e("boolean"==typeof vg,p,"internal-error"),st(ur,p.name),st(Os,p.name),st(Ko,p.name),st(Dl,p.name),st(sc,p.name),st(oc,p.name);const Gh=new Vt({uid:cn,auth:p,email:Yt,emailVerified:Tl,displayName:Ot,isAnonymous:vg,photoURL:Os,phoneNumber:ur,tenantId:Ko,stsTokenManager:Zy,createdAt:sc,lastLoginAt:oc});return Fa&&Array.isArray(Fa)&&(Gh.providerData=Fa.map(Eg=>Object.assign({},Eg))),Dl&&(Gh._redirectEventId=Dl),Gh}static _fromIdTokenResponse(p,m,b=!1){return(0,f.Z)(function*(){const T=new Re;T.updateFromServerResponse(m);const S=new Vt({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:b});return yield wt(S),S})()}}const ms=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,b){var T=this;return(0,f.Z)(function*(){T.storage[m]=b})()}_get(m){var b=this;return(0,f.Z)(function*(){const T=b.storage[m];return void 0===T?null:T})()}_remove(m){var b=this;return(0,f.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return v.type="NONE",v})();function an(v,p,m){return`firebase:${v}:${p}:${m}`}class Ar{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:T,name:S}=this.auth;this.fullUserKey=an(this.userKey,T.apiKey,S),this.fullPersistenceKey=an("persistence",T.apiKey,S),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Vt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,f.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,f.Z)(function*(){if(!m.length)return new Ar(xn(ms),p,b);const T=(yield Promise.all(m.map(function(){var Ce=(0,f.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let S=T[0]||xn(ms);const W=an(b,p.config.apiKey,p.name);let re=null;for(const Ce of m)try{const Ke=yield Ce._get(W);if(Ke){const Ot=Vt._fromJSON(p,Ke);Ce!==S&&(re=Ot),S=Ce;break}}catch(Ke){}const Ne=T.filter(Ce=>Ce._shouldAllowMigration);return S._shouldAllowMigration&&Ne.length?(S=Ne[0],re&&(yield S._set(W,re.toJSON())),yield Promise.all(m.map(function(){var Ce=(0,f.Z)(function*(Ke){if(Ke!==S)try{yield Ke._remove(W)}catch(Ot){}});return function(Ke){return Ce.apply(this,arguments)}}())),new Ar(S,p,b)):new Ar(S,p,b)})()}}function hn(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ru(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(da(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Qc(p))return"Blackberry";if(_s(p))return"Webos";if(xo(p))return"Safari";if((p.includes("chrome/")||pt(p))&&!p.includes("edge/"))return"Chrome";if(Ks(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function da(v=(0,H.z$)()){return/firefox\//i.test(v)}function xo(v=(0,H.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function pt(v=(0,H.z$)()){return/crios\//i.test(v)}function Ru(v=(0,H.z$)()){return/iemobile/i.test(v)}function Ks(v=(0,H.z$)()){return/android/i.test(v)}function Qc(v=(0,H.z$)()){return/blackberry/i.test(v)}function _s(v=(0,H.z$)()){return/webos/i.test(v)}function Fn(v=(0,H.z$)()){return/iphone|ipad|ipod/i.test(v)}function xu(v=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Gt(v=(0,H.z$)()){return Fn(v)||Ks(v)||_s(v)||Qc(v)||/windows phone/i.test(v)||Ru(v)}function Jc(v,p=[]){let m;switch(v){case"Browser":m=hn((0,H.z$)());break;case"Worker":m=`${hn((0,H.z$)())}-${v}`;break;default:m=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${b}`}class Xc{constructor(p,m){this.app=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mu(this),this.idTokenSubscription=new Mu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ri,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=xn(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,S;if(!b._deleted&&(b.persistenceManager=yield Ar.create(b,p),!b._deleted)){if(null===(T=b._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(W){}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(S=b.currentUser)||void 0===S?void 0:S.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,f.Z)(function*(){var b;let T=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const S=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,W=null==T?void 0:T._redirectEventId,re=yield m.tryRedirectSignIn(p);(!S||S===W)&&(null==re?void 0:re.user)&&(T=re.user)}return T?T._redirectEventId?(_e(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===T._redirectEventId?m.directlySetCurrentUser(T):m.reloadAndSetCurrentUserOrClear(T)):m.reloadAndSetCurrentUserOrClear(T):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,f.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(T){yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,f.Z)(function*(){try{yield wt(p)}catch(b){if("auth/network-request-failed"!==b.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){const b=p?(0,H.m9)(p):null;return b&&_e(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,f.Z)(function*(){if(!m._deleted)return p&&_e(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,f.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(xn(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new H.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,f.Z)(function*(){const T=yield b.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&xn(p)||m._popupRedirectResolver;_e(b,m,"argument-error"),m.redirectPersistenceManager=yield Ar.create(m,[xn(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,f.Z)(function*(){var b,T;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,f.Z)(function*(){if(p===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,T){if(this._deleted)return()=>{};const S="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return _e(W,this,"internal-error"),W.then(()=>S(this.currentUser)),"function"==typeof m?p.addObserver(m,b,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Jc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){const m={"X-Client-Version":p.clientVersion};return p.app.options.appId&&(m["X-Firebase-gmpid"]=p.app.options.appId),m})()}}function qn(v){return(0,H.m9)(v)}class Mu{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,H.ne)(m=>this.observer=m)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nu(v,p,m){const b=qn(v);_e(b._canInitEmulator,b,"emulator-config-failed"),_e(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),S=Ys(p),{host:W,port:re}=function(v){const p=Ys(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(b);if(T){const S=T[1];return{host:S,port:kp(b.substr(S.length+1))}}{const[S,W]=b.split(":");return{host:S,port:kp(W)}}}(p);b.config.emulator={url:`${S}//${W}${null===re?"":`:${re}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:W,port:re,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ys(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function kp(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Xt{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Pn("not implemented")}_getIdTokenResponse(p){return Pn("not implemented")}_linkToIdToken(p,m){return Pn("not implemented")}_getReauthenticationResolver(p){return Pn("not implemented")}}function el(v,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:resetPassword",rn(v,p))})).apply(this,arguments)}function ku(v,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function uy(v,p){return Op.apply(this,arguments)}function Op(){return(Op=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:update",rn(v,p))})).apply(this,arguments)}function th(){return(th=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithPassword",rn(v,p))})).apply(this,arguments)}function nh(v,p){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:sendOobCode",rn(v,p))})).apply(this,arguments)}function a0(v,p){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,f.Z)(function*(v,p){return nh(v,p)})).apply(this,arguments)}function u0(v,p){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,f.Z)(function*(v,p){return nh(v,p)})).apply(this,arguments)}function c0(v,p){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,f.Z)(function*(v,p){return nh(v,p)})).apply(this,arguments)}function ly(v,p){return Up.apply(this,arguments)}function Up(){return(Up=(0,f.Z)(function*(v,p){return nh(v,p)})).apply(this,arguments)}function Bp(){return(Bp=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithEmailLink",rn(v,p))})).apply(this,arguments)}function tl(){return(tl=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithEmailLink",rn(v,p))})).apply(this,arguments)}class pa extends Xt{constructor(p,m,b,T=null){super("password",b),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new pa(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new pa(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function(v,p){return th.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(v,p){return Bp.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:bn(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return ku(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(v,p){return tl.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:bn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ts(v,p){return $p.apply(this,arguments)}function $p(){return($p=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithIdp",rn(v,p))})).apply(this,arguments)}class vs extends Xt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new vs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):bn("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:T}=m,S=ve(m,["providerId","signInMethod"]);if(!b||!T)return null;const W=new vs(b,T);return W.idToken=S.idToken||void 0,W.accessToken=S.accessToken||void 0,W.secret=S.secret,W.nonce=S.nonce,W.pendingToken=S.pendingToken||null,W}_getIdTokenResponse(p){return ts(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,ts(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ts(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,H.xO)(m)}return p}}function Mo(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:sendVerificationCode",rn(v,p))})).apply(this,arguments)}function Ou(){return(Ou=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithPhoneNumber",rn(v,p))})).apply(this,arguments)}function qp(){return(qp=(0,f.Z)(function*(v,p){const m=yield U(v,"POST","/v1/accounts:signInWithPhoneNumber",rn(v,p));if(m.temporaryProof)throw J(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const hy={USER_NOT_FOUND:"user-not-found"};function ih(){return(ih=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithPhoneNumber",rn(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),hy)})).apply(this,arguments)}class ns extends Xt{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new ns({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new ns({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function(v,p){return Ou.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function(v,p){return qp.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(v,p){return ih.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:T,temporaryProof:S}=p;return b||m||T||S?new ns({verificationId:m,verificationCode:b,phoneNumber:T,temporaryProof:S}):null}}class ga{constructor(p){var m,b,T,S,W,re;const Ne=(0,H.zd)((0,H.pd)(p)),Ce=null!==(m=Ne.apiKey)&&void 0!==m?m:null,Ke=null!==(b=Ne.oobCode)&&void 0!==b?b:null,Ot=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ne.mode)&&void 0!==T?T:null);_e(Ce&&Ke&&Ot,"argument-error"),this.apiKey=Ce,this.operation=Ot,this.code=Ke,this.continueUrl=null!==(S=Ne.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==(W=Ne.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(re=Ne.tenantId)&&void 0!==re?re:null}static parseLink(p){const m=function(v){const p=(0,H.zd)((0,H.pd)(v)).link,m=p?(0,H.zd)((0,H.pd)(p)).deep_link_id:null,b=(0,H.zd)((0,H.pd)(v)).deep_link_id;return(b?(0,H.zd)((0,H.pd)(b)).link:null)||b||m||p||v}(p);try{return new ga(m)}catch(b){return null}}}let No=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,b){return pa._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const T=ga.parseLink(b);return _e(T,"argument-error"),pa._fromEmailAndCode(m,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Xr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Qs extends Xr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ko extends Qs{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return _e("providerId"in m&&"signInMethod"in m,"argument-error"),vs._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return _e(p.idToken||p.accessToken,"argument-error"),vs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ko.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ko.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:T,pendingToken:S,nonce:W,providerId:re}=p;if(!b&&!T&&!m&&!S||!re)return null;try{return new ko(re)._credential({idToken:m,accessToken:b,nonce:W,pendingToken:S})}catch(Ne){return null}}}let mn=(()=>{class v extends Qs{constructor(){super("facebook.com")}static credential(m){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(b){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),gy=(()=>{class v extends Qs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:T}=m;if(!b&&!T)return null;try{return v.credential(b,T)}catch(S){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Gp=(()=>{class v extends Qs{constructor(){super("github.com")}static credential(m){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(b){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class zt extends Xt{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ts(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,ts(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ts(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:T,pendingToken:S}=m;return b&&T&&S&&b===T?new zt(b,S):null}static _create(p,m){return new zt(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sh extends Xr{constructor(p){_e(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return sh.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return sh.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=zt.fromJSON(p);return _e(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:b}=p;if(!m||!b)return null;try{return zt._create(b,m)}catch(T){return null}}}let rl=(()=>{class v extends Qs{constructor(){super("twitter.com")}static credential(m,b){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:T}=m;if(!b||!T)return null;try{return v.credential(b,T)}catch(S){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function hi(v,p){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signUp",rn(v,p))})).apply(this,arguments)}class ir{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,T=!1){return(0,f.Z)(function*(){const S=yield Vt._fromIdTokenResponse(p,b,T),W=ma(b);return new ir({user:S,providerId:W,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const T=ma(b);return new ir({user:p,providerId:T,_tokenResponse:b,operationType:m})})()}}function ma(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function ei(v){return il.apply(this,arguments)}function il(){return(il=(0,f.Z)(function*(v){var p;const m=qn(v);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new ir({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield hi(m,{returnSecureToken:!0}),T=yield ir._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class _a extends H.ZR{constructor(p,m,b,T){var S;super(m.code,m.message),this.operationType=b,this.user=T,Object.setPrototypeOf(this,_a.prototype),this.customData={appName:p.name,tenantId:null!==(S=p.tenantId)&&void 0!==S?S:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,m,b,T){return new _a(p,m,b,T)}}function oh(v,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?_a._fromErrorAndOperation(v,S,p,b):S})}function Es(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Wp(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(v,p){const m=(0,H.m9)(v);yield Js(!0,m,p);const{providerUserInfo:b}=yield Lt(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=Es(b||[]);return m.providerData=m.providerData.filter(S=>T.has(S.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ot(v,p){return zp.apply(this,arguments)}function zp(){return(zp=(0,f.Z)(function*(v,p,m=!1){const b=yield ft(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return ir._forOperation(v,"link",b)})).apply(this,arguments)}function Js(v,p,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(v,p,m){yield wt(p);const T=!1===v?"provider-already-linked":"no-such-provider";_e(Es(p.providerData).has(m)===v,p.auth,T)})).apply(this,arguments)}function sl(v,p){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(v,p,m=!1){const{auth:b}=v,T="reauthenticate";try{const S=yield ft(v,oh(b,T,p,v),m);_e(S.idToken,b,"internal-error");const W=Me(S.idToken);_e(W,b,"internal-error");const{sub:re}=W;return _e(v.uid===re,b,"user-mismatch"),ir._forOperation(v,T,S)}catch(S){throw"auth/user-not-found"===(null==S?void 0:S.code)&&bn(b,"user-mismatch"),S}})).apply(this,arguments)}function va(v,p){return ol.apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(v,p,m=!1){const b="signIn",T=yield oh(v,b,p),S=yield ir._fromIdTokenResponse(v,b,T);return m||(yield v._updateCurrentUser(S.user)),S})).apply(this,arguments)}function le(v,p){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(v,p){return va(qn(v),p)})).apply(this,arguments)}function al(v,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(v,p){const m=(0,H.m9)(v);return yield Js(!1,m,p.providerId),ot(m,p)})).apply(this,arguments)}function ah(v,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,f.Z)(function*(v,p){return sl((0,H.m9)(v),p)})).apply(this,arguments)}function rs(v,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,f.Z)(function*(v,p){return U(v,"POST","/v1/accounts:signInWithCustomToken",rn(v,p))})).apply(this,arguments)}function Ea(v,p){return uh.apply(this,arguments)}function uh(){return(uh=(0,f.Z)(function*(v,p){const m=qn(v),b=yield rs(m,{token:p,returnSecureToken:!0}),T=yield ir._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class ch{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Xs._fromServerResponse(p,m):bn(p,"internal-error")}}class Xs extends ch{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Xs(m)}}function ws(v,p,m){var b;_e((null===(b=m.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),_e(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(_e(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(_e(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Br(v,p,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v),T={requestType:"PASSWORD_RESET",email:p};m&&ws(b,T,m),yield u0(b,T)})).apply(this,arguments)}function lh(v,p,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(v,p,m){yield el((0,H.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function bs(v,p){return dh.apply(this,arguments)}function dh(){return(dh=(0,f.Z)(function*(v,p){yield uy((0,H.m9)(v),{oobCode:p})})).apply(this,arguments)}function hh(v,p){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,f.Z)(function*(v,p){const m=(0,H.m9)(v),b=yield el(m,{oobCode:p}),T=b.requestType;switch(_e(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(b.mfaInfo,m,"internal-error");default:_e(b.email,m,"internal-error")}let S=null;return b.mfaInfo&&(S=ch._fromServerResponse(qn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:S},operation:T}})).apply(this,arguments)}function Kp(v,p){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,f.Z)(function*(v,p){const{data:m}=yield hh((0,H.m9)(v),p);return m.email})).apply(this,arguments)}function fh(v,p,m){return ul.apply(this,arguments)}function ul(){return(ul=(0,f.Z)(function*(v,p,m){const b=qn(v),T=yield hi(b,{returnSecureToken:!0,email:p,password:m}),S=yield ir._fromIdTokenResponse(b,"signIn",T);return yield b._updateCurrentUser(S.user),S})).apply(this,arguments)}function Yp(v,p,m){return le((0,H.m9)(v),No.credential(p,m))}function yy(v,p,m){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v),T={requestType:"EMAIL_SIGNIN",email:p};_e(m.handleCodeInApp,b,"argument-error"),m&&ws(b,T,m),yield c0(b,T)})).apply(this,arguments)}function Bu(v,p){const m=ga.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Qp(v,p,m){return cl.apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v),T=No.credentialWithLink(p,m||li());return _e(T._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),le(b,T)})).apply(this,arguments)}function gh(v,p){return mh.apply(this,arguments)}function mh(){return(mh=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:createAuthUri",rn(v,p))})).apply(this,arguments)}function _h(v,p){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,f.Z)(function*(v,p){const b={identifier:p,continueUri:rt()?li():"http://localhost"},{signinMethods:T}=yield gh((0,H.m9)(v),b);return T||[]})).apply(this,arguments)}function h0(v,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(v,p){const m=(0,H.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&ws(m.auth,T,p);const{email:S}=yield a0(m.auth,T);S!==v.email&&(yield v.reload())})).apply(this,arguments)}function to(v,p,m){return un.apply(this,arguments)}function un(){return(un=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v),S={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&ws(b.auth,S,m);const{email:W}=yield ly(b.auth,S);W!==v.email&&(yield v.reload())})).apply(this,arguments)}function yh(v,p){return vh.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(v,p){return Bt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Eh(v,p){return wh.apply(this,arguments)}function wh(){return(wh=(0,f.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,H.m9)(v),S={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},W=yield ft(b,yh(b.auth,S));b.displayName=W.displayName||null,b.photoURL=W.photoUrl||null;const re=b.providerData.find(({providerId:Ne})=>"password"===Ne);re&&(re.displayName=b.displayName,re.photoURL=b.photoURL),yield b._updateTokensIfNecessary(W)})).apply(this,arguments)}function vy(v,p){return ju((0,H.m9)(v),p,null)}function Ey(v,p){return ju((0,H.m9)(v),null,p)}function ju(v,p,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,f.Z)(function*(v,p,m){const{auth:b}=v,S={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(S.email=p),m&&(S.password=m);const W=yield ft(v,ku(b,S));yield v._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Po{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class Ch extends Po{constructor(p,m,b,T){super(p,m,b),this.username=T}}class wy extends Po{constructor(p,m){super(p,"facebook.com",m)}}class no extends Ch{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class $u extends Po{constructor(p,m){super(p,"google.com",m)}}class f0 extends Ch{constructor(p,m,b){super(p,"twitter.com",m,b)}}function by(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(v){var p,m;if(!v)return null;const{providerId:b}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},S=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&(null==v?void 0:v.idToken)){const W=null===(m=null===(p=Me(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new Po(S,"anonymous"!==W&&"custom"!==W?W:null)}if(!b)return null;switch(b){case"facebook.com":return new wy(S,T);case"github.com":return new no(S,T);case"google.com":return new $u(S,T);case"twitter.com":return new f0(S,T,v.screenName||null);case"custom":case"anonymous":return new Po(S,null);default:return new Po(S,b,T)}}(m)}class ro{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new ro("enroll",p)}static _fromMfaPendingCredential(p){return new ro("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ro._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return ro._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Gu{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=qn(p),T=m.customData._serverResponse,S=(T.mfaInfo||[]).map(re=>ch._fromServerResponse(b,re));_e(T.mfaPendingCredential,b,"internal-error");const W=ro._fromMfaPendingCredential(T.mfaPendingCredential);return new Gu(W,S,function(){var re=(0,f.Z)(function*(Ne){const Ce=yield Ne._process(b,W);delete T.mfaInfo,delete T.mfaPendingCredential;const Ke=Object.assign(Object.assign({},T),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(m.operationType){case"signIn":const Ot=yield ir._fromIdTokenResponse(b,m.operationType,Ke);return yield b._updateCurrentUser(Ot.user),Ot;case"reauthenticate":return _e(m.user,b,"internal-error"),ir._forOperation(m.user,m.operationType,Ke);default:bn(b,"internal-error")}});return function(Ne){return re.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,f.Z)(function*(){return m.signInResolver(p)})()}}function Iy(v,p){var m;const b=(0,H.m9)(v),T=p;return _e(p.customData.operationType,b,"argument-error"),_e(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),Gu._fromError(b,T)}function Xp(v,p){return Bt(v,"POST","/v2/accounts/mfaEnrollment:start",rn(v,p))}class Lo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>ch._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Lo(p)}getSession(){var p=this;return(0,f.Z)(function*(){return ro._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var b=this;return(0,f.Z)(function*(){const T=p,S=yield b.getSession(),W=yield ft(b.user,T._process(b.user.auth,S,m));return yield b.user._updateTokensIfNecessary(W),b.user.reload()})()}unenroll(p){var m=this;return(0,f.Z)(function*(){const b="string"==typeof p?p:p.uid,T=yield m.user.getIdToken(),S=yield ft(m.user,function(v,p){return Bt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",rn(v,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:W})=>W!==b),yield m.user._updateTokensIfNecessary(S);try{yield m.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const ll=new WeakMap;function Dh(v){const p=(0,H.m9)(v);return ll.has(p)||ll.set(p,Lo._fromUser(p)),ll.get(p)}const Th="__sak";class eg{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ze=(()=>{class v extends eg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,H.z$)();return xo(v)||Fn(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Gt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const T=this.storage.getItem(b),S=this.localCache[b];T!==S&&m(b,S,T)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((re,Ne,Ce)=>{this.notifyListeners(re,Ce)});const T=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(T);if(m.newValue!==re)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!b)return}const S=()=>{const re=this.storage.getItem(T);!b&&this.localCache[T]===re||this.notifyListeners(T,re)},W=this.storage.getItem(T);(0,H.w1)()&&10===document.documentMode&&W!==m.newValue&&m.newValue!==m.oldValue?setTimeout(S,10):S()}notifyListeners(m,b){this.localCache[m]=b;const T=this.listeners[m];if(T)for(const S of Array.from(T))S(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var T=()=>super._set,S=this;return(0,f.Z)(function*(){yield T().call(S,m,b),S.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,T=this;return(0,f.Z)(function*(){const S=yield b().call(T,m);return T.localCache[m]=JSON.stringify(S),S})()}_remove(m){var b=()=>super._remove,T=this;return(0,f.Z)(function*(){yield b().call(T,m),delete T.localCache[m]})()}}return v.type="LOCAL",v})(),Vo=(()=>{class v extends eg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return v.type="SESSION",v})();let hl=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(S=>S.isListeningto(m));if(b)return b;const T=new v(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,f.Z)(function*(){const T=m,{eventId:S,eventType:W,data:re}=T.data,Ne=b.handlersMap[W];if(!(null==Ne?void 0:Ne.size))return;T.ports[0].postMessage({status:"ack",eventId:S,eventType:W});const Ce=Array.from(Ne).map(function(){var Ot=(0,f.Z)(function*(Yt){return Yt(T.origin,re)});return function(Yt){return Ot.apply(this,arguments)}}()),Ke=yield function(v){return Promise.all(v.map(function(){var p=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}(Ce);T.ports[0].postMessage({status:"done",eventId:S,eventType:W,response:Ke})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ln(v="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return v+m}class ng{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var T=this;return(0,f.Z)(function*(){const S="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let W,re;return new Promise((Ne,Ce)=>{const Ke=Ln("",20);S.port1.start();const Ot=setTimeout(()=>{Ce(new Error("unsupported_event"))},b);re={messageChannel:S,onMessage(Yt){const ur=Yt;if(ur.data.eventId===Ke)switch(ur.data.status){case"ack":clearTimeout(Ot),W=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Ne(ur.data.response);break;default:clearTimeout(Ot),clearTimeout(W),Ce(new Error("invalid_response"))}}},T.handlers.add(re),S.port1.addEventListener("message",re.onMessage),T.target.postMessage({eventType:p,eventId:Ke,data:m},[S.port2])}).finally(()=>{re&&T.removeMessageHandler(re)})})()}}function kn(){return window}function Vn(){return void 0!==kn().WorkerGlobalScope&&"function"==typeof kn().importScripts}function Uo(){return(Uo=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Sh="firebaseLocalStorageDb",pi="firebaseLocalStorage",ba="fbase_key";class Bo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function io(v,p){return v.transaction([pi],p?"readwrite":"readonly").objectStore(pi)}function Oi(){const v=indexedDB.open(Sh,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(pi,{keyPath:ba})}catch(T){m(T)}}),v.addEventListener("success",(0,f.Z)(function*(){const b=v.result;b.objectStoreNames.contains(pi)?p(b):(b.close(),yield function(){const v=indexedDB.deleteDatabase(Sh);return new Bo(v).toPromise()}(),p(yield Oi()))}))})}function jo(v,p,m){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(v,p,m){const b=io(v,!0).put({[ba]:p,value:m});return new Bo(b).toPromise()})).apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(v,p){const m=io(v,!1).get(p),b=yield new Bo(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ca(v,p){const m=io(v,!0).delete(p);return new Bo(m).toPromise()}const xy=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Oi()),m.db})()}_withRetries(m){var b=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const S=yield b._openDb();return yield m(S)}catch(S){if(T++>3)throw S;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return Vn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=hl._getInstance(Vn()?self:null),m.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(T,S){return{keyProcessed:(yield m._poll()).includes(S.key)}});return function(T,S){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(T,S){return["keyChanged"]});return function(T,S){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var b,T;if(m.activeServiceWorker=yield function(){return Uo.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ng(m.activeServiceWorker);const S=yield m.sender._send("ping",{},800);!S||(null===(b=S[0])||void 0===b?void 0:b.fulfilled)&&(null===(T=S[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Oi();return yield jo(m,Th,"1"),yield Ca(m,Th),!0}catch(m){}return!1})()}_withPendingWrite(m){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(S=>jo(S,m,b)),T.localCache[m]=b,T.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,f.Z)(function*(){const T=yield b._withRetries(S=>function(v,p){return it.apply(this,arguments)}(S,m));return b.localCache[m]=T,T})()}_remove(m){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(T=>Ca(T,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const b=yield m._withRetries(W=>{const re=io(W,!1).getAll();return new Bo(re).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const T=[],S=new Set;for(const{fbase_key:W,value:re}of b)S.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(re)&&(m.notifyListeners(W,re),T.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!S.has(W)&&(m.notifyListeners(W,null),T.push(W));return T})()}notifyListeners(m,b){this.localCache[m]=b;const T=this.listeners[m];if(T)for(const S of Array.from(T))S(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function fn(v,p){return Bt(v,"POST","/v2/accounts/mfaSignIn:start",rn(v,p))}function sg(){return(sg=(0,f.Z)(function*(v){return(yield Bt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zu(v){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=T=>{const S=dn("internal-error");S.customData=T,m(S)},b.type="text/javascript",b.charset="UTF-8",function(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function My(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Nh=1e12;class m0{constructor(p){this.auth=p,this.counter=Nh,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new Ia(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||Nh;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Nh))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,f.Z)(function*(){var b;return null===(b=m._widgets.get(p||Nh))||void 0===b||b.execute(),""})()}}class Ia{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;_e(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}();const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const og=My("rcb"),Mt=new qt(3e4,6e4);class Da{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!kn().grecaptcha}load(p,m=""){return _e((v=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(kn().grecaptcha):new Promise((b,T)=>{const S=kn().setTimeout(()=>{T(dn(p,"network-request-failed"))},Mt.get());kn()[og]=()=>{kn().clearTimeout(S),delete kn()[og];const re=kn().grecaptcha;if(!re)return void T(dn(p,"internal-error"));const Ne=re.render;re.render=(Ce,Ke)=>{const Ot=Ne(Ce,Ke);return this.counter++,Ot},this.hostLanguage=m,b(re)},zu(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:og,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(S),T(dn(p,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!kn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ny{load(p){return(0,f.Z)(function*(){return new m0(p)})()}clearedOneInstance(){}}const $r="recaptcha",is={theme:"light",type:"image"};class fl{constructor(p,m=Object.assign({},is),b){this.parameters=m,this.type=$r,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(b),this.isInvisible="invisible"===this.parameters.size,_e("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;_e(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ny:new Da,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(S=>{const W=re=>{!re||(p.tokenChangeListeners.delete(W),S(re))};p.tokenChangeListeners.add(W),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=kn()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){_e(rt()&&!Vn(),p.auth,"internal-error"),yield function(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function(v){return sg.apply(this,arguments)}(p.auth);_e(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=ns._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ag(v,p,m){return kh.apply(this,arguments)}function kh(){return(kh=(0,f.Z)(function*(v,p,m){const b=qn(v),T=yield Er(b,p,(0,H.m9)(m));return new Pi(T,S=>le(b,S))})).apply(this,arguments)}function ug(v,p,m){return cg.apply(this,arguments)}function cg(){return(cg=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v);yield Js(!1,b,"phone");const T=yield Er(b.auth,p,(0,H.m9)(m));return new Pi(T,S=>al(b,S))})).apply(this,arguments)}function Ta(v,p,m){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v),T=yield Er(b.auth,p,(0,H.m9)(m));return new Pi(T,S=>ah(b,S))})).apply(this,arguments)}function Er(v,p,m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(v,p,m){var b;const T=yield m.verify();try{let S;if(_e("string"==typeof T,v,"argument-error"),_e(m.type===$r,v,"argument-error"),S="string"==typeof p?{phoneNumber:p}:p,"session"in S){const W=S.session;if("phoneNumber"in S)return _e("enroll"===W.type,v,"internal-error"),(yield Xp(v,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:S.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{_e("signin"===W.type,v,"internal-error");const re=(null===(b=S.multiFactorHint)||void 0===b?void 0:b.uid)||S.multiFactorUid;return _e(re,v,"missing-multi-factor-info"),(yield fn(v,{mfaPendingCredential:W.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Mo(v,{phoneNumber:S.phoneNumber,recaptchaToken:T});return W}}finally{m._reset()}})).apply(this,arguments)}function Aa(v,p){return lg.apply(this,arguments)}function lg(){return(lg=(0,f.Z)(function*(v,p){yield ot((0,H.m9)(v),p)})).apply(this,arguments)}let dg=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=qn(m)}verifyPhoneNumber(m,b){return Er(this.auth,m,(0,H.m9)(b))}static credential(m,b){return ns._fromVerification(m,b)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:T}=m;return b&&T?ns._fromTokenResponse(b,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Is(v,p){return p?xn(p):(_e(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class pl extends Xt{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ts(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ts(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ts(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function ky(v){return va(v.auth,new pl(v),v.bypassAuthState)}function Oy(v){const{auth:p,user:m}=v;return _e(m,p,"internal-error"),sl(m,new pl(v),v.bypassAuthState)}function Ds(v){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(v){const{auth:p,user:m}=v;return _e(m,p,"internal-error"),ot(m,new pl(v),v.bypassAuthState)})).apply(this,arguments)}class uo{constructor(p,m,b,T,S=!1){this.auth=p,this.resolver=b,this.user=T,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,f.Z)(function*(b,T){p.pendingPromise={resolve:b,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(S){p.reject(S)}});return function(b,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:T,postBody:S,tenantId:W,error:re,type:Ne}=p;if(re)return void m.reject(re);const Ce={auth:m.auth,requestUri:b,sessionId:T,tenantId:W||void 0,postBody:S||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ne)(Ce))}catch(Ke){m.reject(Ke)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ky;case"linkViaPopup":case"linkViaRedirect":return Ds;case"reauthViaPopup":case"reauthViaRedirect":return Oy;default:bn(this.auth,"internal-error")}}resolve(p){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yu=new qt(2e3,1e4);function y0(v,p,m){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(v,p,m){const b=qn(v);Xi(v,p,Xr);const T=Is(b,m);return new gl(b,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function Oh(v,p,m){return co.apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v);Xi(b.auth,p,Xr);const T=Is(b.auth,m);return new gl(b.auth,"reauthViaPopup",p,T,b).executeNotNull()})).apply(this,arguments)}function Py(v,p,m){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v);Xi(b.auth,p,Xr);const T=Is(b.auth,m);return new gl(b.auth,"linkViaPopup",p,T,b).executeNotNull()})).apply(this,arguments)}let gl=(()=>{class v extends uo{constructor(m,b,T,S,W){super(m,b,S,W),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const b=yield m.execute();return _e(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,f.Z)(function*(){tr(1===m.filter.length,"Popup operations only handle one event");const b=Ln();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(dn(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,T;this.pollId=(null===(T=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Yu.get())};m()}}return v.currentPopupAction=null,v})();const Fh=new Map;class Lh extends uo{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,f.Z)(function*(){let b=Fh.get(m.auth._key());if(!b){try{const S=(yield function(v,p){return lo.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(S)}catch(T){b=()=>Promise.reject(T)}Fh.set(m.auth._key(),b)}return m.bypassAuthState||Fh.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const T=yield b.auth._redirectUserForId(p.eventId);if(T)return b.user=T,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function lo(){return(lo=(0,f.Z)(function*(v,p){const m=As(p),b=Sa(v);if(!(yield b._isAvailable()))return!1;const T="true"===(yield b._get(m));return yield b._remove(m),T})).apply(this,arguments)}function _l(v,p){return He.apply(this,arguments)}function He(){return(He=(0,f.Z)(function*(v,p){return Sa(v)._set(As(p),"true")})).apply(this,arguments)}function hg(){Fh.clear()}function Sa(v){return xn(v._redirectPersistence)}function As(v){return an("pendingRedirect",v.config.apiKey,v.name)}function qo(v,p,m){return function(v,p,m){return yl.apply(this,arguments)}(v,p,m)}function yl(){return(yl=(0,f.Z)(function*(v,p,m){const b=qn(v);Xi(v,p,Xr);const T=Is(b,m);return yield _l(T,b),T._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function fg(v,p,m){return function(v,p,m){return Rs.apply(this,arguments)}(v,p,m)}function Rs(){return(Rs=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v);Xi(b.auth,p,Xr);const T=Is(b.auth,m);yield _l(T,b.auth);const S=yield vl(b);return T._openRedirect(b.auth,p,"reauthViaRedirect",S)})).apply(this,arguments)}function ss(v,p,m){return function(v,p,m){return xs.apply(this,arguments)}(v,p,m)}function xs(){return(xs=(0,f.Z)(function*(v,p,m){const b=(0,H.m9)(v);Xi(b.auth,p,Xr);const T=Is(b.auth,m);yield Js(!1,b,p.providerId),yield _l(T,b.auth);const S=yield vl(b);return T._openRedirect(b.auth,p,"linkViaRedirect",S)})).apply(this,arguments)}function ar(v,p){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(v,p){return yield qn(v)._initializationPromise,Xu(v,p,!1)})).apply(this,arguments)}function Xu(v,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(v,p,m=!1){const b=qn(v),T=Is(b,p),W=yield new Lh(b,T,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield b._persistUserIfCurrent(W.user),yield b._setRedirectUser(null,p)),W})).apply(this,arguments)}function vl(v){return El.apply(this,arguments)}function El(){return(El=(0,f.Z)(function*(v){const p=Ln(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ho{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vh(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!Vh(p)){const T=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(dn(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xa(p))}saveEventToCache(p){this.cachedEventUids.add(xa(p)),this.lastProcessedEventTime=Date.now()}}function xa(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Vh({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ma(v){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(v,p={}){return Bt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Dt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ec=/^https?/;function Ns(){return(Ns=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Ma(v);for(const m of p)try{if(wl(m))return}catch(b){}bn(v,"unauthorized-domain")})).apply(this,arguments)}function wl(v){const p=li(),{protocol:m,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const W=new URL(v);return""===W.hostname&&""===b?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===b}if(!ec.test(m))return!1;if(Dt.test(v))return b===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(b)}const tc=new qt(3e4,6e4);function fo(){const v=kn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Go=null;function bl(v){return Go=Go||function(v){return new Promise((p,m)=>{var b,T,S;function W(){fo(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{fo(),m(dn(v,"network-request-failed"))},timeout:tc.get()})}if(null===(T=null===(b=kn().gapi)||void 0===b?void 0:b.iframes)||void 0===T?void 0:T.Iframe)p(gapi.iframes.getContext());else{if(!(null===(S=kn().gapi)||void 0===S?void 0:S.load)){const re=My("iframefcb");return kn()[re]=()=>{gapi.load?W():m(dn(v,"network-request-failed"))},zu(`https://apis.google.com/js/api.js?onload=${re}`).catch(Ne=>m(Ne))}W()}}).catch(p=>{throw Go=null,p})}(v),Go}const nc=new qt(5e3,15e3),Cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function po(v){const p=v.config;_e(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?kt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},T=rc.get(v.config.apiHost);T&&(b.eid=T);const S=v._getFrameworks();return S.length&&(b.fw=S.join(",")),`${m}?${(0,H.xO)(b).slice(1)}`}function Uh(){return(Uh=(0,f.Z)(function*(v){const p=yield bl(v),m=kn().gapi;return _e(m,v,"internal-error"),p.open({where:document.body,url:po(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cl,dontclear:!0},b=>new Promise(function(){var T=(0,f.Z)(function*(S,W){yield b.restyle({setHideOnLeave:!1});const re=dn(v,"network-request-failed"),Ne=kn().setTimeout(()=>{W(re)},nc.get());function Ce(){kn().clearTimeout(Ne),S(b)}b.ping(Ce).then(Ce,()=>{W(re)})});return function(S,W){return T.apply(this,arguments)}}()))})).apply(this,arguments)}const jy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bh{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function ic(v,p,m,b,T,S){_e(v.config.authDomain,v,"auth-domain-config-required"),_e(v.config.apiKey,v,"invalid-api-key");const W={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:b,v:O.SDK_VERSION,eventId:T};if(p instanceof Xr){p.setDefaultLanguage(v.languageCode),W.providerId=p.providerId||"",(0,H.xb)(p.getCustomParameters())||(W.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ne,Ce]of Object.entries(S||{}))W[Ne]=Ce}if(p instanceof Qs){const Ne=p.getScopes().filter(Ce=>""!==Ce);Ne.length>0&&(W.scopes=Ne.join(","))}v.tenantId&&(W.tid=v.tenantId);const re=W;for(const Ne of Object.keys(re))void 0===re[Ne]&&delete re[Ne];return`${function({config:v}){return v.emulator?kt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,H.xO)(re).slice(1)}`}const Zo="webStorageSupport",$h=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vo,this._completeRedirectFn=Xu}_openPopup(p,m,b,T){var S=this;return(0,f.Z)(function*(){var W;tr(null===(W=S.eventManagers[p._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const re=ic(p,m,b,li(),T);return function(v,p,m,b=500,T=600){const S=Math.max((window.screen.availHeight-T)/2,0).toString(),W=Math.max((window.screen.availWidth-b)/2,0).toString();let re="";const Ne=Object.assign(Object.assign({},jy),{width:b.toString(),height:T.toString(),top:S,left:W}),Ce=(0,H.z$)().toLowerCase();m&&(re=pt(Ce)?"_blank":m),da(Ce)&&(p=p||"http://localhost",Ne.scrollbars="yes");const Ke=Object.entries(Ne).reduce((Yt,[ur,Os])=>`${Yt}${ur}=${Os},`,"");if(function(v=(0,H.z$)()){var p;return Fn(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ce)&&"_self"!==re)return function(v,p){const m=document.createElement("a");m.href=v,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",re),new Bh(null);const Ot=window.open(p||"",re,Ke);_e(Ot,v,"popup-blocked");try{Ot.focus()}catch(Yt){}return new Bh(Ot)}(p,re,Ln())})()}_openRedirect(p,m,b,T){var S=this;return(0,f.Z)(function*(){return yield S._originValidation(p),v=ic(p,m,b,li(),T),kn().location.href=v,new Promise(()=>{});var v})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:S}=this.eventManagers[m];return T?Promise.resolve(T):(tr(S,"If manager is not set, promise should be"),S)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(p){var m=this;return(0,f.Z)(function*(){const b=yield function(v){return Uh.apply(this,arguments)}(p),T=new ho(p);return b.register("authEvent",S=>(_e(null==S?void 0:S.authEvent,p,"invalid-auth-event"),{status:T.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=b,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Zo,{type:Zo},T=>{var S;const W=null===(S=null==T?void 0:T[0])||void 0===S?void 0:S[Zo];void 0!==W&&m(!!W),bn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return Ns.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Gt()||xo()||Fn()}};class Wo extends class{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return Pn("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Wo(p)}_finalizeEnroll(p,m,b){return function(v,p){return Bt(v,"POST","/v2/accounts/mfaEnrollment:finalize",rn(v,p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function(v,p){return Bt(v,"POST","/v2/accounts/mfaSignIn:finalize",rn(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yg=(()=>{class v{constructor(){}static assertion(m){return Wo._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var v,Oa="@firebase/auth";class Li{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{var T;p((null===(T=b)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}v="Browser",(0,O._registerComponent)(new Rt.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),{apiKey:T,authDomain:S}=b.options;return(W=>{_e(T&&!T.includes(":"),"invalid-api-key",{appName:W.name}),_e(!(null==S?void 0:S.includes(":")),"argument-error",{appName:W.name});const re={apiKey:T,authDomain:S,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jc(v)},Ne=new Xc(W,re);return function(v,p){const m=(null==p?void 0:p.persistence)||[],b=(Array.isArray(m)?m:[m]).map(xn);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(Ne,m),Ne})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Rt.wA("auth-internal",p=>{const m=qn(p.getProvider("auth").getImmediate());return new Li(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Oa,"0.19.6",void 0),(0,O.registerVersion)(Oa,"0.19.6","esm2017")},854:(tt,be,V)=>{"use strict";V.d(be,{BH:()=>Y,LL:()=>Ze,ZR:()=>Rt,zI:()=>Et,US:()=>de,tV:()=>se,$s:()=>Bt,r3:()=>tn,Sg:()=>we,ne:()=>tr,vZ:()=>dn,ZB:()=>k,pd:()=>_e,m9:()=>gs,z$:()=>Ie,jU:()=>ce,ru:()=>he,d:()=>$e,xb:()=>wn,w1:()=>_t,hl:()=>Zt,uI:()=>ue,UG:()=>G,b$:()=>Se,G6:()=>bt,Mn:()=>Fe,xO:()=>Xi,zd:()=>Lr,eu:()=>It});const pe=function(U){const $=[];let L=0;for(let ae=0;ae<U.length;ae++){let J=U.charCodeAt(ae);J<128?$[L++]=J:J<2048?($[L++]=J>>6|192,$[L++]=63&J|128):55296==(64512&J)&&ae+1<U.length&&56320==(64512&U.charCodeAt(ae+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++ae)),$[L++]=J>>18|240,$[L++]=J>>12&63|128,$[L++]=J>>6&63|128,$[L++]=63&J|128):($[L++]=J>>12|224,$[L++]=J>>6&63|128,$[L++]=63&J|128)}return $},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,$){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,ae=[];for(let J=0;J<U.length;J+=3){const Ve=U[J],Pe=J+1<U.length,Lt=Pe?U[J+1]:0,Mn=J+2<U.length,Cn=Mn?U[J+2]:0;let X=(15&Lt)<<2|Cn>>6,j=63&Cn;Mn||(j=64,Pe||(X=64)),ae.push(L[Ve>>2],L[(3&Ve)<<4|Lt>>4],L[X],L[j])}return ae.join("")},encodeString(U,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(U):this.encodeByteArray(pe(U),$)},decodeString(U,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(U):function(U){const $=[];let L=0,ae=0;for(;L<U.length;){const J=U[L++];if(J<128)$[ae++]=String.fromCharCode(J);else if(J>191&&J<224){const Ve=U[L++];$[ae++]=String.fromCharCode((31&J)<<6|63&Ve)}else if(J>239&&J<365){const Mn=((7&J)<<18|(63&U[L++])<<12|(63&U[L++])<<6|63&U[L++])-65536;$[ae++]=String.fromCharCode(55296+(Mn>>10)),$[ae++]=String.fromCharCode(56320+(1023&Mn))}else{const Ve=U[L++],Pe=U[L++];$[ae++]=String.fromCharCode((15&J)<<12|(63&Ve)<<6|63&Pe)}}return $.join("")}(this.decodeStringToByteArray(U,$))},decodeStringToByteArray(U,$){this.init_();const L=$?this.charToByteMapWebSafe_:this.charToByteMap_,ae=[];for(let J=0;J<U.length;){const Ve=L[U.charAt(J++)],Lt=J<U.length?L[U.charAt(J)]:0;++J;const Cn=J<U.length?L[U.charAt(J)]:64;++J;const yt=J<U.length?L[U.charAt(J)]:64;if(++J,null==Ve||null==Lt||null==Cn||null==yt)throw Error();ae.push(Ve<<2|Lt>>4),64!==Cn&&(ae.push(Lt<<4&240|Cn>>2),64!==yt&&ae.push(Cn<<6&192|yt))}return ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},Ae=function(U){return function(U){const $=pe(U);return de.encodeByteArray($,!0)}(U).replace(/\./g,"")},se=function(U){try{return de.decodeString(U,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function k(U,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return $}for(const L in $)!$.hasOwnProperty(L)||!Q(L)||(U[L]=k(U[L],$[L]));return U}function Q(U){return"__proto__"!==U}class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,L)=>{this.resolve=$,this.reject=L})}wrapCallback($){return(L,ae)=>{L?this.reject(L):this.resolve(ae),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(L):$(L,ae))}}}function we(U,$){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ae=$||"demo-project",J=U.iat||0,Ve=U.sub||U.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${ae}`,aud:ae,iat:J,exp:J+3600,auth_time:J,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},U);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(Pe)),""].join(".")}function Ie(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function G(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function ce(){return"object"==typeof self&&self.self===self}function he(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $e(){return Ie().indexOf("Electron/")>=0}function _t(){const U=Ie();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Fe(){return Ie().indexOf("MSAppHost/")>=0}function bt(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zt(){return"object"==typeof indexedDB}function It(){return new Promise((U,$)=>{try{let L=!0;const ae="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ae);J.onsuccess=()=>{J.result.close(),L||self.indexedDB.deleteDatabase(ae),U(!0)},J.onupgradeneeded=()=>{L=!1},J.onerror=()=>{var Ve;$((null===(Ve=J.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(L){$(L)}})}function Et(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Rt extends Error{constructor($,L,ae){super(L),this.code=$,this.customData=ae,this.name="FirebaseError",Object.setPrototypeOf(this,Rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor($,L,ae){this.service=$,this.serviceName=L,this.errors=ae}create($,...L){const ae=L[0]||{},J=`${this.service}/${$}`,Ve=this.errors[$],Pe=Ve?function(U,$){return U.replace(Du,(L,ae)=>{const J=$[ae];return null!=J?String(J):`<${ae}?>`})}(Ve,ae):"Error";return new Rt(J,`${this.serviceName}: ${Pe} (${J}).`,ae)}}const Du=/\{\$([^}]+)}/g;function tn(U,$){return Object.prototype.hasOwnProperty.call(U,$)}function wn(U){for(const $ in U)if(Object.prototype.hasOwnProperty.call(U,$))return!1;return!0}function dn(U,$){if(U===$)return!0;const L=Object.keys(U),ae=Object.keys($);for(const J of L){if(!ae.includes(J))return!1;const Ve=U[J],Pe=$[J];if(on(Ve)&&on(Pe)){if(!dn(Ve,Pe))return!1}else if(Ve!==Pe)return!1}for(const J of ae)if(!L.includes(J))return!1;return!0}function on(U){return null!==U&&"object"==typeof U}function Xi(U){const $=[];for(const[L,ae]of Object.entries(U))Array.isArray(ae)?ae.forEach(J=>{$.push(encodeURIComponent(L)+"="+encodeURIComponent(J))}):$.push(encodeURIComponent(L)+"="+encodeURIComponent(ae));return $.length?"&"+$.join("&"):""}function Lr(U){const $={};return U.replace(/^\?/,"").split("&").forEach(ae=>{if(ae){const[J,Ve]=ae.split("=");$[decodeURIComponent(J)]=decodeURIComponent(Ve)}}),$}function _e(U){const $=U.indexOf("?");if(!$)return"";const L=U.indexOf("#",$);return U.substring($,L>0?L:void 0)}function tr(U,$){const L=new es(U,$);return L.subscribe.bind(L)}class es{constructor($,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{$(this)}).catch(ae=>{this.error(ae)})}next($){this.forEachObserver(L=>{L.next($)})}error($){this.forEachObserver(L=>{L.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,L,ae){let J;if(void 0===$&&void 0===L&&void 0===ae)throw new Error("Missing Observer.");J=function(U,$){if("object"!=typeof U||null===U)return!1;for(const L of["next","error","complete"])if(L in U&&"function"==typeof U[L])return!0;return!1}($)?$:{next:$,error:L,complete:ae},void 0===J.next&&(J.next=nr),void 0===J.error&&(J.error=nr),void 0===J.complete&&(J.complete=nr);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(Pe){}}),this.observers.push(J),Ve}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,$)}sendOne($,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{L(this.observers[$])}catch(ae){"undefined"!=typeof console&&console.error&&console.error(ae)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}function Bt(U,$=1e3,L=2){const ae=$*Math.pow(L,U),J=Math.round(.5*ae*(Math.random()-.5)*2);return Math.min(144e5,ae+J)}function gs(U){return U&&U._delegate?U._delegate:U}},841:(tt,be,V)=>{"use strict";V.d(be,{Z:()=>f.Z});var f=V(394);f.Z.registerVersion("firebase","9.6.4","app-compat")},828:(tt,be,V)=>{"use strict";V.r(be);var f=V(239),H=V(394),O=V(538),pe=V(854),ve=(V(26),V(422),V(910));function Ae(){return window}function k(){return(k=(0,f.Z)(function*(X,j,B){var oe;const{BuildInfo:Me}=Ae();(0,O.ap)(j.sessionId,"AuthEvent did not contain a session ID");const ht=yield ce(j.sessionId),ft={};return(0,O.aq)()?ft.ibi=Me.packageName:(0,O.ar)()?ft.apn=Me.packageName:(0,O.as)(X,"operation-not-supported-in-this-environment"),Me.displayName&&(ft.appDisplayName=Me.displayName),ft.sessionId=ht,(0,O.at)(X,B,j.type,void 0,null!==(oe=j.eventId)&&void 0!==oe?oe:void 0,ft)})).apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(X){const{BuildInfo:j}=Ae(),B={};(0,O.aq)()?B.iosBundleId=j.packageName:(0,O.ar)()?B.androidPackageName=j.packageName:(0,O.as)(X,"operation-not-supported-in-this-environment"),yield(0,O.au)(X,B)})).apply(this,arguments)}function ue(){return(ue=(0,f.Z)(function*(X,j,B){const{cordova:oe}=Ae();let Me=()=>{};try{yield new Promise((ht,ft)=>{let Ft=null;function In(){var wt;ht();const Qr=null===(wt=oe.plugins.browsertab)||void 0===wt?void 0:wt.close;"function"==typeof Qr&&Qr(),"function"==typeof(null==B?void 0:B.close)&&B.close()}function rr(){Ft||(Ft=window.setTimeout(()=>{ft((0,O.av)(X,"redirect-cancelled-by-user"))},2e3))}function Hn(){"visible"===(null==document?void 0:document.visibilityState)&&rr()}j.addPassiveListener(In),document.addEventListener("resume",rr,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Hn,!1),Me=()=>{j.removePassiveListener(In),document.removeEventListener("resume",rr,!1),document.removeEventListener("visibilitychange",Hn,!1),Ft&&window.clearTimeout(Ft)}})}finally{Me()}})).apply(this,arguments)}function ce(X){return he.apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(X){const j=Se(X),B=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(B)).map(Me=>Me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Se(X){if((0,O.ap)(/[0-9a-zA-Z]+/.test(X),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(X);const j=new ArrayBuffer(X.length),B=new Uint8Array(j);for(let oe=0;oe<X.length;oe++)B[oe]=X.charCodeAt(oe);return B}class _t extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(j)),super.onEvent(j)}initialized(){var j=this;return(0,f.Z)(function*(){yield j.initPromise})()}}function bt(X){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(X){const j=yield nt()._get(Je(X));return j&&(yield nt()._remove(Je(X))),j})).apply(this,arguments)}function Et(){const X=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const oe=Math.floor(Math.random()*j.length);X.push(j.charAt(oe))}return X.join("")}function nt(){return(0,O.ax)(O.b)}function Je(X){return(0,O.ay)("authEvent",X.config.apiKey,X.name)}function Xn(X){if(!(null==X?void 0:X.includes("?")))return{};const[j,...B]=X.split("?");return(0,pe.zd)(B.join("?"))}function er(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function tn(){var X;return(null===(X=null==self?void 0:self.location)||void 0===X?void 0:X.protocol)||null}function wn(X=(0,pe.z$)()){return!("file:"!==tn()&&"ionic:"!==tn()||!X.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lr(){try{const X=self.localStorage,j=O.aG();if(X)return X.setItem(j,"1"),X.removeItem(j),!function(X=(0,pe.z$)()){return(0,pe.w1)()&&11===(null==document?void 0:document.documentMode)||function(X=(0,pe.z$)()){return/Edge\/\d+/.test(X)}(X)}()||(0,pe.hl)()}catch(X){return _e()&&(0,pe.hl)()}return!1}function _e(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pn(){return("http:"===tn()||"https:"===tn()||(0,pe.ru)()||wn())&&!((0,pe.b$)()||(0,pe.UG)())&&Lr()&&!_e()}function tr(){return wn()&&"undefined"!=typeof document}function xn(){return(xn=(0,f.Z)(function*(){return!!tr()&&new Promise(X=>{const j=setTimeout(()=>{X(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),X(!0)})})})).apply(this,arguments)}const xt={LOCAL:"local",NONE:"none",SESSION:"session"},nr=O.aw,li="persistence";function fe(X){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,f.Z)(function*(X){yield X._initializationPromise;const j=qt(),B=O.ay(li,X.config.apiKey,X.name);(null==j?void 0:j.sessionStorage)&&j.sessionStorage.setItem(B,X._getPersistence())})).apply(this,arguments)}function qt(){return"undefined"!=typeof window?window:null}const kt=O.aw;class Ue{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(j){var B=this;return(0,f.Z)(function*(){const oe=j._key();let Me=B.eventManagers.get(oe);return Me||(Me=new _t(j),B.eventManagers.set(oe,Me),B.attachCallbackListeners(j,Me)),Me})()}_openPopup(j){(0,O.as)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,B,oe,Me){var ht=this;return(0,f.Z)(function*(){!function(X){var j,B,oe,Me,ht,ft,Ft,In,rr,Hn;const wt=Ae();(0,O.aw)("function"==typeof(null===(j=null==wt?void 0:wt.universalLinks)||void 0===j?void 0:j.subscribe),X,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(B=null==wt?void 0:wt.BuildInfo)||void 0===B?void 0:B.packageName),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(ht=null===(Me=null===(oe=null==wt?void 0:wt.cordova)||void 0===oe?void 0:oe.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===ht?void 0:ht.openUrl),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(In=null===(Ft=null===(ft=null==wt?void 0:wt.cordova)||void 0===ft?void 0:ft.plugins)||void 0===Ft?void 0:Ft.browsertab)||void 0===In?void 0:In.isAvailable),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Hn=null===(rr=null==wt?void 0:wt.cordova)||void 0===rr?void 0:rr.InAppBrowser)||void 0===Hn?void 0:Hn.open),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const ft=yield ht._initialize(j);yield ft.initialized(),ft.resetRedirect(),(0,O.aB)(),yield ht._originValidation(j);const Ft=function(X,j,B=null){return{type:j,eventId:B,urlResponse:null,sessionId:Et(),postBody:null,tenantId:X.tenantId,error:(0,O.av)(X,"no-auth-event")}}(j,oe,Me);yield function(X,j){return nt()._set(Je(X),j)}(j,Ft);const In=yield function(X,j,B){return k.apply(this,arguments)}(j,Ft,B),rr=yield function(X){const{cordova:j}=Ae();return new Promise(B=>{j.plugins.browsertab.isAvailable(oe=>{let Me=null;oe?j.plugins.browsertab.openUrl(X):Me=j.InAppBrowser.open(X,(0,O.ao)()?"_blank":"_system","location=yes"),B(Me)})})}(In);return function(X,j,B){return ue.apply(this,arguments)}(j,ft,rr)})()}_isIframeWebStorageSupported(j,B){throw new Error("Method not implemented.")}_originValidation(j){const B=j._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function(X){return Y.apply(this,arguments)}(j)),this.originValidationPromises[B]}attachCallbackListeners(j,B){const{universalLinks:oe,handleOpenURL:Me,BuildInfo:ht}=Ae(),ft=setTimeout((0,f.Z)(function*(){yield bt(j),B.onEvent(er())}),500),Ft=function(){var Hn=(0,f.Z)(function*(wt){clearTimeout(ft);const Qr=yield bt(j);let Nn=null;Qr&&(null==wt?void 0:wt.url)&&(Nn=function(X,j){var B,oe;const Me=function(X){const j=Xn(X),B=j.link?decodeURIComponent(j.link):void 0,oe=Xn(B).link,Me=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return Xn(Me).link||Me||oe||B||X}(j);if(Me.includes("/__/auth/callback")){const ht=Xn(Me),ft=ht.firebaseError?function(X){try{return JSON.parse(X)}catch(j){return null}}(decodeURIComponent(ht.firebaseError)):null,Ft=null===(oe=null===(B=null==ft?void 0:ft.code)||void 0===B?void 0:B.split("auth/"))||void 0===oe?void 0:oe[1],In=Ft?(0,O.av)(Ft):null;return In?{type:X.type,eventId:X.eventId,tenantId:X.tenantId,error:In,urlResponse:null,sessionId:null,postBody:null}:{type:X.type,eventId:X.eventId,tenantId:X.tenantId,sessionId:X.sessionId,urlResponse:Me,postBody:null}}return null}(Qr,wt.url)),B.onEvent(Nn||er())});return function(Qr){return Hn.apply(this,arguments)}}();void 0!==oe&&"function"==typeof oe.subscribe&&oe.subscribe(null,Ft);const In=Me,rr=`${ht.packageName.toLowerCase()}://`;Ae().handleOpenURL=function(){var Hn=(0,f.Z)(function*(wt){if(wt.toLowerCase().startsWith(rr)&&Ft({url:wt}),"function"==typeof In)try{In(wt)}catch(Qr){console.error(Qr)}});return function(wt){return Hn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(j){var B=this;return(0,f.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,B,oe,Me){var ht=this;return(0,f.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openPopup(j,B,oe,Me)})()}_openRedirect(j,B,oe,Me){var ht=this;return(0,f.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openRedirect(j,B,oe,Me)})()}_isIframeWebStorageSupported(j,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,B)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return tr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,f.Z)(function*(){if(j.underlyingResolver)return;const B=yield function(){return xn.apply(this,arguments)}();j.underlyingResolver=B?j.cordovaResolver:j.browserResolver})()}}function je(X){return X.unwrap()}function rn(X){return Wt(X)}function Wt(X){const{_tokenResponse:j}=X instanceof pe.ZR?X.customData:X;if(!j)return null;if(!(X instanceof pe.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return O.P.credentialFromResult(X);const B=j.providerId;if(!B||B===O.o.PASSWORD)return null;let oe;switch(B){case O.o.GOOGLE:oe=O.N;break;case O.o.FACEBOOK:oe=O.M;break;case O.o.GITHUB:oe=O.Q;break;case O.o.TWITTER:oe=O.V;break;default:const{oauthIdToken:Me,oauthAccessToken:ht,oauthTokenSecret:ft,pendingToken:Ft,nonce:In}=j;return ht||ft||Me||Ft?Ft?B.startsWith("saml.")?O.aJ._create(B,Ft):O.I._fromParams({providerId:B,signInMethod:B,pendingToken:Ft,idToken:Me,accessToken:ht}):new O.T(B).credential({idToken:Me,accessToken:ht,rawNonce:In}):null}return X instanceof pe.ZR?oe.credentialFromError(X):oe.credentialFromResult(X)}function jt(X,j){return j.catch(B=>{throw B instanceof pe.ZR&&function(X,j){var B;const oe=null===(B=j.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===j.code)j.resolver=new $(X,O.am(X,j));else if(oe){const Me=Wt(j),ht=j;Me&&(ht.credential=Me,ht.tenantId=oe.tenantId||void 0,ht.email=oe.email||void 0,ht.phoneNumber=oe.phoneNumber||void 0)}}(X,B),B}).then(B=>{const Me=B.user;return{operationType:B.operationType,credential:rn(B),additionalUserInfo:O.ak(B),user:L.getOrCreate(Me)}})}function gs(X,j){return U.apply(this,arguments)}function U(){return(U=(0,f.Z)(function*(X,j){const B=yield j;return{verificationId:B.verificationId,confirm:oe=>jt(X,B.confirm(oe))}})).apply(this,arguments)}class ${constructor(j,B){this.resolver=B,this.auth=j.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return jt(je(this.auth),this.resolver.resolveSignIn(j))}}class L{constructor(j){this._delegate=j,this.multiFactor=O.an(j)}static getOrCreate(j){return L.USER_MAP.has(j)||L.USER_MAP.set(j,new L(j)),L.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var B=this;return(0,f.Z)(function*(){return jt(B.auth,O.Y(B._delegate,j))})()}linkWithPhoneNumber(j,B){var oe=this;return(0,f.Z)(function*(){return gs(oe.auth,O.l(oe._delegate,j,B))})()}linkWithPopup(j){var B=this;return(0,f.Z)(function*(){return jt(B.auth,O.d(B._delegate,j,Ue))})()}linkWithRedirect(j){var B=this;return(0,f.Z)(function*(){return yield fe(O.aC(B.auth)),O.g(B._delegate,j,Ue)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var B=this;return(0,f.Z)(function*(){return jt(B.auth,O.Z(B._delegate,j))})()}reauthenticateWithPhoneNumber(j,B){return gs(this.auth,O.r(this._delegate,j,B))}reauthenticateWithPopup(j){return jt(this.auth,O.e(this._delegate,j,Ue))}reauthenticateWithRedirect(j){var B=this;return(0,f.Z)(function*(){return yield fe(O.aC(B.auth)),O.h(B._delegate,j,Ue)})()}sendEmailVerification(j){return O.aa(this._delegate,j)}unlink(j){var B=this;return(0,f.Z)(function*(){return yield O.aj(B._delegate,j),B})()}updateEmail(j){return O.af(this._delegate,j)}updatePassword(j){return O.ag(this._delegate,j)}updatePhoneNumber(j){return O.u(this._delegate,j)}updateProfile(j){return O.ae(this._delegate,j)}verifyBeforeUpdateEmail(j,B){return O.ab(this._delegate,j,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}L.USER_MAP=new WeakMap;const ae=O.aw;let J=(()=>{class X{constructor(B,oe){if(this.app=B,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Me}=B.options;ae(Me,"invalid-api-key",{appName:B.name}),ae(Me,"invalid-api-key",{appName:B.name});const ht="undefined"!=typeof window?Ue:void 0;this._delegate=oe.initialize({options:{persistence:Pe(Me,B.name),popupRedirectResolver:ht}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?L.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,oe){O.E(this._delegate,B,oe)}applyActionCode(B){return O.a1(this._delegate,B)}checkActionCode(B){return O.a2(this._delegate,B)}confirmPasswordReset(B,oe){return O.a0(this._delegate,B,oe)}createUserWithEmailAndPassword(B,oe){var Me=this;return(0,f.Z)(function*(){return jt(Me._delegate,O.a4(Me._delegate,B,oe))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return O.a9(this._delegate,B)}isSignInWithEmailLink(B){return O.a7(this._delegate,B)}getRedirectResult(){var B=this;return(0,f.Z)(function*(){ae(Pn(),B._delegate,"operation-not-supported-in-this-environment");const oe=yield O.j(B._delegate,Ue);return oe?jt(B._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function(X,j){(0,O.aC)(X)._logFramework(j)}(this._delegate,B)}onAuthStateChanged(B,oe,Me){const{next:ht,error:ft,complete:Ft}=Ve(B,oe,Me);return this._delegate.onAuthStateChanged(ht,ft,Ft)}onIdTokenChanged(B,oe,Me){const{next:ht,error:ft,complete:Ft}=Ve(B,oe,Me);return this._delegate.onIdTokenChanged(ht,ft,Ft)}sendSignInLinkToEmail(B,oe){return O.a6(this._delegate,B,oe)}sendPasswordResetEmail(B,oe){return O.$(this._delegate,B,oe||void 0)}setPersistence(B){var oe=this;return(0,f.Z)(function*(){let Me;switch(function(X,j){nr(Object.values(xt).includes(j),X,"invalid-persistence-type"),(0,pe.b$)()?nr(j!==xt.SESSION,X,"unsupported-persistence-type"):(0,pe.UG)()?nr(j===xt.NONE,X,"unsupported-persistence-type"):_e()?nr(j===xt.NONE||j===xt.LOCAL&&(0,pe.hl)(),X,"unsupported-persistence-type"):nr(j===xt.NONE||Lr(),X,"unsupported-persistence-type")}(oe._delegate,B),B){case xt.SESSION:Me=O.a;break;case xt.LOCAL:Me=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case xt.NONE:Me=O.K;break;default:return O.as("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(Me)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return jt(this._delegate,O.W(this._delegate))}signInWithCredential(B){return jt(this._delegate,O.X(this._delegate,B))}signInWithCustomToken(B){return jt(this._delegate,O._(this._delegate,B))}signInWithEmailAndPassword(B,oe){return jt(this._delegate,O.a5(this._delegate,B,oe))}signInWithEmailLink(B,oe){return jt(this._delegate,O.a8(this._delegate,B,oe))}signInWithPhoneNumber(B,oe){return gs(this._delegate,O.s(this._delegate,B,oe))}signInWithPopup(B){var oe=this;return(0,f.Z)(function*(){return ae(Pn(),oe._delegate,"operation-not-supported-in-this-environment"),jt(oe._delegate,O.c(oe._delegate,B,Ue))})()}signInWithRedirect(B){var oe=this;return(0,f.Z)(function*(){return ae(Pn(),oe._delegate,"operation-not-supported-in-this-environment"),yield fe(oe._delegate),O.f(oe._delegate,B,Ue)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return O.a3(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return X.Persistence=xt,X})();function Ve(X,j,B){let oe=X;"function"!=typeof X&&({next:oe,error:j,complete:B}=X);const Me=oe;return{next:ft=>Me(ft&&L.getOrCreate(ft)),error:j,complete:B}}function Pe(X,j){const B=function(X,j){const B=qt();if(!(null==B?void 0:B.sessionStorage))return[];const oe=O.ay(li,X,j);switch(B.sessionStorage.getItem(oe)){case xt.NONE:return[O.K];case xt.LOCAL:return[O.i,O.a];case xt.SESSION:return[O.a];default:return[]}}(X,j);if("undefined"!=typeof self&&!B.includes(O.i)&&B.push(O.i),"undefined"!=typeof window)for(const oe of[O.b,O.a])B.includes(oe)||B.push(oe);return B.includes(O.K)||B.push(O.K),B}class Lt{constructor(){this.providerId="phone",this._delegate=new O.P(je(H.Z.auth()))}static credential(j,B){return O.P.credential(j,B)}verifyPhoneNumber(j,B){return this._delegate.verifyPhoneNumber(j,B)}unwrap(){return this._delegate}}Lt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Lt.PROVIDER_ID=O.P.PROVIDER_ID;const Mn=O.aw;var X;(X=H.Z).INTERNAL.registerComponent(new ve.wA("auth-compat",j=>{const B=j.getProvider("app-compat").getImmediate(),oe=j.getProvider("auth");return new J(B,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:Lt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(j,B,oe=H.Z.app()){var Me;Mn(null===(Me=oe.options)||void 0===Me?void 0:Me.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new O.R(j,B,oe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.V,Auth:J,AuthCredential:O.G,Error:pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),X.registerVersion("@firebase/auth-compat","0.2.6")},676:function(tt,be){!function(V){"use strict";function f(G){return Array.prototype.slice.call(G)}function H(G){return new Promise(function(ce,he){G.onsuccess=function(){ce(G.result)},G.onerror=function(){he(G.error)}})}function O(G,ce,he){var Se,$e=new Promise(function(_t,Fe){H(Se=G[ce].apply(G,he)).then(_t,Fe)});return $e.request=Se,$e}function pe(G,ce,he){var Se=O(G,ce,he);return Se.then(function($e){if($e)return new N($e,Se.request)})}function Oe(G,ce,he){he.forEach(function(Se){Object.defineProperty(G.prototype,Se,{get:function(){return this[ce][Se]},set:function($e){this[ce][Se]=$e}})})}function de(G,ce,he,Se){Se.forEach(function($e){$e in he.prototype&&(G.prototype[$e]=function(){return O(this[ce],$e,arguments)})})}function ve(G,ce,he,Se){Se.forEach(function($e){$e in he.prototype&&(G.prototype[$e]=function(){return this[ce][$e].apply(this[ce],arguments)})})}function Ae(G,ce,he,Se){Se.forEach(function($e){$e in he.prototype&&(G.prototype[$e]=function(){return pe(this[ce],$e,arguments)})})}function se(G){this._index=G}function N(G,ce){this._cursor=G,this._request=ce}function k(G){this._store=G}function Q(G){this._tx=G,this.complete=new Promise(function(ce,he){G.oncomplete=function(){ce()},G.onerror=function(){he(G.error)},G.onabort=function(){he(G.error)}})}function Y(G,ce,he){this._db=G,this.oldVersion=ce,this.transaction=new Q(he)}function we(G){this._db=G}Oe(se,"_index",["name","keyPath","multiEntry","unique"]),de(se,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Ae(se,"_index",IDBIndex,["openCursor","openKeyCursor"]),Oe(N,"_cursor",["direction","key","primaryKey","value"]),de(N,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(G){G in IDBCursor.prototype&&(N.prototype[G]=function(){var ce=this,he=arguments;return Promise.resolve().then(function(){return ce._cursor[G].apply(ce._cursor,he),H(ce._request).then(function(Se){if(Se)return new N(Se,ce._request)})})})}),k.prototype.createIndex=function(){return new se(this._store.createIndex.apply(this._store,arguments))},k.prototype.index=function(){return new se(this._store.index.apply(this._store,arguments))},Oe(k,"_store",["name","keyPath","indexNames","autoIncrement"]),de(k,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Ae(k,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ve(k,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new k(this._tx.objectStore.apply(this._tx,arguments))},Oe(Q,"_tx",["objectStoreNames","mode"]),ve(Q,"_tx",IDBTransaction,["abort"]),Y.prototype.createObjectStore=function(){return new k(this._db.createObjectStore.apply(this._db,arguments))},Oe(Y,"_db",["name","version","objectStoreNames"]),ve(Y,"_db",IDBDatabase,["deleteObjectStore","close"]),we.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},Oe(we,"_db",["name","version","objectStoreNames"]),ve(we,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(G){[k,se].forEach(function(ce){G in ce.prototype&&(ce.prototype[G.replace("open","iterate")]=function(){var he=f(arguments),Se=he[he.length-1],$e=this._store||this._index,_t=$e[G].apply($e,he.slice(0,-1));_t.onsuccess=function(){Se(_t.result)}})})}),[se,k].forEach(function(G){G.prototype.getAll||(G.prototype.getAll=function(ce,he){var Se=this,$e=[];return new Promise(function(_t){Se.iterateCursor(ce,function(Fe){Fe?($e.push(Fe.value),void 0===he||$e.length!=he?Fe.continue():_t($e)):_t($e)})})})}),V.openDb=function(G,ce,he){var Se=O(indexedDB,"open",[G,ce]),$e=Se.request;return $e&&($e.onupgradeneeded=function(_t){he&&he(new Y($e.result,_t.oldVersion,$e.transaction))}),Se.then(function(_t){return new we(_t)})},V.deleteDb=function(G){return O(indexedDB,"deleteDatabase",[G])},Object.defineProperty(V,"__esModule",{value:!0})}(be)},574:(tt,be,V)=>{"use strict";V.d(be,{y:()=>k});var f=V(393),O=V(181),pe=V(490),de=V(554),ve=V(487);var N=V(494);let k=(()=>{class Y{constructor(Ie){this._isScalar=!1,Ie&&(this._subscribe=Ie)}lift(Ie){const ue=new Y;return ue.source=this,ue.operator=Ie,ue}subscribe(Ie,ue,G){const{operator:ce}=this,he=function(Y,we,Ie){if(Y){if(Y instanceof f.L)return Y;if(Y[O.b])return Y[O.b]()}return Y||we||Ie?new f.L(Y,we,Ie):new f.L(pe.c)}(Ie,ue,G);if(he.add(ce?ce.call(he,this.source):this.source||N.v.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),N.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(ue){N.v.useDeprecatedSynchronousErrorHandling&&(Ie.syncErrorThrown=!0,Ie.syncErrorValue=ue),function(Y){for(;Y;){const{closed:we,destination:Ie,isStopped:ue}=Y;if(we||ue)return!1;Y=Ie&&Ie instanceof f.L?Ie:null}return!0}(Ie)?Ie.error(ue):console.warn(ue)}}forEach(Ie,ue){return new(ue=Q(ue))((G,ce)=>{let he;he=this.subscribe(Se=>{try{Ie(Se)}catch($e){ce($e),he&&he.unsubscribe()}},ce,G)})}_subscribe(Ie){const{source:ue}=this;return ue&&ue.subscribe(Ie)}[de.L](){return this}pipe(...Ie){return 0===Ie.length?this:function(Y){return 0===Y.length?ve.y:1===Y.length?Y[0]:function(Ie){return Y.reduce((ue,G)=>G(ue),Ie)}}(Ie)(this)}toPromise(Ie){return new(Ie=Q(Ie))((ue,G)=>{let ce;this.subscribe(he=>ce=he,he=>G(he),()=>ue(ce))})}}return Y.create=we=>new Y(we),Y})();function Q(Y){if(Y||(Y=N.v.Promise||Promise),!Y)throw new Error("no Promise impl found");return Y}},490:(tt,be,V)=>{"use strict";V.d(be,{c:()=>O});var f=V(494),H=V(449);const O={closed:!0,next(pe){},error(pe){if(f.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,H.z)(pe)},complete(){}}},765:(tt,be,V)=>{"use strict";V.d(be,{Yc:()=>ve,xQ:()=>Ae});var f=V(574),H=V(393),O=V(319),pe=V(971),Oe=V(858),de=V(181);class ve extends H.L{constructor(k){super(k),this.destination=k}}let Ae=(()=>{class N extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[de.b](){return new ve(this)}lift(Q){const Y=new se(this,this);return Y.operator=Q,Y}next(Q){if(this.closed)throw new pe.N;if(!this.isStopped){const{observers:Y}=this,we=Y.length,Ie=Y.slice();for(let ue=0;ue<we;ue++)Ie[ue].next(Q)}}error(Q){if(this.closed)throw new pe.N;this.hasError=!0,this.thrownError=Q,this.isStopped=!0;const{observers:Y}=this,we=Y.length,Ie=Y.slice();for(let ue=0;ue<we;ue++)Ie[ue].error(Q);this.observers.length=0}complete(){if(this.closed)throw new pe.N;this.isStopped=!0;const{observers:Q}=this,Y=Q.length,we=Q.slice();for(let Ie=0;Ie<Y;Ie++)we[Ie].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Q){if(this.closed)throw new pe.N;return super._trySubscribe(Q)}_subscribe(Q){if(this.closed)throw new pe.N;return this.hasError?(Q.error(this.thrownError),O.w.EMPTY):this.isStopped?(Q.complete(),O.w.EMPTY):(this.observers.push(Q),new Oe.W(this,Q))}asObservable(){const Q=new f.y;return Q.source=this,Q}}return N.create=(k,Q)=>new se(k,Q),N})();class se extends Ae{constructor(k,Q){super(),this.destination=k,this.source=Q}next(k){const{destination:Q}=this;Q&&Q.next&&Q.next(k)}error(k){const{destination:Q}=this;Q&&Q.error&&this.destination.error(k)}complete(){const{destination:k}=this;k&&k.complete&&this.destination.complete()}_subscribe(k){const{source:Q}=this;return Q?this.source.subscribe(k):O.w.EMPTY}}},858:(tt,be,V)=>{"use strict";V.d(be,{W:()=>H});var f=V(319);class H extends f.w{constructor(pe,Oe){super(),this.subject=pe,this.subscriber=Oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const pe=this.subject,Oe=pe.observers;if(this.subject=null,!Oe||0===Oe.length||pe.isStopped||pe.closed)return;const de=Oe.indexOf(this.subscriber);-1!==de&&Oe.splice(de,1)}}},393:(tt,be,V)=>{"use strict";V.d(be,{L:()=>ve});var f=V(105),H=V(490),O=V(319),pe=V(181),Oe=V(494),de=V(449);class ve extends O.w{constructor(N,k,Q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=H.c;break;case 1:if(!N){this.destination=H.c;break}if("object"==typeof N){N instanceof ve?(this.syncErrorThrowable=N.syncErrorThrowable,this.destination=N,N.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ae(this,N));break}default:this.syncErrorThrowable=!0,this.destination=new Ae(this,N,k,Q)}}[pe.b](){return this}static create(N,k,Q){const Y=new ve(N,k,Q);return Y.syncErrorThrowable=!1,Y}next(N){this.isStopped||this._next(N)}error(N){this.isStopped||(this.isStopped=!0,this._error(N))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(N){this.destination.next(N)}_error(N){this.destination.error(N),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:N}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=N,this}}class Ae extends ve{constructor(N,k,Q,Y){super(),this._parentSubscriber=N;let we,Ie=this;(0,f.m)(k)?we=k:k&&(we=k.next,Q=k.error,Y=k.complete,k!==H.c&&(Ie=Object.create(k),(0,f.m)(Ie.unsubscribe)&&this.add(Ie.unsubscribe.bind(Ie)),Ie.unsubscribe=this.unsubscribe.bind(this))),this._context=Ie,this._next=we,this._error=Q,this._complete=Y}next(N){if(!this.isStopped&&this._next){const{_parentSubscriber:k}=this;Oe.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?this.__tryOrSetError(k,this._next,N)&&this.unsubscribe():this.__tryOrUnsub(this._next,N)}}error(N){if(!this.isStopped){const{_parentSubscriber:k}=this,{useDeprecatedSynchronousErrorHandling:Q}=Oe.v;if(this._error)Q&&k.syncErrorThrowable?(this.__tryOrSetError(k,this._error,N),this.unsubscribe()):(this.__tryOrUnsub(this._error,N),this.unsubscribe());else if(k.syncErrorThrowable)Q?(k.syncErrorValue=N,k.syncErrorThrown=!0):(0,de.z)(N),this.unsubscribe();else{if(this.unsubscribe(),Q)throw N;(0,de.z)(N)}}}complete(){if(!this.isStopped){const{_parentSubscriber:N}=this;if(this._complete){const k=()=>this._complete.call(this._context);Oe.v.useDeprecatedSynchronousErrorHandling&&N.syncErrorThrowable?(this.__tryOrSetError(N,k),this.unsubscribe()):(this.__tryOrUnsub(k),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(N,k){try{N.call(this._context,k)}catch(Q){if(this.unsubscribe(),Oe.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,de.z)(Q)}}__tryOrSetError(N,k,Q){if(!Oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{k.call(this._context,Q)}catch(Y){return Oe.v.useDeprecatedSynchronousErrorHandling?(N.syncErrorValue=Y,N.syncErrorThrown=!0,!0):((0,de.z)(Y),!0)}return!1}_unsubscribe(){const{_parentSubscriber:N}=this;this._context=null,this._parentSubscriber=null,N.unsubscribe()}}},319:(tt,be,V)=>{"use strict";V.d(be,{w:()=>de});var f=V(796),H=V(555),O=V(105);const Oe=(()=>{function Ae(se){return Error.call(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((N,k)=>`${k+1}) ${N.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se,this}return Ae.prototype=Object.create(Error.prototype),Ae})();class de{constructor(se){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,se&&(this._ctorUnsubscribe=!0,this._unsubscribe=se)}unsubscribe(){let se;if(this.closed)return;let{_parentOrParents:N,_ctorUnsubscribe:k,_unsubscribe:Q,_subscriptions:Y}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,N instanceof de)N.remove(this);else if(null!==N)for(let we=0;we<N.length;++we)N[we].remove(this);if((0,O.m)(Q)){k&&(this._unsubscribe=void 0);try{Q.call(this)}catch(we){se=we instanceof Oe?ve(we.errors):[we]}}if((0,f.k)(Y)){let we=-1,Ie=Y.length;for(;++we<Ie;){const ue=Y[we];if((0,H.K)(ue))try{ue.unsubscribe()}catch(G){se=se||[],G instanceof Oe?se=se.concat(ve(G.errors)):se.push(G)}}}if(se)throw new Oe(se)}add(se){let N=se;if(!se)return de.EMPTY;switch(typeof se){case"function":N=new de(se);case"object":if(N===this||N.closed||"function"!=typeof N.unsubscribe)return N;if(this.closed)return N.unsubscribe(),N;if(!(N instanceof de)){const Y=N;N=new de,N._subscriptions=[Y]}break;default:throw new Error("unrecognized teardown "+se+" added to Subscription.")}let{_parentOrParents:k}=N;if(null===k)N._parentOrParents=this;else if(k instanceof de){if(k===this)return N;N._parentOrParents=[k,this]}else{if(-1!==k.indexOf(this))return N;k.push(this)}const Q=this._subscriptions;return null===Q?this._subscriptions=[N]:Q.push(N),N}remove(se){const N=this._subscriptions;if(N){const k=N.indexOf(se);-1!==k&&N.splice(k,1)}}}var Ae;function ve(Ae){return Ae.reduce((se,N)=>se.concat(N instanceof Oe?N.errors:N),[])}de.EMPTY=((Ae=new de).closed=!0,Ae)},494:(tt,be,V)=>{"use strict";V.d(be,{v:()=>H});let f=!1;const H={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const pe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+pe.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=O},get useDeprecatedSynchronousErrorHandling(){return f}}},345:(tt,be,V)=>{"use strict";V.d(be,{IY:()=>pe,Ds:()=>de,ft:()=>Ae});var f=V(393),H=V(574),O=V(444);class pe extends f.L{constructor(N){super(),this.parent=N}_next(N){this.parent.notifyNext(N)}_error(N){this.parent.notifyError(N),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class de extends f.L{notifyNext(N){this.destination.next(N)}notifyError(N){this.destination.error(N)}notifyComplete(){this.destination.complete()}}function Ae(se,N){if(N.closed)return;if(se instanceof H.y)return se.subscribe(N);let k;try{k=(0,O.s)(se)(N)}catch(Q){N.error(Q)}return k}},441:(tt,be,V)=>{"use strict";V.d(be,{c:()=>Oe,N:()=>de});var f=V(765),H=V(574),O=V(319),pe=V(307);class Oe extends H.y{constructor(k,Q){super(),this.source=k,this.subjectFactory=Q,this._refCount=0,this._isComplete=!1}_subscribe(k){return this.getSubject().subscribe(k)}getSubject(){const k=this._subject;return(!k||k.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let k=this._connection;return k||(this._isComplete=!1,k=this._connection=new O.w,k.add(this.source.subscribe(new ve(this.getSubject(),this))),k.closed&&(this._connection=null,k=O.w.EMPTY)),k}refCount(){return(0,pe.x)()(this)}}const de=(()=>{const N=Oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:N._subscribe},_isComplete:{value:N._isComplete,writable:!0},getSubject:{value:N.getSubject},connect:{value:N.connect},refCount:{value:N.refCount}}})();class ve extends f.Yc{constructor(k,Q){super(k),this.connectable=Q}_error(k){this._unsubscribe(),super._error(k)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const k=this.connectable;if(k){this.connectable=null;const Q=k._connection;k._refCount=0,k._subject=null,k._connection=null,Q&&Q.unsubscribe()}}}},402:(tt,be,V)=>{"use strict";V.d(be,{D:()=>Ie});var f=V(574),H=V(444),O=V(319),pe=V(554),ve=V(87),Ae=V(377),k=V(72),Q=V(489);function Ie(ue,G){return G?function(ue,G){if(null!=ue){if(function(ue){return ue&&"function"==typeof ue[pe.L]}(ue))return function(ue,G){return new f.y(ce=>{const he=new O.w;return he.add(G.schedule(()=>{const Se=ue[pe.L]();he.add(Se.subscribe({next($e){he.add(G.schedule(()=>ce.next($e)))},error($e){he.add(G.schedule(()=>ce.error($e)))},complete(){he.add(G.schedule(()=>ce.complete()))}}))})),he})}(ue,G);if((0,k.t)(ue))return function(ue,G){return new f.y(ce=>{const he=new O.w;return he.add(G.schedule(()=>ue.then(Se=>{he.add(G.schedule(()=>{ce.next(Se),he.add(G.schedule(()=>ce.complete()))}))},Se=>{he.add(G.schedule(()=>ce.error(Se)))}))),he})}(ue,G);if((0,Q.z)(ue))return(0,ve.r)(ue,G);if(function(ue){return ue&&"function"==typeof ue[Ae.hZ]}(ue)||"string"==typeof ue)return function(ue,G){if(!ue)throw new Error("Iterable cannot be null");return new f.y(ce=>{const he=new O.w;let Se;return he.add(()=>{Se&&"function"==typeof Se.return&&Se.return()}),he.add(G.schedule(()=>{Se=ue[Ae.hZ](),he.add(G.schedule(function(){if(ce.closed)return;let $e,_t;try{const Fe=Se.next();$e=Fe.value,_t=Fe.done}catch(Fe){return void ce.error(Fe)}_t?ce.complete():(ce.next($e),this.schedule())}))})),he})}(ue,G)}throw new TypeError((null!==ue&&typeof ue||ue)+" is not observable")}(ue,G):ue instanceof f.y?ue:new f.y((0,H.s)(ue))}},693:(tt,be,V)=>{"use strict";V.d(be,{n:()=>pe});var f=V(574),H=V(15),O=V(87);function pe(Oe,de){return de?(0,O.r)(Oe,de):new f.y((0,H.V)(Oe))}},682:(tt,be,V)=>{"use strict";V.d(be,{T:()=>Oe});var f=V(574),H=V(869),O=V(282),pe=V(693);function Oe(...de){let ve=Number.POSITIVE_INFINITY,Ae=null,se=de[de.length-1];return(0,H.K)(se)?(Ae=de.pop(),de.length>1&&"number"==typeof de[de.length-1]&&(ve=de.pop())):"number"==typeof se&&(ve=de.pop()),null===Ae&&1===de.length&&de[0]instanceof f.y?de[0]:(0,O.J)(ve)((0,pe.n)(de,Ae))}},2:(tt,be,V)=>{"use strict";V.d(be,{U:()=>H});var f=V(393);function H(Oe,de){return function(Ae){if("function"!=typeof Oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ae.lift(new O(Oe,de))}}class O{constructor(de,ve){this.project=de,this.thisArg=ve}call(de,ve){return ve.subscribe(new pe(de,this.project,this.thisArg))}}class pe extends f.L{constructor(de,ve,Ae){super(de),this.project=ve,this.count=0,this.thisArg=Ae||this}_next(de){let ve;try{ve=this.project.call(this.thisArg,de,this.count++)}catch(Ae){return void this.destination.error(Ae)}this.destination.next(ve)}}},282:(tt,be,V)=>{"use strict";V.d(be,{J:()=>O});var f=V(773),H=V(487);function O(pe=Number.POSITIVE_INFINITY){return(0,f.zg)(H.y,pe)}},773:(tt,be,V)=>{"use strict";V.d(be,{zg:()=>pe});var f=V(2),H=V(402),O=V(345);function pe(Ae,se,N=Number.POSITIVE_INFINITY){return"function"==typeof se?k=>k.pipe(pe((Q,Y)=>(0,H.D)(Ae(Q,Y)).pipe((0,f.U)((we,Ie)=>se(Q,we,Y,Ie))),N)):("number"==typeof se&&(N=se),k=>k.lift(new Oe(Ae,N)))}class Oe{constructor(se,N=Number.POSITIVE_INFINITY){this.project=se,this.concurrent=N}call(se,N){return N.subscribe(new de(se,this.project,this.concurrent))}}class de extends O.Ds{constructor(se,N,k=Number.POSITIVE_INFINITY){super(se),this.project=N,this.concurrent=k,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(se){this.active<this.concurrent?this._tryNext(se):this.buffer.push(se)}_tryNext(se){let N;const k=this.index++;try{N=this.project(se,k)}catch(Q){return void this.destination.error(Q)}this.active++,this._innerSub(N)}_innerSub(se){const N=new O.IY(this),k=this.destination;k.add(N);const Q=(0,O.ft)(se,N);Q!==N&&k.add(Q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(se){this.destination.next(se)}notifyComplete(){const se=this.buffer;this.active--,se.length>0?this._next(se.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},307:(tt,be,V)=>{"use strict";V.d(be,{x:()=>H});var f=V(393);function H(){return function(de){return de.lift(new O(de))}}class O{constructor(de){this.connectable=de}call(de,ve){const{connectable:Ae}=this;Ae._refCount++;const se=new pe(de,Ae),N=ve.subscribe(se);return se.closed||(se.connection=Ae.connect()),N}}class pe extends f.L{constructor(de,ve){super(de),this.connectable=ve}_unsubscribe(){const{connectable:de}=this;if(!de)return void(this.connection=null);this.connectable=null;const ve=de._refCount;if(ve<=0)return void(this.connection=null);if(de._refCount=ve-1,ve>1)return void(this.connection=null);const{connection:Ae}=this,se=de._connection;this.connection=null,se&&(!Ae||se===Ae)&&se.unsubscribe()}}},87:(tt,be,V)=>{"use strict";V.d(be,{r:()=>O});var f=V(574),H=V(319);function O(pe,Oe){return new f.y(de=>{const ve=new H.w;let Ae=0;return ve.add(Oe.schedule(function(){Ae!==pe.length?(de.next(pe[Ae++]),de.closed||ve.add(this.schedule())):de.complete()})),ve})}},377:(tt,be,V)=>{"use strict";V.d(be,{hZ:()=>H});const H="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},554:(tt,be,V)=>{"use strict";V.d(be,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},181:(tt,be,V)=>{"use strict";V.d(be,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},971:(tt,be,V)=>{"use strict";V.d(be,{N:()=>H});const H=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},449:(tt,be,V)=>{"use strict";function f(H){setTimeout(()=>{throw H},0)}V.d(be,{z:()=>f})},487:(tt,be,V)=>{"use strict";function f(H){return H}V.d(be,{y:()=>f})},796:(tt,be,V)=>{"use strict";V.d(be,{k:()=>f});const f=Array.isArray||(H=>H&&"number"==typeof H.length)},489:(tt,be,V)=>{"use strict";V.d(be,{z:()=>f});const f=H=>H&&"number"==typeof H.length&&"function"!=typeof H},105:(tt,be,V)=>{"use strict";function f(H){return"function"==typeof H}V.d(be,{m:()=>f})},555:(tt,be,V)=>{"use strict";function f(H){return null!==H&&"object"==typeof H}V.d(be,{K:()=>f})},72:(tt,be,V)=>{"use strict";function f(H){return!!H&&"function"!=typeof H.subscribe&&"function"==typeof H.then}V.d(be,{t:()=>f})},869:(tt,be,V)=>{"use strict";function f(H){return H&&"function"==typeof H.schedule}V.d(be,{K:()=>f})},444:(tt,be,V)=>{"use strict";V.d(be,{s:()=>k});var f=V(15),H=V(449),pe=V(377),de=V(554),Ae=V(489),se=V(72),N=V(555);const k=Q=>{if(Q&&"function"==typeof Q[de.L])return(Q=>Y=>{const we=Q[de.L]();if("function"!=typeof we.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return we.subscribe(Y)})(Q);if((0,Ae.z)(Q))return(0,f.V)(Q);if((0,se.t)(Q))return(Q=>Y=>(Q.then(we=>{Y.closed||(Y.next(we),Y.complete())},we=>Y.error(we)).then(null,H.z),Y))(Q);if(Q&&"function"==typeof Q[pe.hZ])return(Q=>Y=>{const we=Q[pe.hZ]();for(;;){let Ie;try{Ie=we.next()}catch(ue){return Y.error(ue),Y}if(Ie.done){Y.complete();break}if(Y.next(Ie.value),Y.closed)break}return"function"==typeof we.return&&Y.add(()=>{we.return&&we.return()}),Y})(Q);{const we=`You provided ${(0,N.K)(Q)?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(we)}}},15:(tt,be,V)=>{"use strict";V.d(be,{V:()=>f});const f=H=>O=>{for(let pe=0,Oe=H.length;pe<Oe&&!O.closed;pe++)O.next(H[pe]);O.complete()}},136:(tt,be,V)=>{"use strict";var f=V(18);let H=null;function O(){return H}const ve=new f.OlP("DocumentToken");let Ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:se,token:n,providedIn:"platform"}),n})();function se(){return(0,f.LFG)(k)}const N=new f.OlP("Location Initialized");let k=(()=>{class n extends Ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){Q()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){Q()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=(0,f.Yz7)({factory:Y,token:n,providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Y(){return new k((0,f.LFG)(ve))}function we(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ue(n){return n&&"?"!==n[0]?"?"+n:n}let G=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:ce,token:n,providedIn:"root"}),n})();function ce(n){const e=(0,f.LFG)(ve).location;return new Se((0,f.LFG)(Ae),e&&e.origin||"")}const he=new f.OlP("appBaseHref");let Se=(()=>{class n extends G{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return we(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ue(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,c){const h=this.prepareExternalUrl(a+ue(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){const h=this.prepareExternalUrl(a+ue(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ae),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n extends G{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=we(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,c){let h=this.prepareExternalUrl(a+ue(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){let h=this.prepareExternalUrl(a+ue(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ae),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_t=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ie(bt(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ue(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,bt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ue(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ue(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(G),f.LFG(Ae))},n.normalizeQueryParams=ue,n.joinWithSlash=we,n.stripTrailingSlash=Ie,n.\u0275prov=(0,f.Yz7)({factory:Fe,token:n,providedIn:"root"}),n})();function Fe(){return new _t((0,f.LFG)(G),(0,f.LFG)(Ae))}function bt(n){return n.replace(/\/index.html$/,"")}var Et=(()=>((Et=Et||{})[Et.Zero=0]="Zero",Et[Et.One=1]="One",Et[Et.Two=2]="Two",Et[Et.Few=3]="Few",Et[Et.Many=4]="Many",Et[Et.Other=5]="Other",Et))();const _e=f.kL8;class Ar{}let da=(()=>{class n extends Ar{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(_e(r||this.locale)(t)){case Et.Zero:return"zero";case Et.One:return"one";case Et.Two:return"two";case Et.Few:return"few";case Et.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Qc{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _s=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((a,c,h)=>{if(null==a.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new Qc(null,this._ngForOf,-1,-1),null===h?void 0:h),w=new Fn(a,_);r.push(w)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const _=this._viewContainer.get(c);this._viewContainer.move(_,h);const w=new Fn(a,_);r.push(w)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=c,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Fn{constructor(e,t){this.record=e,this.view=t}}let Gn=(()=>{class n{constructor(t,r,a){this._ngEl=t,this._differs=r,this._renderer=a,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[a,c]=t.split(".");null!=(r=null!=r&&c?`${r}${c}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,a,r):this._renderer.removeStyle(this._ngEl.nativeElement,a)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),$p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:Ar,useClass:da}]}),n})();function Ou(n){return"server"===n}let rh=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new ih((0,f.LFG)(ve),window)}),n})();class ih{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const c=a.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ns(this.window.history)||ns(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ns(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class No extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new No,H||(H=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Xr=Xr||document.querySelector("base"),Xr?Xr.getAttribute("href"):null);return null==t?null:function(n){ko=ko||document.createElement("a"),ko.setAttribute("href",n);const e=ko.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Xr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let ko,Xr=null;const gy=new f.OlP("TRANSITION_ID"),my=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[gy,ve,f.zs3],multi:!0}];class zt{static init(){(0,f.VLi)(new zt)}addToWindow(e){f.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const a=f.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const _=function(w){h=h||w,c--,0==c&&r(h)};a.forEach(function(w){w.whenStable(_)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _y=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Js=new f.OlP("EventManagerPlugins");let ya=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Js),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class sl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=O().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let Fu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),va=(()=>{class n extends Fu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ol),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ol))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ol(n){O().remove(n)}const le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vt=/%COMP%/g;function Ea(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Ea(n,a,t):(a=a.replace(vt,n),t.push(a))}return t}function uh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Xs=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new ws(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new eo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case f.ifc.ShadowDom:return new bs(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Ea(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ya),f.LFG(va),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class ws{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(le[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=le[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=le[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,a&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,uh(r)):this.eventManager.addEventListener(e,t,uh(r))}}class eo extends ws{constructor(e,t,r,a){super(e),this.component=r;const c=Ea(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(vt,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(vt,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class bs extends ws{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Ea(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const _=document.createElement("style");_.textContent=c[h],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let dh=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Bu=["alt","control","meta","shift"],cl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let to=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="";if(Bu.forEach(w=>{const I=r.indexOf(w);I>-1&&(r.splice(I,1),h+=w+".")}),h+=c,0!=r.length||0===c.length)return null;const _={};return _.domEventName=a,_.fullKey=h,_}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&gh.hasOwnProperty(e)&&(e=gh[e]))}return cl[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Bu.forEach(c=>{c!=a&&sr[c](t)&&(r+=c+".")}),r+=a,r}static eventCallback(t,r,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ve))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const wy=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){No.makeCurrent(),zt.init()},multi:!0},{provide:ve,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),no=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:Js,useClass:dh,multi:!0,deps:[ve,f.R0b,f.Lbi]},{provide:Js,useClass:to,multi:!0,deps:[ve]},[],{provide:Xs,useClass:Xs,deps:[ya,va,f.AFp]},{provide:f.FYo,useExisting:Xs},{provide:Fu,useExisting:va},{provide:va,useClass:va,deps:[ve]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:ya,useClass:ya,deps:[Js,f.R0b]},{provide:class{},useClass:_y,deps:[]},[]];let $u=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:gy,useExisting:f.AFp},my]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:no,imports:[$p,f.hGG]}),n})();"undefined"!=typeof window&&window;var Kt=V(402),Ah=V(869),tg=V(693),dl=V(87);function ze(...n){let e=n[n.length-1];return(0,Ah.K)(e)?(n.pop(),(0,dl.r)(n,e)):(0,tg.n)(n)}var Cs=V(765),Vo=V(971);class jr extends Cs.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Vo.N;return this._value}next(e){super.next(this._value=e)}}var hl=V(796),Ln=V(393);class ng extends Ln.L{notifyNext(e,t,r,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class kn extends Ln.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var rg=V(444),Vn=V(574);function Ty(n,e,t,r,a=new kn(n,t,r)){if(!a.closed)return e instanceof Vn.y?e.subscribe(a):(0,rg.s)(e)(a)}const Uo={};class Ay{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Sh(e,this.resultSelector))}}class Sh extends ng{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Uo),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Ty(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,h=this.toRespond?a[r]===Uo?--this.toRespond:this.toRespond:0;a[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const pi=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var ba=V(282);function io(...n){return(0,ba.J)(1)(ze(...n))}const ki=new Vn.y(n=>n.complete());function Oi(n){return n?function(n){return new Vn.y(e=>n.schedule(()=>e.complete()))}(n):ki}function so(n){return new Vn.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,Kt.D)(t):Oi()).subscribe(e)})}var Rh=V(441),it=V(2),Ca=V(345);function or(n,e){return"function"==typeof e?t=>t.pipe(or((r,a)=>(0,Kt.D)(n(r,a)).pipe((0,it.U)((c,h)=>e(r,c,a,h))))):t=>t.lift(new Ry(n))}class Ry{constructor(e){this.project=e}call(e,t){return t.subscribe(new SA(e,this.project))}}class SA extends Ca.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Ca.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,Ca.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const fn=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function xh(n){return e=>0===n?Oi():e.lift(new ig(n))}class ig{constructor(e){if(this.total=e,this.total<0)throw new fn}call(e,t){return t.subscribe(new sg(e,this.total))}}class sg extends Ln.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Mh(...n){const e=n[n.length-1];return(0,Ah.K)(e)?(n.pop(),t=>io(n,t,e)):t=>io(n,t)}function zu(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new My(n,e,t))}}class My{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new g0(e,this.accumulator,this.seed,this.hasSeed))}}class g0 extends Ln.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function oo(n,e){return function(r){return r.lift(new Nh(n,e))}}class Nh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new m0(e,this.predicate,this.thisArg))}}class m0 extends Ln.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Ia(n){return function(t){const r=new Ku(n),a=t.lift(r);return r.caught=a}}class Ku{constructor(e){this.selector=e}call(e,t){return t.subscribe(new og(e,this.selector,this.caught))}}class og extends Ca.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new Ca.IY(this);this.add(r);const a=(0,Ca.ft)(t,r);a!==r&&this.add(a)}}}var Mt=V(773);function ao(n,e){return(0,Mt.zg)(n,e,1)}function Da(n){return function(t){return 0===n?Oi():t.lift(new _0(n))}}class _0{constructor(e){if(this.total=e,this.total<0)throw new fn}call(e,t){return t.subscribe(new Ny(e,this.total))}}class Ny extends Ln.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(a[h])}}e.complete()}}function $r(n=$o){return e=>e.lift(new is(n))}class is{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new fl(e,this.errorFactory))}}class fl extends Ln.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function $o(){return new pi}function Pi(n=null){return e=>e.lift(new ag(n))}class ag{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new kh(e,this.defaultValue))}}class kh extends Ln.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ug=V(487);function Ta(n,e){const t=arguments.length>=2;return r=>r.pipe(n?oo((a,c)=>n(a,c,r)):ug.y,xh(1),t?Pi(e):$r(()=>new pi))}function Fi(){}var Er=V(105);function Zn(n,e,t){return function(a){return a.lift(new Aa(n,e,t))}}class Aa{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new lg(e,this.nextOrObserver,this.error,this.complete))}}class lg extends Ln.L{constructor(e,t,r,a){super(e),this._tapNext=Fi,this._tapError=Fi,this._tapComplete=Fi,this._tapError=r||Fi,this._tapComplete=a||Fi,(0,Er.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||Fi,this._tapError=t.error||Fi,this._tapComplete=t.complete||Fi)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}var dg=V(307),Is=V(319);function pl(n){return e=>e.lift(new ky(n))}class ky{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Oy(e,this.callback))}}class Oy extends Ln.L{constructor(e,t){super(e),this.add(new Is.w(t))}}class Ds{constructor(e,t){this.id=e,this.url=t}}class Ts extends Ds{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uo extends Ds{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yu extends Ds{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class y0 extends Ds{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ho extends Ds{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oh extends Ds{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class co extends Ds{constructor(e,t,r,a,c){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Py extends Ds{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ph extends Ds{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ml{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fh{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lo{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _l{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const He="primary";class hg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sa(n){return new hg(n)}const As="ngNavigationCancelingError";function qo(n){const e=Error("NavigationCancelingError: "+n);return e[As]=!0,e}function yl(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let c=0;c<r.length;c++){const h=r[c],_=n[c];if(h.startsWith(":"))a[h.substring(1)]=_;else if(h!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function Ss(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!Rs(n[a],e[a]))return!1;return!0}function Rs(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,c)=>r[c]===a)}return n===e}function ss(n){return Array.prototype.concat.apply([],n)}function Ju(n){return n.length>0?n[n.length-1]:null}function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ti(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Kt.D)(Promise.resolve(n)):ze(n)}const Ra={exact:function ho(n,e,t){if(!Ns(n.segments,e.segments)||!Ma(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ho(n.children[r],e.children[r],t))return!1;return!0},subset:Vh},vl={exact:function(n,e){return Ss(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Rs(n[t],e[t]))},ignored:()=>!0};function El(n,e,t){return Ra[t.paths](n.root,e.root,t.matrixParams)&&vl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vh(n,e,t){return Vy(n,e,e.segments,t)}function Vy(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!Ns(a,t)||e.hasChildren()||!Ma(a,t,r))}if(n.segments.length===t.length){if(!Ns(n.segments,t)||!Ma(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!Vh(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Ns(n.segments,a)&&Ma(n.segments,a,r)&&n.children[He])&&Vy(n.children[He],e,c,r)}}function Ma(n,e,t){return e.every((r,a)=>vl[t](n[a].parameters,r.parameters))}class Ms{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sa(this.queryParams)),this._queryParamMap}toString(){return By.serialize(this)}}class Dt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ar(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Go(this)}}class ec{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sa(this.parameters)),this._parameterMap}toString(){return gg(this)}}function Ns(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class tc{}class fo{parse(e){const t=new qy(e);return new Ms(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${bl(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${Na(t)}=${Na(a)}`).join("&"):`${Na(t)}=${Na(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const By=new fo;function Go(n){return n.segments.map(e=>gg(e)).join("/")}function bl(n,e){if(!n.hasChildren())return Go(n);if(e){const t=n.children[He]?bl(n.children[He],!1):"",r=[];return ar(n.children,(a,c)=>{c!==He&&r.push(`${c}:${bl(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return ar(n.children,(r,a)=>{a===He&&(t=t.concat(e(r,a)))}),ar(n.children,(r,a)=>{a!==He&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===He?[bl(n.children[He],!1)]:[`${a}:${bl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[He]?`${Go(n)}/${t[0]}`:`${Go(n)}/(${t.join("//")})`}}function nc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Na(n){return nc(n).replace(/%3B/gi,";")}function Cl(n){return nc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rc(n){return decodeURIComponent(n)}function po(n){return rc(n.replace(/\+/g,"%20"))}function gg(n){return`${Cl(n.path)}${function(n){return Object.keys(n).map(e=>`;${Cl(e)}=${Cl(n[e])}`).join("")}(n.parameters)}`}const $y=/^[^\/()?;=#]+/;function Il(n){const e=n.match($y);return e?e[0]:""}const ks=/^[^=?&#]+/,Bh=/^[^?&#]+/;class qy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dt([],{}):new Dt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[He]=new Dt(e,t)),r}parseSegment(){const e=Il(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ec(rc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Il(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=Il(this.remaining);a&&(r=a,this.capture(r))}e[rc(t)]=rc(r)}parseQueryParam(e){const t=function(n){const e=n.match(ks);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(Bh);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=po(t),c=po(r);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Il(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=He);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[He]:new Dt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class mg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ic(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return ic(e,this._root).map(t=>t.value)}}function jh(n,e){if(n===e.value)return e;for(const t of e.children){const r=jh(n,t);if(r)return r}return null}function ic(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ic(n,t);if(r.length)return r.unshift(e),r}return[]}class os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _g extends mg{constructor(e,t){super(e),this.snapshot=t,zo(this,e)}toString(){return this.snapshot.toString()}}function $h(n,e){const t=function(n,e){const h=new Pa([],{},{},"",{},He,e,null,n.root,-1,{});return new Li("",new os(h,[]))}(n,e),r=new jr([new ec("",{})]),a=new jr({}),c=new jr({}),h=new jr({}),_=new jr(""),w=new Wo(r,a,h,_,c,He,e,t.root);return w.snapshot=t.root,new _g(new os(w,[]),t)}class Wo{constructor(e,t,r,a,c,h,_,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=_,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>Sa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>Sa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],c=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Pa{constructor(e,t,r,a,c,h,_,w,I,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=_,this.routeConfig=w,this._urlSegment=I,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Li extends mg{constructor(e,t){super(t),this.url=e,zo(this,t)}toString(){return Hh(this._root)}}function zo(n,e){e.value._routerState=n,e.children.forEach(t=>zo(n,t))}function Hh(n){const e=n.children.length>0?` { ${n.children.map(Hh).join(", ")} } `:"";return`${n.value}${e}`}function qh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ss(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ss(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ss(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ss(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function v(n,e){return Ss(n.params,e.params)&&function(n,e){return Ns(n,e)&&n.every((t,r)=>Ss(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||v(n.parent,e.parent))}function m(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return m(n,r,a);return m(n,r)})}(n,e,t);return new os(r,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return b(e,h),h}}const r=function(n){return new Wo(new jr(n.url),new jr(n.params),new jr(n.queryParams),new jr(n.fragment),new jr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>m(n,c));return new os(r,a)}}function b(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)b(n.children[t],e.children[t])}function re(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ne(n){return"object"==typeof n&&null!=n&&n.outlets}function Ce(n,e,t,r,a){let c={};return r&&ar(r,(h,_)=>{c[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new Ms(t.root===n?e:Ke(t.root,n,e),c,a)}function Ke(n,e,t){const r={};return ar(n.children,(a,c)=>{r[c]=a===e?t:Ke(a,e,t)}),new Dt(n.segments,r)}class Ot{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&re(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(Ne);if(a&&a!==Ju(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ur{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sc(n,e,t){if(n||(n=new Dt([],{})),0===n.segments.length&&n.hasChildren())return oc(n,e,t);const r=function(n,e,t){let r=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return c;const h=n.segments[a],_=t[r];if(Ne(_))break;const w=`${_}`,I=r<t.length-1?t[r+1]:null;if(a>0&&void 0===w)break;if(w&&I&&"object"==typeof I&&void 0===I.outlets){if(!Al(w,I,h))return c;r+=2}else{if(!Al(w,{},h))return c;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Dt(n.segments.slice(0,r.pathIndex),{});return c.children[He]=new Dt(n.segments.slice(r.pathIndex),n.children),oc(c,0,a)}return r.match&&0===a.length?new Dt(n.segments,{}):r.match&&!n.hasChildren()?Tl(n,e,t):r.match?oc(n,0,a):Tl(n,e,t)}function oc(n,e,t){if(0===t.length)return new Dt(n.segments,{});{const r=function(n){return Ne(n[0])?n[0].outlets:{[He]:n}}(t),a={};return ar(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[h]=sc(n.children[h],e,c))}),ar(n.children,(c,h)=>{void 0===r[h]&&(a[h]=c)}),new Dt(n.segments,a)}}function Tl(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(Ne(c)){const w=vg(c.outlets);return new Dt(r,w)}if(0===a&&re(t[0])){r.push(new ec(n.segments[e].path,Fa(t[0]))),a++;continue}const h=Ne(c)?c.outlets[He]:`${c}`,_=a<t.length-1?t[a+1]:null;h&&_&&re(_)?(r.push(new ec(h,Fa(_))),a+=2):(r.push(new ec(h,{})),a++)}return new Dt(r,{})}function vg(n){const e={};return ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tl(new Dt([],{}),0,t))}),e}function Fa(n){const e={};return ar(n,(t,r)=>e[r]=`${t}`),e}function Al(n,e,t){return n==t.path&&Ss(e,t.parameters)}class Gh{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=Zo(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,a[h],r),delete a[h]}),ar(a,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,c=Zo(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=Zo(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],r),this.forwardEvent(new lo(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Lh(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(qh(a),a===c)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const _=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(_.contexts),h.attachRef=_.componentRef,h.route=_.route.value,h.outlet&&h.outlet.attach(_.componentRef,_.route.value),Eg(_.route)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),w=_?_.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=w,h.outlet&&h.outlet.activateWith(a,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function Eg(n){qh(n.value),n.children.forEach(Eg)}class Wy{constructor(e,t){this.routes=e,this.module=t}}function ac(n){return"function"==typeof n}function Ps(n){return n instanceof Ms}const Wn=Symbol("INITIAL_VALUE");function Yo(){return or(n=>function(...n){let e,t;return(0,Ah.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,hl.k)(n[0])&&(n=n[0]),(0,tg.n)(n,t).lift(new Ay(e))}(n.map(e=>e.pipe(xh(1),Mh(Wn)))).pipe(zu((e,t)=>{let r=!1;return t.reduce((a,c,h)=>a!==Wn?a:(c===Wn&&(r=!0),r||!1!==c&&h!==t.length-1&&!Ps(c)?a:c),e)},Wn),oo(e=>e!==Wn),(0,it.U)(e=>Ps(e)?e:!0===e),xh(1)))}let wg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[Og]},encapsulation:2}),n})();function w0(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];xA(r,b0(e,r))}}function xA(n,e){n.children&&w0(n.children,e)}function b0(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ky(n){const e=n.children&&n.children.map(Ky),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==He&&(t.component=wg),t}function Vi(n){return n.outlet||He}function C0(n,e){const t=n.filter(r=>Vi(r)===e);return t.push(...n.filter(r=>Vi(r)!==e)),t}const Yy={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function bg(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Yy):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||yl)(t,n,e);if(!c)return Object.assign({},Yy);const h={};ar(c.posParams,(w,I)=>{h[I]=w.path});const _=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:_,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function Cg(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ig(n,e,r)&&Vi(r)!==He)}(n,t,r)){const h=new Dt(e,function(n,e,t,r){const a={};a[He]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&Vi(c)!==He){const h=new Dt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[Vi(c)]=h}return a}(n,e,r,new Dt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ig(n,e,r))}(n,t,r)){const h=new Dt(n.segments,function(n,e,t,r,a,c){const h={};for(const _ of r)if(Ig(n,t,_)&&!a[Vi(_)]){const w=new Dt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[Vi(_)]=w}return Object.assign(Object.assign({},a),h)}(n,e,t,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new Dt(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Ig(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function NA(n,e,t,r){return!!(Vi(n)===r||r!==He&&Ig(e,t,n))&&("**"===n.path||bg(e,n,t).matched)}function Jy(n,e,t){return 0===e.length&&!n.children[t]}class La{constructor(e){this.segmentGroup=e||null}}class T0{constructor(e){this.urlTree=e}}function Dg(n){return new Vn.y(e=>e.error(new La(n)))}function uc(n){return new Vn.y(e=>e.error(new T0(n)))}function kA(n){return new Vn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class FA{constructor(e,t,r,a,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Cg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Dt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,He).pipe((0,it.U)(c=>this.createUrlTree(Sl(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ia(c=>{if(c instanceof T0)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof La?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,He).pipe((0,it.U)(a=>this.createUrlTree(Sl(a),e.queryParams,e.fragment))).pipe(Ia(a=>{throw a instanceof La?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new Dt([],{[He]:e}):e;return new Ms(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(c=>new Dt([],c))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const c of Object.keys(r.children))"primary"===c?a.unshift(c):a.push(c);return(0,Kt.D)(a).pipe(ao(c=>{const h=r.children[c],_=C0(t,c);return this.expandSegmentGroup(e,_,h,c).pipe((0,it.U)(w=>({segment:w,outlet:c})))}),zu((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?oo((a,c)=>n(a,c,r)):ug.y,Da(1),t?Pi(e):$r(()=>new pi))}())}expandSegment(e,t,r,a,c,h){return(0,Kt.D)(r).pipe(ao(_=>this.expandSegmentAgainstRoute(e,t,r,_,a,c,h).pipe(Ia(I=>{if(I instanceof La)return ze(null);throw I}))),Ta(_=>!!_),Ia((_,w)=>{if(_ instanceof pi||"EmptyError"===_.name){if(Jy(t,a,c))return ze(new Dt([],{}));throw new La(t)}throw _}))}expandSegmentAgainstRoute(e,t,r,a,c,h,_){return NA(a,t,c,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,h):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h):Dg(t):Dg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?uc(c):this.lineralizeSegments(r,c).pipe((0,Mt.zg)(h=>{const _=new Dt(h,{});return this.expandSegment(e,_,t,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){const{matched:_,consumedSegments:w,lastChild:I,positionalParamSegments:A}=bg(t,a,c);if(!_)return Dg(t);const x=this.applyRedirectCommands(w,a.redirectTo,A);return a.redirectTo.startsWith("/")?uc(x):this.lineralizeSegments(a,x).pipe((0,Mt.zg)(F=>this.expandSegment(e,t,r,F.concat(c.slice(I)),h,!1)))}matchSegmentAgainstRoute(e,t,r,a,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ze(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,it.U)(F=>(r._loadedConfig=F,new Dt(a,{})))):ze(new Dt(a,{}));const{matched:h,consumedSegments:_,lastChild:w}=bg(t,r,a);if(!h)return Dg(t);const I=a.slice(w);return this.getChildConfig(e,r,a).pipe((0,Mt.zg)(x=>{const F=x.module,Z=x.routes,{segmentGroup:te,slicedSegments:Ee}=Cg(t,_,I,Z),Te=new Dt(te.segments,te.children);if(0===Ee.length&&Te.hasChildren())return this.expandChildren(F,Z,Te).pipe((0,it.U)(Qe=>new Dt(_,Qe)));if(0===Z.length&&0===Ee.length)return ze(new Dt(_,{}));const Xe=Vi(r)===c;return this.expandSegment(F,Te,Z,Ee,Xe?He:c,!0).pipe((0,it.U)(mt=>new Dt(_.concat(mt.segments),mt.children)))}))}getChildConfig(e,t,r){return t.children?ze(new Wy(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ze(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Mt.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,it.U)(c=>(t._loadedConfig=c,c))):(n=t,new Vn.y(e=>e.error(qo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):ze(new Wy([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;return a&&0!==a.length?ze(a.map(h=>{const _=e.get(h);let w;if((n=_)&&ac(n.canLoad))w=_.canLoad(t,r);else{if(!ac(_))throw new Error("Invalid CanLoad guard");w=_(t,r)}var n;return ti(w)})).pipe(Yo(),Zn(h=>{if(!Ps(h))return;const _=qo(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw _.url=h,_}),(0,it.U)(h=>!0===h)):ze(!0)}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return ze(r);if(a.numberOfChildren>1||!a.children[He])return kA(e.redirectTo);a=a.children[He]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const c=this.createSegmentGroup(e,t.root,r,a);return new Ms(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ar(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const _=a.substring(1);r[c]=t[_]}else r[c]=a}),r}createSegmentGroup(e,t,r,a){const c=this.createSegments(e,t.segments,r,a);let h={};return ar(t.children,(_,w)=>{h[w]=this.createSegmentGroup(e,_,r,a)}),new Dt(c,h)}createSegments(e,t,r,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function Sl(n){const e={};for(const r of Object.keys(n.children)){const c=Sl(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[He]){const e=n.children[He];return new Dt(n.segments.concat(e.segments),e.children)}return n}(new Dt(n.segments,e))}class Xy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Tg{constructor(e,t){this.component=e,this.route=t}}function VA(n,e,t){const r=n._root;return Zh(r,e?e._root:null,t,[r.value])}function ev(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Zh(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=Zo(e);return n.children.forEach(h=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ns(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ns(n.url,e.url)||!Ss(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!v(n,e)||!Ss(n.queryParams,e.queryParams);case"paramsChange":default:return!v(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new Xy(r)):(c.data=h.data,c._resolvedData=h._resolvedData),Zh(n,e,c.component?_?_.children:null:t,r,a),w&&_&&_.outlet&&_.outlet.isActivated&&a.canDeactivateChecks.push(new Tg(_.outlet.component,h))}else h&&go(e,_,a),a.canActivateChecks.push(new Xy(r)),Zh(n,null,c.component?_?_.children:null:t,r,a)})(h,c[h.value.outlet],t,r.concat([h.value]),a),delete c[h.value.outlet]}),ar(c,(h,_)=>go(h,t.getContext(_),a)),a}function go(n,e,t){const r=Zo(n),a=n.value;ar(r,(c,h)=>{go(c,a.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Tg(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class jA{}function rv(n){return new Vn.y(e=>e.error(n))}class x0{constructor(e,t,r,a,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=Cg(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,He);if(null===t)return null;const r=new Pa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},He,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new os(r,t),c=new Li(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=yg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],_=C0(e,c),w=this.processSegmentGroup(_,h,c);if(null===w)return null;r.push(...w)}const a=ov(r);return a.sort((e,t)=>e.value.outlet===He?-1:t.value.outlet===He?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,r,a){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,a);if(null!==h)return h}return Jy(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!NA(e,t,r,a))return null;let c,h=[],_=[];if("**"===e.path){const Z=r.length>0?Ju(r).parameters:{};c=new Pa(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,av(e),Vi(e),e.component,e,cc(t),Ag(t)+r.length,N0(e))}else{const Z=bg(t,e,r);if(!Z.matched)return null;h=Z.consumedSegments,_=r.slice(Z.lastChild),c=new Pa(h,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,av(e),Vi(e),e.component,e,cc(t),Ag(t)+h.length,N0(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:I,slicedSegments:A}=Cg(t,h,_,w.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);var n;if(0===A.length&&I.hasChildren()){const Z=this.processChildren(w,I);return null===Z?null:[new os(c,Z)]}if(0===w.length&&0===A.length)return[new os(c,[])];const x=Vi(e)===a,F=this.processSegment(w,I,A,x?He:a);return null===F?null:[new os(c,F)]}}function sv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ov(n){const e=[],t=new Set;for(const r of n){if(!sv(r)){e.push(r);continue}const a=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=ov(r.children);e.push(new os(r.value,a))}return e.filter(r=>!t.has(r))}function cc(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ag(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function av(n){return n.data||{}}function N0(n){return n.resolve||{}}function cv(n){return or(e=>{const t=n(e);return t?(0,Kt.D)(t).pipe((0,it.U)(()=>e)):ze(e)})}class lv extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Sg=new f.OlP("ROUTES");class Rg{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,it.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new Wy(ss(h.injector.get(Sg,void 0,f.XFs.Self|f.XFs.Optional)).map(Ky),h)}),Ia(c=>{throw t._loader$=void 0,c}));return t._loader$=new Rh.c(a,()=>new Cs.xQ).pipe((0,dg.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Kt.D)(this.loader.load(e)):ti(e()).pipe((0,Mt.zg)(t=>t instanceof f.YKP?ze(t):(0,Kt.D)(this.compiler.compileModuleAsync(t))))}}class WA{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rl,this.attachRef=null}}class Rl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new WA,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class P0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function lc(n){throw n}function F0(n,e,t){return e.parse("/")}function dv(n,e){return ze(null)}const zA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class n{constructor(t,r,a,c,h,_,w,I){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=c,this.config=I,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Cs.xQ,this.errorHandler=lc,this.malformedUriErrorHandler=F0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dv,afterPreactivation:dv},this.urlHandlingStrategy=new P0,this.routeReuseStrategy=new lv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(f.h0i),this.console=h.get(f.c2e);const F=h.get(f.R0b);this.isNgZoneEnabled=F instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(I),this.currentUrlTree=new Ms(new Dt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rg(_,w,Z=>this.triggerEvent(new gl(Z)),Z=>this.triggerEvent(new ml(Z))),this.routerState=$h(this.currentUrlTree,this.rootComponentType),this.transitions=new jr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(oo(a=>0!==a.id),(0,it.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),or(a=>{let c=!1,h=!1;return ze(a).pipe(Zn(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),or(_=>{const w=this.browserUrlTree.toString(),I=!this.navigated||_.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return zh(_.source)&&(this.browserUrlTree=_.extractedUrl),ze(_).pipe(or(x=>{const F=this.transitions.getValue();return r.next(new Ts(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),F!==this.transitions.getValue()?ki:Promise.resolve(x)}),function(n,e,t,r){return or(a=>function(n,e,t,r,a){return new FA(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,it.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Zn(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,a){return(0,Mt.zg)(c=>function(n,e,t,r,a="emptyOnly",c="legacy"){try{const h=new x0(n,e,t,r,a,c).recognize();return null===h?rv(new jA):ze(h)}catch(h){return rv(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,a).pipe((0,it.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),Zn(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const F=new Ho(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(F)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:Z,source:te,restoredState:Ee,extras:Te}=_,Xe=new Ts(F,this.serializeUrl(Z),te,Ee);r.next(Xe);const et=$h(Z,this.rootComponentType).snapshot;return ze(Object.assign(Object.assign({},_),{targetSnapshot:et,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Te),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),ki}),cv(_=>{const{targetSnapshot:w,id:I,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:F,replaceUrl:Z}}=_;return this.hooks.beforePreactivation(w,{navigationId:I,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!F,replaceUrl:!!Z})}),Zn(_=>{const w=new Oh(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),(0,it.U)(_=>Object.assign(Object.assign({},_),{guards:VA(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Mt.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?ze(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Kt.D)(n).pipe((0,Mt.zg)(a=>function(n,e,t,r,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?ze(c.map(_=>{const w=ev(_,e,a);let I;if(function(n){return n&&ac(n.canDeactivate)}(w))I=ti(w.canDeactivate(n,e,t,r));else{if(!ac(w))throw new Error("Invalid CanDeactivate guard");I=ti(w(n,e,t,r))}return I.pipe(Ta())})).pipe(Yo()):ze(!0)}(a.component,a.route,t,e,r)),Ta(a=>!0!==a,!0))}(h,r,a,n).pipe((0,Mt.zg)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,r){return(0,Kt.D)(e).pipe(ao(a=>io(function(n,e){return null!==n&&e&&e(new Fh(n)),ze(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new Qu(n)),ze(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>so(()=>ze(h.guards.map(w=>{const I=ev(w,h.node,t);let A;if(function(n){return n&&ac(n.canActivateChild)}(I))A=ti(I.canActivateChild(r,n));else{if(!ac(I))throw new Error("Invalid CanActivateChild guard");A=ti(I(r,n))}return A.pipe(Ta())})).pipe(Yo())));return ze(c).pipe(Yo())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?ze(r.map(c=>so(()=>{const h=ev(c,e,t);let _;if(function(n){return n&&ac(n.canActivate)}(h))_=ti(h.canActivate(e,n));else{if(!ac(h))throw new Error("Invalid CanActivate guard");_=ti(h(e,n))}return _.pipe(Ta())}))).pipe(Yo()):ze(!0)}(n,a.route,t))),Ta(a=>!0!==a,!0))}(r,c,n,e):ze(_)),(0,it.U)(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),Zn(_=>{if(Ps(_.guardsResult)){const I=qo(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw I.url=_.guardsResult,I}const w=new co(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(w)}),oo(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),cv(_=>{if(_.guards.canActivateChecks.length)return ze(_).pipe(Zn(w=>{const I=new Py(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(I)}),or(w=>{let I=!1;return ze(w).pipe(function(n,e){return(0,Mt.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return ze(t);let c=0;return(0,Kt.D)(a).pipe(ao(h=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return ze({});const c={};return(0,Kt.D)(a).pipe((0,Mt.zg)(h=>function(n,e,t,r){const a=ev(n,e,r);return ti(a.resolve?a.resolve(e,t):a(e,t))}(n[h],e,t,r).pipe(Zn(_=>{c[h]=_}))),Da(1),(0,Mt.zg)(()=>Object.keys(c).length===a.length?ze(c):ki))}(n._resolve,n,e,r).pipe((0,it.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),yg(n,t).resolve),null)))}(h.route,r,n,e)),Zn(()=>c++),Da(1),(0,Mt.zg)(h=>c===a.length?ze(t):ki))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Zn({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),Zn(w=>{const I=new Ph(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(I)}))}),cv(_=>{const{targetSnapshot:w,id:I,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:F,replaceUrl:Z}}=_;return this.hooks.afterPreactivation(w,{navigationId:I,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!F,replaceUrl:!!Z})}),(0,it.U)(_=>{const w=function(n,e,t){const r=m(n,e._root,t?t._root:void 0);return new _g(r,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:w})}),Zn(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new Gh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),Zn({next(){c=!0},complete(){c=!0}}),pl(()=>{var _;if(!c&&!h){const w=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,w)):this.cancelNavigationTransition(a,w)}(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===a.id&&(this.currentNavigation=null)}),Ia(_=>{if(h=!0,function(n){return n&&n[As]}(_)){const w=Ps(_.url);w||(this.navigated=!0,this.restoreHistory(a,!0));const I=new Yu(a.id,this.serializeUrl(a.extractedUrl),_.message);r.next(I),w?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),x={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zh(a.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const w=new y0(a.id,this.serializeUrl(a.extractedUrl),_);r.next(w);try{a.resolve(this.errorHandler(_))}catch(I){a.reject(I)}}return ki}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:c,urlTree:h}=r,_={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(_.state=w)}this.scheduleNavigation(h,a,c,_)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){w0(t),this.config=t.map(Ky),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:c,fragment:h,queryParamsHandling:_,preserveFragment:w}=r,I=a||this.routerState.root,A=w?this.currentUrlTree.fragment:h;let x=null;switch(_){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=c||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,a){if(0===t.length)return Ce(e.root,e.root,e,r,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ot(!0,0,n);let e=0,t=!1;const r=n.reduce((a,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return ar(c.outlets,(w,I)=>{_[I]="string"==typeof w?w.split("/"):w}),[...a,{outlets:_}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===h?(c.split("/").forEach((_,w)=>{0==w&&"."===_||(0==w&&""===_?t=!0:".."===_?e++:""!=_&&a.push(_))}),a):[...a,c]},[]);return new Ot(t,e,r)}(t);if(c.toRoot())return Ce(e.root,new Dt([],{}),e,r,a);const h=function(n,e,t){if(n.isAbsolute)return new ur(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new ur(c,c===e.root,0)}const r=re(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,c=t;for(;c>a;){if(c-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new ur(r,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),_=h.processChildren?oc(h.segmentGroup,h.index,c.commands):sc(h.segmentGroup,h.index,c.commands);return Ce(h.segmentGroup,_,e,r,a)}(I,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=Ps(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},zA):!1===r?Object.assign({},xg):r,Ps(t))return El(this.currentUrlTree,t,a);const c=this.parseUrl(t);return El(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const c=t[a];return null!=c&&(r[a]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new uo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,c,h){var _,w;if(this.disposed)return Promise.resolve(!1);const I=this.getTransition(),A=zh(r)&&I&&!zh(I.source),Z=(this.lastSuccessfulId===I.id||this.currentNavigation?I.rawUrl:I.urlAfterRedirects).toString()===t.toString();if(A&&Z)return Promise.resolve(!0);let te,Ee,Te;h?(te=h.resolve,Ee=h.reject,Te=h.promise):Te=new Promise((mt,Qe)=>{te=mt,Ee=Qe});const Xe=++this.navigationId;let et;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),et=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):et=0,this.setTransition({id:Xe,targetPageId:et,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:te,reject:Ee,promise:Te,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Te.catch(mt=>Promise.reject(mt))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,r=!1){var a,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new Yu(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(tc),f.LFG(Rl),f.LFG(_t),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function zh(n){return"imperative"!==n}let Og=(()=>{class n{constructor(t,r,a,c,h){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=c||He,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,w=new hv(t,_,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Rl),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class hv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wo?this.route:e===Rl?this.childContexts:this.parent.get(e,t)}}class fv{}class xl{preload(e,t){return ze(null)}}let V0=(()=>{class n{constructor(t,r,a,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new Rg(r,a,I=>t.triggerEvent(new gl(I)),I=>t.triggerEvent(new ml(I)))}setUpPreloading(){this.subscription=this.router.events.pipe(oo(t=>t instanceof uo),ao(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,Kt.D)(a).pipe((0,ba.J)(),(0,it.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ze(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Mt.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ri),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(fv))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Pg=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof uo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _l&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _l(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ri),f.LFG(rh),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const hc=new f.OlP("ROUTER_CONFIGURATION"),gv=new f.OlP("ROUTER_FORROOT_GUARD"),U0=[_t,{provide:tc,useClass:fo},{provide:ri,useFactory:function(n,e,t,r,a,c,h,_={},w,I){const A=new ri(null,n,e,t,r,a,c,ss(h));return w&&(A.urlHandlingStrategy=w),I&&(A.routeReuseStrategy=I),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(_,A),_.enableTracing&&A.events.subscribe(x=>{var F,Z;null===(F=console.group)||void 0===F||F.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(Z=console.groupEnd)||void 0===Z||Z.call(console)}),A},deps:[tc,Rl,_t,f.zs3,f.v3s,f.Sil,Sg,hc,[class{},new f.FiY],[class{},new f.FiY]]},Rl,{provide:Wo,useFactory:function(n){return n.routerState.root},deps:[ri]},{provide:f.v3s,useClass:f.EAV},V0,xl,class{preload(e,t){return t().pipe(Ia(()=>ze(null)))}},{provide:hc,useValue:{enableTracing:!1}}];function pk(){return new f.PXZ("Router",ri)}let _v=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[U0,j0(t),{provide:gv,useFactory:YA,deps:[[ri,new f.FiY,new f.tp0]]},{provide:hc,useValue:r||{}},{provide:G,useFactory:B0,deps:[Ae,[new f.tBr(he),new f.FiY],hc]},{provide:Pg,useFactory:KA,deps:[ri,rh,hc]},{provide:fv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:xl},{provide:f.PXZ,multi:!0,useFactory:pk},[yv,{provide:f.ip1,multi:!0,useFactory:JA,deps:[yv]},{provide:H0,useFactory:XA,deps:[yv]},{provide:f.tb,multi:!0,useExisting:H0}]]}}static forChild(t){return{ngModule:n,providers:[j0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gv,8),f.LFG(ri,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function KA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Pg(n,e,t)}function B0(n,e,t={}){return t.useHash?new $e(n,e):new Se(n,e)}function YA(n){return"guarded"}function j0(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Sg,multi:!0,useValue:n}]}let yv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Cs.xQ}appInitializer(){return this.injector.get(N,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(_=>r=_),c=this.injector.get(ri),h=this.injector.get(hc);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?ze(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(hc),a=this.injector.get(V0),c=this.injector.get(Pg),h=this.injector.get(ri),_=this.injector.get(f.z2F);t===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),c.init(),h.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function JA(n){return n.appInitializer.bind(n)}function XA(n){return n.bootstrapListener.bind(n)}const H0=new f.OlP("Router Initializer");var eS=V(538),Le=V(854),ke=V(26),us=V(422),gi=V(910),Fg=V(682);class mi{constructor(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}}accept(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)}toObservable(){switch(this.kind){case"N":return ze(this.value);case"E":return n=this.error,new Vn.y(t=>t.error(n));case"C":return Oi()}var n;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new mi("N",e):mi.undefinedValueNotification}static createError(e){return new mi("E",void 0,e)}static createComplete(){return mi.completeNotification}}function _i(n,e=0){return function(r){return r.lift(new vv(n,e))}}mi.completeNotification=new mi("C"),mi.undefinedValueNotification=new mi("N",void 0);class vv{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new Yh(e,this.scheduler,this.delay))}}class Yh extends Ln.L{constructor(e,t,r=0){super(e),this.scheduler=t,this.delay=r}static dispatch(e){const{notification:t,destination:r}=e;t.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Yh.dispatch,this.delay,new Ev(e,this.destination)))}_next(e){this.scheduleMessage(mi.createNext(e))}_error(e){this.scheduleMessage(mi.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(mi.createComplete()),this.unsubscribe()}}class Ev{constructor(e,t){this.notification=e,this.destination=t}}class _k extends Is.w{constructor(e,t){super()}schedule(e,t=0){return this}}class Lg extends _k{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let a,r=!1;try{this.work(e)}catch(c){r=!0,a=!!c&&c||new Error(c)}if(r)return this.unsubscribe(),a}_unsubscribe(){const e=this.id,t=this.scheduler,r=t.actions,a=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==a&&r.splice(a,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let yo=(()=>{class n{constructor(t,r=n.now){this.SchedulerAction=t,this.now=r}schedule(t,r=0,a){return new this.SchedulerAction(this,t).schedule(a,r)}}return n.now=()=>Date.now(),n})();class Ui extends yo{constructor(e,t=yo.now){super(e,()=>Ui.delegate&&Ui.delegate!==this?Ui.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,r){return Ui.delegate&&Ui.delegate!==this?Ui.delegate.schedule(e,t,r):super.schedule(e,t,r)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Ug=new class extends Ui{}(class extends Lg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),vk=Ug;var tS=V(858);class Z0 extends Cs.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Ek(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let h;if(this.closed)throw new Vo.N;if(this.isStopped||this.hasError?h=Is.w.EMPTY:(this.observers.push(e),h=new tS.W(this,e)),a&&e.add(e=new Yh(e,a)),t)for(let _=0;_<c&&!e.closed;_++)e.next(r[_]);else for(let _=0;_<c&&!e.closed;_++)e.next(r[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||vk).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let h=0;for(;h<c&&!(e-a[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&a.splice(0,h),a}}class Ek{constructor(e,t){this.time=e,this.value=t}}function W0(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,h,c=0,_=!1,w=!1;return function(A){let x;c++,!a||_?(_=!1,a=new Z0(n,e,r),x=a.subscribe(this),h=A.subscribe({next(F){a.next(F)},error(F){_=!0,a.error(F)},complete(){w=!0,h=void 0,a.complete()}}),w&&(h=void 0)):x=a.subscribe(this),this.add(()=>{c--,x.unsubscribe(),x=void 0,h&&!w&&t&&0===c&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}function wv(n,e){return e?or(()=>n,e):or(()=>n)}let z0=1;const nS=Promise.resolve(),Ml={};function rS(n){return n in Ml&&(delete Ml[n],!0)}const iS={setImmediate(n){const e=z0++;return Ml[e]=!0,nS.then(()=>rS(e)&&n()),e},clearImmediate(n){rS(n)}},K0=new class extends Ui{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,a=-1,c=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++a<c&&(e=t.shift()));if(this.active=!1,r){for(;++a<c&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends Lg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=iS.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(iS.clearImmediate(t),e.scheduled=void 0)}});class bv extends Vn.y{constructor(e,t=0,r=K0){var n;super(),this.source=e,this.delayTime=t,this.scheduler=r,(!(!(0,hl.k)(n=t)&&n-parseFloat(n)+1>=0)||t<0)&&(this.delayTime=0),(!r||"function"!=typeof r.schedule)&&(this.scheduler=K0)}static create(e,t=0,r=K0){return new bv(e,t,r)}static dispatch(e){const{source:t,subscriber:r}=e;return this.add(t.subscribe(r))}_subscribe(e){return this.scheduler.schedule(bv.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function Cv(n,e=0){return function(r){return r.lift(new Dk(n,e))}}class Dk{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new bv(t,this.delay,this.scheduler).subscribe(e)}}(0,ke.registerVersion)("firebase","9.6.4","app");var z=V(239),fc=V(676);const Bg="@firebase/installations",Y0="w:0.5.5",Qo="FIS_v2",vo=new Le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function J0(n){return n instanceof Le.ZR&&n.code.includes("request-failed")}function Tv({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function Nl(n){return{token:n.token,requestStatus:2,expiresIn:X0(n.expiresIn),creationTime:Date.now()}}function Ua(n,e){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,z.Z)(function*(n,e){const r=(yield e.json()).error;return vo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function pc({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function kl(n,{refreshToken:e}){const t=pc(n);return t.append("Authorization",function(n){return`${Qo} ${n}`}(e)),t}function Ba(n){return Av.apply(this,arguments)}function Av(){return(Av=(0,z.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function X0(n){return Number(n.replace("s","000"))}function Sv(n,e){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,z.Z)(function*(n,{fid:e}){const t=Tv(n),c={method:"POST",headers:pc(n),body:JSON.stringify({fid:e,authVersion:Qo,appId:n.appId,sdkVersion:Y0})},h=yield Ba(()=>fetch(t,c));if(h.ok){const _=yield h.json();return{fid:_.fid||e,registrationStatus:2,refreshToken:_.refreshToken,authToken:Nl(_.authToken)}}throw yield Ua("Create Installation",h)})).apply(this,arguments)}function Rv(n){return new Promise(e=>{setTimeout(e,n)})}const aS=/^[cdef][\w-]{21}$/;function Ak(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function(n){return function(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return aS.test(t)?t:""}catch(n){return""}}function gc(n){return`${n.appName}!${n.appId}`}const Ol=new Map;function xv(n,e){const t=gc(n);yi(t,e),function(n,e){const t=(!mc&&"BroadcastChannel"in self&&(mc=new BroadcastChannel("[Firebase] FID Change"),mc.onmessage=n=>{yi(n.data.key,n.data.fid)}),mc);t&&t.postMessage({key:n,fid:e}),0===Ol.size&&mc&&(mc.close(),mc=null)}(t,e)}function yi(n,e){const t=Ol.get(n);if(t)for(const r of t)r(e)}let mc=null;const _c="firebase-installations-store";let Xh=null;function Gg(){return Xh||(Xh=(0,fc.openDb)("firebase-installations-database",1,n=>{switch(n.oldVersion){case 0:n.createObjectStore(_c)}})),Xh}function Zg(n,e){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,z.Z)(function*(n,e){const t=gc(n),a=(yield Gg()).transaction(_c,"readwrite"),c=a.objectStore(_c),h=yield c.get(t);return yield c.put(e,t),yield a.complete,(!h||h.fid!==e.fid)&&xv(n,e.fid),e})).apply(this,arguments)}function Nv(n){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,z.Z)(function*(n){const e=gc(n),r=(yield Gg()).transaction(_c,"readwrite");yield r.objectStore(_c).delete(e),yield r.complete})).apply(this,arguments)}function ef(n,e){return zg.apply(this,arguments)}function zg(){return(zg=(0,z.Z)(function*(n,e){const t=gc(n),a=(yield Gg()).transaction(_c,"readwrite"),c=a.objectStore(_c),h=yield c.get(t),_=e(h);return void 0===_?yield c.delete(t):yield c.put(_,t),yield a.complete,_&&(!h||h.fid!==_.fid)&&xv(n,_.fid),_})).apply(this,arguments)}function kv(n){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,z.Z)(function*(n){let e;const t=yield ef(n,r=>{const a=rC(r),c=iC(n,a);return e=c.registrationPromise,c.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function rC(n){return pS(n||{fid:Ak(),registrationStatus:0})}function iC(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(vo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:function(n,e){return cs.apply(this,arguments)}(n,t)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Pv(n)}:{installationEntry:e}}function cs(){return(cs=(0,z.Z)(function*(n,e){try{return Zg(n,yield Sv(n,e))}catch(t){throw J0(t)&&409===t.customData.serverCode?yield Nv(n):yield Zg(n,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function Pv(n){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,z.Z)(function*(n){let e=yield sC(n);for(;1===e.registrationStatus;)yield Rv(100),e=yield sC(n);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield kv(n);return r||t}return e})).apply(this,arguments)}function sC(n){return ef(n,e=>{if(!e)throw vo.create("installation-not-found");return pS(e)})}function pS(n){return function(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function gS(n,e){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,z.Z)(function*({appConfig:n,platformLoggerProvider:e},t){const r=mS(n,t),a=kl(n,t),c=e.getImmediate({optional:!0});c&&a.append("x-firebase-client",c.getPlatformInfoString());const _={method:"POST",headers:a,body:JSON.stringify({installation:{sdkVersion:Y0}})},w=yield Ba(()=>fetch(r,_));if(w.ok)return Nl(yield w.json());throw yield Ua("Generate Auth Token",w)})).apply(this,arguments)}function mS(n,{fid:e}){return`${Tv(n)}/${e}/authTokens:generate`}function tf(n){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,z.Z)(function*(n,e=!1){let t;const r=yield ef(n.appConfig,c=>{if(!Yg(c))throw vo.create("not-registered");const h=c.authToken;if(!e&&aC(h))return c;if(1===h.requestStatus)return t=_S(n,e),c;{if(!navigator.onLine)throw vo.create("app-offline");const _=ES(c);return t=yS(n,_),_}});return t?yield t:r.authToken})).apply(this,arguments)}function _S(n,e){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,z.Z)(function*(n,e){let t=yield Kg(n.appConfig);for(;1===t.authToken.requestStatus;)yield Rv(100),t=yield Kg(n.appConfig);const r=t.authToken;return 0===r.requestStatus?tf(n,e):r})).apply(this,arguments)}function Kg(n){return ef(n,e=>{if(!Yg(e))throw vo.create("not-registered");return function(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function yS(n,e){return nf.apply(this,arguments)}function nf(){return(nf=(0,z.Z)(function*(n,e){try{const t=yield gS(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Zg(n.appConfig,r),t}catch(t){if(!J0(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Zg(n.appConfig,r)}else yield Nv(n.appConfig);throw t}})).apply(this,arguments)}function Yg(n){return void 0!==n&&2===n.registrationStatus}function aC(n){return 2===n.requestStatus&&!function(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function ES(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Bv(){return(Bv=(0,z.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield kv(e.appConfig);return r?r.catch(console.error):tf(e).catch(console.error),t.fid})).apply(this,arguments)}function Qg(){return(Qg=(0,z.Z)(function*(n,e=!1){const t=n;return yield cC(t.appConfig),(yield tf(t,e)).token})).apply(this,arguments)}function cC(n){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,z.Z)(function*(n){const{registrationPromise:e}=yield kv(n);e&&(yield e)})).apply(this,arguments)}function yc(n){return vo.create("missing-app-config-values",{valueName:n})}const Fl="installations";(0,ke._registerComponent)(new gi.wA(Fl,n=>{const e=n.getProvider("app").getImmediate();return{app:e,appConfig:function(n){if(!n||!n.options)throw yc("App Configuration");if(!n.name)throw yc("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw yc(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e),platformLoggerProvider:(0,ke._getProvider)(e,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ke._registerComponent)(new gi.wA("installations-internal",n=>{const e=n.getProvider("app").getImmediate(),t=(0,ke._getProvider)(e,Fl).getImmediate();return{getId:()=>function(n){return Bv.apply(this,arguments)}(t),getToken:a=>function(n){return Qg.apply(this,arguments)}(t,a)}},"PRIVATE")),(0,ke.registerVersion)(Bg,"0.5.5"),(0,ke.registerVersion)(Bg,"0.5.5","esm2017");const em="@firebase/remote-config",ii=new Le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class AS{constructor(e,t,r,a){this.client=e,this.storage=t,this.storageCache=r,this.logger=a}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,a=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${a}.`),a}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,a]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(a&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return a;e.eTag=a&&a.eTag;const c=yield t.client.fetch(e),h=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===c.status&&h.push(t.storage.setLastSuccessfulFetchResponse(c)),yield Promise.all(h),c})()}}function SS(n=navigator){return n.languages&&n.languages[0]||n.language}class vC{constructor(e,t,r,a,c,h){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=a,this.apiKey=c,this.appId=h}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),h=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,_={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},w={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:a,app_id:t.appId,language_code:SS()},I={method:"POST",headers:_,body:JSON.stringify(w)},A=fetch(h,I),x=new Promise((Xe,et)=>{e.signal.addEventListener(()=>{const mt=new Error("The operation was aborted.");mt.name="AbortError",et(mt)})});let F;try{yield Promise.race([A,x]),F=yield A}catch(Xe){let et="fetch-client-network";throw"AbortError"===Xe.name&&(et="fetch-timeout"),ii.create(et,{originalErrorMessage:Xe.message})}let Z=F.status;const te=F.headers.get("ETag")||void 0;let Ee,Te;if(200===F.status){let Xe;try{Xe=yield F.json()}catch(et){throw ii.create("fetch-client-parse",{originalErrorMessage:et.message})}Ee=Xe.entries,Te=Xe.state}if("INSTANCE_STATE_UNSPECIFIED"===Te?Z=500:"NO_CHANGE"===Te?Z=304:("NO_TEMPLATE"===Te||"EMPTY_CONFIG"===Te)&&(Ee={}),304!==Z&&200!==Z)throw ii.create("fetch-status",{httpStatus:Z});return{status:Z,eTag:te,config:Ee}})()}}class bC{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,z.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var a=this;return(0,z.Z)(function*(){yield function(n,e){return new Promise((t,r)=>{const a=Math.max(e-Date.now(),0),c=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(c),r(ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const c=yield a.client.fetch(e);return yield a.storage.deleteThrottleMetadata(),c}catch(c){if(!function(n){if(!(n instanceof Le.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c))throw c;const h={throttleEndTimeMillis:Date.now()+(0,Le.$s)(r),backoffCount:r+1};return yield a.storage.setThrottleMetadata(h),a.attemptFetch(e,h)}})()}}class sf{constructor(e,t,r,a,c){this.app=e,this._client=t,this._storageCache=r,this._storage=a,this._logger=c,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bl(n,e){const t=n.target.error||void 0;return ii.create(e,{originalErrorMessage:t&&t.message})}const $a="app_namespace_store";class MS{constructor(e,t,r,a=function(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Bl(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{const a=r.target.result;switch(r.oldVersion){case 0:a.createObjectStore($a,{keyPath:"compositeKey"})}}}catch(t){e(ii.create("storage-open",{originalErrorMessage:t}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=a}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((a,c)=>{const _=r.transaction([$a],"readonly").objectStore($a),w=t.createCompositeKey(e);try{const I=_.get(w);I.onerror=A=>{c(Bl(A,"storage-get"))},I.onsuccess=A=>{const x=A.target.result;a(x?x.value:void 0)}}catch(I){c(ii.create("storage-get",{originalErrorMessage:I&&I.message}))}})})()}set(e,t){var r=this;return(0,z.Z)(function*(){const a=yield r.openDbPromise;return new Promise((c,h)=>{const w=a.transaction([$a],"readwrite").objectStore($a),I=r.createCompositeKey(e);try{const A=w.put({compositeKey:I,value:t});A.onerror=x=>{h(Bl(x,"storage-set"))},A.onsuccess=()=>{c()}}catch(A){h(ii.create("storage-set",{originalErrorMessage:A&&A.message}))}})})()}delete(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((a,c)=>{const _=r.transaction([$a],"readwrite").objectStore($a),w=t.createCompositeKey(e);try{const I=_.delete(w);I.onerror=A=>{c(Bl(A,"storage-delete"))},I.onsuccess=()=>{a()}}catch(I){c(ii.create("storage-delete",{originalErrorMessage:I&&I.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class NS{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,z.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),a=e.storage.getActiveConfig(),c=yield t;c&&(e.lastFetchStatus=c);const h=yield r;h&&(e.lastSuccessfulFetchTimestampMillis=h);const _=yield a;_&&(e.activeConfig=_)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Pk(){return rm.apply(this,arguments)}function rm(){return(rm=(0,z.Z)(function*(){if(!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch(n){return!1}})).apply(this,arguments)}(0,ke._registerComponent)(new gi.wA("remote-config",function(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ii.create("registration-window");if(!(0,Le.hl)())throw ii.create("indexed-db-unavailable");const{projectId:c,apiKey:h,appId:_}=r.options;if(!c)throw ii.create("registration-project-id");if(!h)throw ii.create("registration-api-key");if(!_)throw ii.create("registration-app-id");const w=new MS(_,r.name,t=t||"firebase"),I=new NS(w),A=new us.Yd(em);A.logLevel=us.in.ERROR;const x=new vC(a,ke.SDK_VERSION,t,c,h,_),F=new bC(x,w),Z=new AS(F,w,I,A),te=new sf(r,Z,I,w,A);return function(n){const e=(0,Le.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(te),te},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(em,"0.3.4"),(0,ke.registerVersion)(em,"0.3.4","esm2017");const OS="/firebase-messaging-sw.js",PS="/firebase-cloud-messaging-push-scope",FS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",im="google.c.a.c_id",LS="google.c.a.c_l",TC="google.c.a.ts",AC="google.c.a.e";var Hr=(()=>{return(n=Hr||(Hr={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Hr;var n})();function Ha(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lk(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),a=new Uint8Array(r.length);for(let c=0;c<r.length;++c)a[c]=r.charCodeAt(c);return a}const SC="fcm_token_details_db",Zv="fcm_token_object_Store";function xC(n){return Wv.apply(this,arguments)}function Wv(){return(Wv=(0,z.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(c=>c.name).includes(SC))return null;let e=null;return(yield(0,fc.openDb)(SC,5,function(){var r=(0,z.Z)(function*(a){var c;if(a.oldVersion<2||!a.objectStoreNames.contains(Zv))return;const h=a.transaction.objectStore(Zv),_=yield h.index("fcmSenderId").get(n);if(yield h.clear(),_)if(2===a.oldVersion){const w=_;if(!w.auth||!w.p256dh||!w.endpoint)return;e={token:w.fcmToken,createTime:null!==(c=w.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:w.auth,p256dh:w.p256dh,endpoint:w.endpoint,swScope:w.swScope,vapidKey:"string"==typeof w.vapidKey?w.vapidKey:Ha(w.vapidKey)}}}else if(3===a.oldVersion){const w=_;e={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:Ha(w.auth),p256dh:Ha(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:Ha(w.vapidKey)}}}else if(4===a.oldVersion){const w=_;e={token:w.fcmToken,createTime:w.createTime,subscriptionOptions:{auth:Ha(w.auth),p256dh:Ha(w.p256dh),endpoint:w.endpoint,swScope:w.swScope,vapidKey:Ha(w.vapidKey)}}}});return function(a){return r.apply(this,arguments)}}())).close(),yield(0,fc.deleteDb)(SC),yield(0,fc.deleteDb)("fcm_vapid_details_db"),yield(0,fc.deleteDb)("undefined"),Vk(e)?e:null})).apply(this,arguments)}function Vk(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const vc="firebase-messaging-store";let af=null;function Kv(){return af||(af=(0,fc.openDb)("firebase-messaging-database",1,n=>{switch(n.oldVersion){case 0:n.createObjectStore(vc)}})),af}function NC(n){return Yv.apply(this,arguments)}function Yv(){return(Yv=(0,z.Z)(function*(n){const e=qa(n),r=yield(yield Kv()).transaction(vc).objectStore(vc).get(e);if(r)return r;{const a=yield xC(n.appConfig.senderId);if(a)return yield Qv(n,a),a}})).apply(this,arguments)}function Qv(n,e){return Jv.apply(this,arguments)}function Jv(){return(Jv=(0,z.Z)(function*(n,e){const t=qa(n),a=(yield Kv()).transaction(vc,"readwrite");return yield a.objectStore(vc).put(e,t),yield a.complete,e})).apply(this,arguments)}function VS(n){return jl.apply(this,arguments)}function jl(){return(jl=(0,z.Z)(function*(n){const e=qa(n),r=(yield Kv()).transaction(vc,"readwrite");yield r.objectStore(vc).delete(e),yield r.complete})).apply(this,arguments)}function qa({appConfig:n}){return n.appId}const sn=new Le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uf(n,e){return Xv.apply(this,arguments)}function Xv(){return(Xv=(0,z.Z)(function*(n,e){const t=yield Jo(n),r=Bi(e),a={method:"POST",headers:t,body:JSON.stringify(r)};let c;try{c=yield(yield fetch(wr(n.appConfig),a)).json()}catch(h){throw sn.create("token-subscribe-failed",{errorInfo:h})}if(c.error)throw sn.create("token-subscribe-failed",{errorInfo:c.error.message});if(!c.token)throw sn.create("token-subscribe-no-token");return c.token})).apply(this,arguments)}function US(n,e){return cf.apply(this,arguments)}function cf(){return(cf=(0,z.Z)(function*(n,e){const t=yield Jo(n),r=Bi(e.subscriptionOptions),a={method:"PATCH",headers:t,body:JSON.stringify(r)};let c;try{c=yield(yield fetch(`${wr(n.appConfig)}/${e.token}`,a)).json()}catch(h){throw sn.create("token-update-failed",{errorInfo:h})}if(c.error)throw sn.create("token-update-failed",{errorInfo:c.error.message});if(!c.token)throw sn.create("token-update-no-token");return c.token})).apply(this,arguments)}function Us(n,e){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,z.Z)(function*(n,e){const r={method:"DELETE",headers:yield Jo(n)};try{const c=yield(yield fetch(`${wr(n.appConfig)}/${e}`,r)).json();if(c.error)throw sn.create("token-unsubscribe-failed",{errorInfo:c.error.message})}catch(a){throw sn.create("token-unsubscribe-failed",{errorInfo:a})}})).apply(this,arguments)}function wr({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function Jo(n){return $l.apply(this,arguments)}function $l(){return($l=(0,z.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function Bi({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const a={web:{endpoint:t,auth:e,p256dh:n}};return r!==FS&&(a.web.applicationPubKey=r),a}const eE=6048e5;function Hl(n){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,z.Z)(function*(n){const e=yield Gl(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ha(e.getKey("auth")),p256dh:Ha(e.getKey("p256dh"))},r=yield NC(n.firebaseDependencies);if(r){if(OC(r.subscriptionOptions,t))return Date.now()>=r.createTime+eE?ql(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Us(n.firebaseDependencies,r.token)}catch(a){console.warn(a)}return bc(n.firebaseDependencies,t)}return bc(n.firebaseDependencies,t)})).apply(this,arguments)}function wc(n){return Za.apply(this,arguments)}function Za(){return(Za=(0,z.Z)(function*(n){const e=yield NC(n.firebaseDependencies);e&&(yield Us(n.firebaseDependencies,e.token),yield VS(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function ql(n,e){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,z.Z)(function*(n,e){try{const t=yield US(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Qv(n.firebaseDependencies,r),t}catch(t){throw yield wc(n),t}})).apply(this,arguments)}function bc(n,e){return za.apply(this,arguments)}function za(){return(za=(0,z.Z)(function*(n,e){const r={token:yield uf(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Qv(n,r),r.token})).apply(this,arguments)}function Gl(n,e){return sm.apply(this,arguments)}function sm(){return(sm=(0,z.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lk(e)})})).apply(this,arguments)}function OC(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function tE(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const a=e.notification.image;a&&(n.notification.image=a)}(e,n),function(n,e){!e.data||(n.data=e.data)}(e,n),function(n,e){if(!e.fcmOptions)return;n.fcmOptions={};const t=e.fcmOptions.link;t&&(n.fcmOptions.link=t);const r=e.fcmOptions.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}(e,n),e}function VC(n){return"object"==typeof n&&!!n&&im in n}function nE(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function rE(n){return sn.create("missing-app-config-values",{valueName:n})}nE("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nE("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class BC{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=function(n){if(!n||!n.options)throw rE("App Configuration Object");if(!n.name)throw rE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw rE(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:a,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function jC(n){return iE.apply(this,arguments)}function iE(){return(iE=(0,z.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(OS,{scope:PS}),n.swRegistration.update().catch(()=>{})}catch(e){throw sn.create("failed-service-worker-registration",{browserErrorMessage:e.message})}})).apply(this,arguments)}function $C(n,e){return sE.apply(this,arguments)}function sE(){return(sE=(0,z.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield jC(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw sn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function Uk(n,e){return oE.apply(this,arguments)}function oE(){return(oE=(0,z.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=FS)})).apply(this,arguments)}function uE(){return(uE=(0,z.Z)(function*(n,e){if(!navigator)throw sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw sn.create("permission-blocked");return yield Uk(n,null==e?void 0:e.vapidKey),yield $C(n,null==e?void 0:e.serviceWorkerRegistration),Hl(n)})).apply(this,arguments)}function HC(n,e,t){return cE.apply(this,arguments)}function cE(){return(cE=(0,z.Z)(function*(n,e,t){const r=BS(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[im],message_name:t[LS],message_time:t[TC],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function BS(n){switch(n){case Hr.NOTIFICATION_CLICKED:return"notification_open";case Hr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function lE(){return(lE=(0,z.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Hr.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(tE(t)):n.onMessageHandler.next(tE(t)));const r=t.data;VC(r)&&"1"===r[AC]&&(yield HC(n,t.messageType,r))})).apply(this,arguments)}const dE="@firebase/messaging";function HS(){return hE.apply(this,arguments)}function hE(){return(hE=(0,z.Z)(function*(){return"undefined"!=typeof window&&(0,Le.hl)()&&(yield(0,Le.eu)())&&(0,Le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ke._registerComponent)(new gi.wA("messaging",n=>{const e=new BC(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function(n,e){return lE.apply(this,arguments)}(e,t)),e},"PUBLIC")),(0,ke._registerComponent)(new gi.wA("messaging-internal",n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function(n,e){return uE.apply(this,arguments)}(e,r)}},"PRIVATE")),(0,ke.registerVersion)(dE,"0.9.7"),(0,ke.registerVersion)(dE,"0.9.7","esm2017");const df="analytics",Gk="firebase_id",ZS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pE="https://www.googletagmanager.com/gtag/js",Sr=new us.Yd("@firebase/analytics");function gE(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function om(n,e){const t=document.createElement("script");t.src=`${pE}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function GC(n,e,t,r,a,c){return mE.apply(this,arguments)}function mE(){return(mE=(0,z.Z)(function*(n,e,t,r,a,c){const h=r[a];try{if(h)yield e[h];else{const w=(yield gE(t)).find(I=>I.measurementId===a);w&&(yield e[w.appId])}}catch(_){Sr.error(_)}n("config",a,c)})).apply(this,arguments)}function zS(n,e,t,r,a){return _E.apply(this,arguments)}function _E(){return(_E=(0,z.Z)(function*(n,e,t,r,a){try{let c=[];if(a&&a.send_to){let h=a.send_to;Array.isArray(h)||(h=[h]);const _=yield gE(t);for(const w of h){const I=_.find(x=>x.measurementId===w),A=I&&e[I.appId];if(!A){c=[];break}c.push(A)}}0===c.length&&(c=Object.values(e)),yield Promise.all(c),n("event",r,a||{})}catch(c){Sr.error(c)}})).apply(this,arguments)}function ZC(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(pE))return e;return null}const vi=new Le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),am=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function JS(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Wk(n){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,z.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,a={method:"GET",headers:JS(r)},c=ZS.replace("{app-id}",t),h=yield fetch(c,a);if(200!==h.status&&304!==h.status){let _="";try{const w=yield h.json();(null===(e=w.error)||void 0===e?void 0:e.message)&&(_=w.error.message)}catch(w){}throw vi.create("config-fetch-failed",{httpStatus:h.status,responseMessage:_})}return h.json()})).apply(this,arguments)}function XS(n){return hf.apply(this,arguments)}function hf(){return(hf=(0,z.Z)(function*(n,e=am,t){const{appId:r,apiKey:a,measurementId:c}=n.options;if(!r)throw vi.create("no-app-id");if(!a){if(c)return{measurementId:c,appId:r};throw vi.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_=new zC;return setTimeout((0,z.Z)(function*(){_.abort()}),void 0!==t?t:6e4),um({appId:r,apiKey:a,measurementId:c},h,_,e)})).apply(this,arguments)}function um(n,e,t){return vE.apply(this,arguments)}function vE(){return(vE=(0,z.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,a=am){const{appId:c,measurementId:h}=n;try{yield EE(r,e)}catch(_){if(h)return Sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${_.message}]`),{appId:c,measurementId:h};throw _}try{const _=yield Wk(n);return a.deleteThrottleMetadata(c),_}catch(_){if(!wE(_)){if(a.deleteThrottleMetadata(c),h)return Sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${_.message}]`),{appId:c,measurementId:h};throw _}const w=503===Number(_.customData.httpStatus)?(0,Le.$s)(t,a.intervalMillis,30):(0,Le.$s)(t,a.intervalMillis),I={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return a.setThrottleMetadata(c,I),Sr.debug(`Calling attemptFetch again in ${w} millis`),um(n,I,r,a)}})).apply(this,arguments)}function EE(n,e){return new Promise((t,r)=>{const a=Math.max(e-Date.now(),0),c=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(c),r(vi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wE(n){if(!(n instanceof Le.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class zC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function zk(){return bE.apply(this,arguments)}function bE(){return(bE=(0,z.Z)(function*(){if(!(0,Le.hl)())return Sr.warn(vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Le.eu)()}catch(n){return Sr.warn(vi.create("indexeddb-unavailable",{errorInfo:n}).message),!1}return!0})).apply(this,arguments)}function cm(){return(cm=(0,z.Z)(function*(n,e,t,r,a,c,h){var _;const w=XS(n);w.then(Z=>{t[Z.measurementId]=Z.appId,n.options.measurementId&&Z.measurementId!==n.options.measurementId&&Sr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${Z.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Z=>Sr.error(Z)),e.push(w);const I=zk().then(Z=>{if(Z)return r.getId()}),[A,x]=yield Promise.all([w,I]);ZC()||om(c,A.measurementId),a("js",new Date);const F=null!==(_=null==h?void 0:h.config)&&void 0!==_?_:{};return F.origin="firebase",F.update=!0,null!=x&&(F[Gk]=x),a("config",A.measurementId,F),A.measurementId})).apply(this,arguments)}class eR{constructor(e){this.app=e}_delete(){return delete Eo[this.app.options.appId],Promise.resolve()}}let Eo={},lm=[];const CE={};let IE,ff,Wl="dataLayer",hm=!1;function YC(n,e,t){!function(){const n=[];if((0,Le.ru)()&&n.push("This is a browser extension environment."),(0,Le.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,a)=>`(${a+1}) ${r}`).join(" "),t=vi.create("invalid-analytics-context",{errorInfo:e});Sr.warn(t.message)}}();const r=n.options.appId;if(!r)throw vi.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw vi.create("no-api-key");Sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Eo[r])throw vi.create("already-exists",{id:r});if(!hm){!function(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Wl);const{wrappedGtag:c,gtagCore:h}=function(n,e,t,r,a){let c=function(...h){window[r].push(arguments)};return window[a]&&"function"==typeof window[a]&&(c=window[a]),window[a]=function(n,e,t,r){function c(){return(c=(0,z.Z)(function*(h,_,w){try{"event"===h?yield zS(n,e,t,_,w):"config"===h?yield GC(n,e,t,r,_,w):n("set",_)}catch(I){Sr.error(I)}})).apply(this,arguments)}return function(h,_,w){return c.apply(this,arguments)}}(c,n,e,t),{gtagCore:c,wrappedGtag:window[a]}}(Eo,lm,CE,Wl,"gtag");ff=c,IE=h,hm=!0}return Eo[r]=function(n,e,t,r,a,c,h){return cm.apply(this,arguments)}(n,lm,CE,e,IE,Wl,t),new eR(n)}function TE(){return(TE=(0,z.Z)(function*(n,e,t,r,a){if(a&&a.global)n("event",t,r);else{const c=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:c}))}})).apply(this,arguments)}function eI(){return tI.apply(this,arguments)}function tI(){return(tI=(0,z.Z)(function*(){if((0,Le.ru)()||!(0,Le.zI)()||!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch(n){return!1}})).apply(this,arguments)}const SE="@firebase/analytics";(0,ke._registerComponent)(new gi.wA(df,(e,{options:t})=>YC(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,ke._registerComponent)(new gi.wA("analytics-internal",function(e){try{const t=e.getProvider(df).getImmediate();return{logEvent:(r,a,c)=>function(n,e,t,r){n=(0,Le.m9)(n),function(n,e,t,r,a){return TE.apply(this,arguments)}(ff,Eo[n.app.options.appId],e,t,r).catch(a=>Sr.error(a))}(t,r,a,c)}}catch(t){throw vi.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,ke.registerVersion)(SE,"0.7.5"),(0,ke.registerVersion)(SE,"0.7.5","esm2017");const mm=new Ui(Lg),aR=mm,Ka="__angularfire_symbol__analyticsIsSupported",xE="__angularfire_symbol__remoteConfigIsSupported",NE="__angularfire_symbol__messagingIsSupported";function zl(){}globalThis[Ka]||(globalThis[Ka]=eI().then(n=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=n)),globalThis[NE]||(globalThis[NE]=HS().then(n=>globalThis.__angularfire_symbol__messagingIsSupportedValue=n)),globalThis[xE]||(globalThis[xE]=Pk().then(n=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=n));class Bs{constructor(e,t=Ug){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const a=this.zone;return this.delegate.schedule(function(h){a.runGuarded(()=>{e.apply(this,[h])})},t,r)}}class js{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zl,{},zl,zl)),t.pipe(Zn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ji=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Bs(Zone.current)),this.insideAngular=t.run(()=>new Bs(Zone.current,mm)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ya(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function oI(n){return n.pipe(_i(Ya().outsideAngular))}function si(n){return Ya(),function(n){return function(t){return(t=t.lift(new js(n.ngZone))).pipe(Cv(n.outsideAngular),_i(n.insideAngular))}}(Ya())(n)}var oi=V(939);const uI=new Map,bR={activated:!1,tokenObservers:[]},CR={initialized:!1,enabled:!1};function br(n){return uI.get(n)||bR}function $s(n,e){uI.set(n,e)}function wm(){return CR}class SR{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,z.Z)(function*(){t.stop();try{t.pending=new Le.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new Le.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new Le.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lI(n){if(!br(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function Im(n,e){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,z.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});a&&(r["X-Firebase-Client"]=a.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let h,_;try{h=yield fetch(n,c)}catch(x){throw ai.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==h.status)throw ai.create("fetch-status-error",{httpStatus:h.status});try{_=yield h.json()}catch(x){throw ai.create("fetch-parse-error",{originalErrorMessage:x.message})}const w=_.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const I=1e3*Number(w[1]),A=Date.now();return{token:_.attestationToken,expireTimeMillis:A+I,issuedAtTimeMillis:A}})).apply(this,arguments)}function pI(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Kl="firebase-app-check-store";let Tm=null;function mI(){return Tm||(Tm=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var a;e(ai.create("storage-open",{originalErrorMessage:null===(a=r.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=r=>{const a=r.target.result;switch(r.oldVersion){case 0:a.createObjectStore(Kl,{keyPath:"compositeKey"})}}}catch(t){e(ai.create("storage-open",{originalErrorMessage:t.message}))}}),Tm)}function Am(){return(Am=(0,z.Z)(function*(n,e){const r=(yield mI()).transaction(Kl,"readwrite"),c=r.objectStore(Kl).put({compositeKey:n,value:e});return new Promise((h,_)=>{c.onsuccess=w=>{h()},r.onerror=w=>{var I;_(ai.create("storage-set",{originalErrorMessage:null===(I=w.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const _f=new us.Yd("@firebase/app-check");function yI(n,e){return(0,Le.hl)()?function(n,e){return function(n,e){return Am.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_f.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Tn(){return wm().enabled}function kR(){return Rm.apply(this,arguments)}function Rm(){return(Rm=(0,z.Z)(function*(){const n=wm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const OR={error:"UNKNOWN_ERROR"};function vI(n){return Le.US.encodeString(JSON.stringify(n),!1)}function yf(n){return xm.apply(this,arguments)}function xm(){return(xm=(0,z.Z)(function*(n,e=!1){const t=n.app;lI(t);const r=br(t);let c,a=r.token;if(!a){const w=yield r.cachedTokenPromise;w&&Nm(w)&&(a=w)}if(!e&&a&&Nm(a))return{token:a.token};let _,h=!1;if(Tn()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Im(pI(t,yield kR()),n.platformLoggerProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),h=!0);const w=yield r.exchangeTokenPromise;return yield yI(t,w),$s(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),a=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?_f.warn(w.message):_f.error(w),c=w}return a?(_={token:a.token},$s(t,Object.assign(Object.assign({},r),{token:a})),yield yI(t,a)):_=FR(c),h&&Xl(t,_),_})).apply(this,arguments)}function jE(n,e){const t=br(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),$s(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function EI(n){const{app:e}=n,t=br(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new SR((0,z.Z)(function*(){let r;if(r=br(e).token?yield yf(n,!0):yield yf(n),r.error)throw r.error}),()=>!0,()=>{const t=br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),$s(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Xl(n,e){const t=br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function Nm(n){return n.expireTimeMillis-Date.now()>0}function FR(n){return{token:vI(OR),error:n}}class LR{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=br(this.app);for(const t of e)jE(this.app,t.next);return Promise.resolve()}}const xI="app-check-internal";(0,ke._registerComponent)(new gi.wA("app-check",n=>function(n,e){return new LR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xI).initialize()})),(0,ke._registerComponent)(new gi.wA(xI,n=>function(n){return{getToken:e=>yf(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,c=br(a),h={next:t,error:r,type:e};if($s(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&Nm(c.token)){const _=c.token;Promise.resolve().then(()=>{t({token:_.token}),EI(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>EI(n))}(n,"INTERNAL",e),removeTokenListener:e=>jE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ke.registerVersion)("@firebase/app-check","0.5.3");class Fm{constructor(){return((n,e)=>{const t=(0,ke.getApps)(),r=[];return t.forEach(a=>{a.container.getProvider("app-check").instances.forEach(h=>{r.includes(h)||r.push(h)})}),r})()}}"undefined"!=typeof window&&window,V(841);const PI=new f.OlP("angularfire2.auth.use-emulator"),Lm=new f.OlP("angularfire2.auth.settings"),FI=new f.OlP("angularfire2.auth.tenant-id"),WE=new f.OlP("angularfire2.auth.langugage-code"),LI=new f.OlP("angularfire2.auth.use-device-language"),VI=new f.OlP("angularfire.auth.persistence"),UI=(n,e,t,r,a,c,h,_)=>(0,oi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=a,c&&w.useDeviceLanguage(),h)for(const[I,A]of Object.entries(h))w.settings[I]=A;return _&&w.setPersistence(_),w},[t,r,a,c,h,_]);let zE=(()=>{class n{constructor(t,r,a,c,h,_,w,I,A,x,F,Z){const te=new Cs.xQ,Ee=ze(void 0).pipe(_i(h.outsideAngular),or(()=>c.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,828)))),(0,it.U)(()=>(0,oi.on)(t,c,r)),(0,it.U)(Te=>UI(Te,c,_,I,A,x,w,F)),W0({bufferSize:1,refCount:!1}));if(Ou(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{Ee.pipe(Ta()).subscribe();const Xe=Ee.pipe(or(Qe=>Qe.getRedirectResult().then(en=>en,()=>null)),si,W0({bufferSize:1,refCount:!1})),et=Ee.pipe(or(Qe=>new Vn.y(en=>({unsubscribe:c.runOutsideAngular(()=>Qe.onAuthStateChanged(Yr=>en.next(Yr),Yr=>en.error(Yr),()=>en.complete()))})))),mt=Ee.pipe(or(Qe=>new Vn.y(en=>({unsubscribe:c.runOutsideAngular(()=>Qe.onIdTokenChanged(Yr=>en.next(Yr),Yr=>en.error(Yr),()=>en.complete()))}))));this.authState=Xe.pipe(wv(et),Cv(h.outsideAngular),_i(h.insideAngular)),this.user=Xe.pipe(wv(mt),Cv(h.outsideAngular),_i(h.insideAngular)),this.idToken=this.user.pipe(or(Qe=>Qe?(0,Kt.D)(Qe.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(or(Qe=>Qe?(0,Kt.D)(Qe.getIdTokenResult()):ze(null))),this.credential=(0,Fg.T)(Xe,te,this.authState.pipe(oo(Qe=>!Qe))).pipe((0,it.U)(Qe=>(null==Qe?void 0:Qe.user)?Qe:null),Cv(h.outsideAngular),_i(h.insideAngular))}return(0,oi.pX)(this,Ee,c,{spy:{apply:(Te,Xe,et)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&et.then(mt=>te.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oi.Dh),f.LFG(oi.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ji),f.LFG(PI,8),f.LFG(Lm,8),f.LFG(FI,8),f.LFG(WE,8),f.LFG(LI,8),f.LFG(VI,8),f.LFG(Fm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Vm=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(a=>{var c;localStorage.setItem("token","true"),1==(null===(c=a.user)||void 0===c?void 0:c.emailVerified)?this.router.navigate(["dashboard"]):this.router.navigate(["/varify-email"])},a=>{alert(a.message),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(a=>{alert("Registration Successful"),this.sendEmailForVarification(a.user),this.router.navigate(["/login"])},a=>{alert(a.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/varify-email"])},r=>{alert("Something went wrong")})}sendEmailForVarification(t){console.log(t),t.sendEmailVerification().then(r=>{this.router.navigate(["/varify-email"])},r=>{alert("Something went wrong. Not able to send mail to your email.")})}googleSignIn(){return this.fireauth.signInWithPopup(new eS.N).then(t=>{var r;this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(null===(r=t.user)||void 0===r?void 0:r.uid))},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zE),f.LFG(ri))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KE(){return n=>n.lift(new JR)}class JR{call(e,t){return t.subscribe(new BI(e))}}class BI extends Ln.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class XR{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new ex(e,this.compare,this.keySelector))}}class ex extends Ln.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}V(828);var Be,$I=V(394),nx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xo={},bf=bf||{},ct=nx||self;function td(){}function YE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var JE="closure_uid_"+(1e9*Math.random()>>>0),HI=0;function rx(n,e,t){return n.call.apply(n.bind,arguments)}function qI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Cr(n,e,t){return(Cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rx:qI).apply(null,arguments)}function If(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,a,c){for(var h=Array(arguments.length-2),_=2;_<arguments.length;_++)h[_-2]=arguments[_];return e.prototype[a].apply(r,h)}}function Ja(){this.s=this.s,this.o=this.o}var lO={};Ja.prototype.s=!1,Ja.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,JE)&&n[JE]||(n[JE]=++HI)}(this);delete lO[n]}},Ja.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Um=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Df=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,a="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in a&&e.call(t,a[c],c,n)};function Dc(n){return Array.prototype.concat.apply([],arguments)}function XE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ew(n){return/^[\s\xa0]*$/.test(n)}var Ei,GI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function yn(n,e){return-1!=n.indexOf(e)}function Bm(n,e){return n<e?-1:n>e?1:0}e:{var Tf=ct.navigator;if(Tf){var ZI=Tf.userAgent;if(ZI){Ei=ZI;break e}}Ei=""}function tw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sx(n){const e={};for(const t in n)e[t]=n[t];return e}var WI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zI(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<WI.length;c++)t=WI[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function nw(n){return nw[" "](n),n}nw[" "]=td;var jm,n,KI=yn(Ei,"Opera"),Tc=yn(Ei,"Trident")||yn(Ei,"MSIE"),iw=yn(Ei,"Edge"),sw=iw||Tc,ox=yn(Ei,"Gecko")&&!(yn(Ei.toLowerCase(),"webkit")&&!yn(Ei,"Edge"))&&!(yn(Ei,"Trident")||yn(Ei,"MSIE"))&&!yn(Ei,"Edge"),ax=yn(Ei.toLowerCase(),"webkit")&&!yn(Ei,"Edge");function YI(){var n=ct.document;return n?n.documentMode:void 0}e:{var $m="",Hm=(n=Ei,ox?/rv:([^\);]+)(\)|;)/.exec(n):iw?/Edge\/([\d\.]+)/.exec(n):Tc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ax?/WebKit\/(\S+)/.exec(n):KI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hm&&($m=Hm?Hm[1]:""),Tc){var qm=YI();if(null!=qm&&qm>parseFloat($m)){jm=String(qm);break e}}jm=$m}var ux={};function cx(){return e=ux,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=GI(String(jm)).split("."),t=GI("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=Bm(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||Bm(0==a[2].length,0==c[2].length)||Bm(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var lx=ct.document&&Tc&&(YI()||parseInt(jm,10))||void 0,QI=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ct.addEventListener("test",td,e),ct.removeEventListener("test",td,e)}catch(t){}return n}();function lr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xa(n,e){if(lr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ox){e:{try{nw(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Sf[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xa.Z.h.call(this)}}lr.prototype.h=function(){this.defaultPrevented=!0},qr(Xa,lr);var Sf={2:"touch",3:"pen",4:"mouse"};Xa.prototype.h=function(){Xa.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rf="closure_listenable_"+(1e6*Math.random()|0),dx=0;function dO(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=a,this.key=++dx,this.ca=this.fa=!1}function Zm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Wm(n){this.src=n,this.g={},this.h=0}function ow(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=Um(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(Zm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function aw(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return a}return-1}Wm.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=aw(n,e,r,a);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new dO(e,this.src,c,!!r,a)).fa=t,n.push(e)),e};var uw="closure_lm_"+(1e6*Math.random()|0),cw={};function JI(n,e,t,r,a){if(r&&r.once)return fx(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)JI(n,e[c],t,r,a);return null}return t=ea(t),n&&n[Rf]?n.N(e,t,Cf(r)?!!r.capture:!!r,a):XI(n,e,t,!1,r,a)}function XI(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=Cf(a)?!!a.capture:!!a,_=lw(n);if(_||(n[uw]=_=new Wm(n)),(t=_.add(e,t,r,h,c)).proxy)return t;if(r=function(){var e=px;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QI||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(tD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function fx(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)fx(n,e[c],t,r,a);return null}return t=ea(t),n&&n[Rf]?n.O(e,t,Cf(r)?!!r.capture:!!r,a):XI(n,e,t,!0,r,a)}function eD(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)eD(n,e[c],t,r,a);else r=Cf(r)?!!r.capture:!!r,t=ea(t),n&&n[Rf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=aw(c=n.g[e],t,r,a))&&(Zm(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=lw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=aw(e,t,r,a)),(t=-1<n?e[n]:null)&&Ac(t))}function Ac(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rf])ow(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lw(e))?(ow(t,n),0==t.h&&(t.src=null,e[uw]=null)):Zm(n)}}}function tD(n){return n in cw?cw[n]:cw[n]="on"+n}function px(n,e){if(n.ca)n=!0;else{e=new Xa(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ac(n),n=t.call(r,e)}return n}function lw(n){return(n=n[uw])instanceof Wm?n:null}var rd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(n){return"function"==typeof n?n:(n[rd]||(n[rd]=function(e){return n.handleEvent(e)}),n[rd])}function dr(){Ja.call(this),this.i=new Wm(this),this.P=this,this.I=null}function Rr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new lr(e,n);else if(e instanceof lr)e.target=e.target||n;else{var a=e;zI(e=new lr(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=dw(h,r,!0,e)&&a}if(a=dw(h=e.g=n,r,!0,e)&&a,a=dw(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=dw(h=e.g=t[c],r,!1,e)&&a}function dw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ca&&h.capture==t){var _=h.listener,w=h.ia||h.src;h.fa&&ow(n.i,h),a=!1!==_.call(w,r)&&a}}return a&&!r.defaultPrevented}qr(dr,Ja),dr.prototype[Rf]=!0,dr.prototype.removeEventListener=function(n,e,t,r){eD(this,n,e,t,r)},dr.prototype.M=function(){if(dr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zm(t[r]);delete n.g[e],n.h--}}this.I=null},dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var hw=ct.JSON.stringify;function zm(){var n=oD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Km,nD=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new rD,n=>n.reset());class rD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iD(n){ct.setTimeout(()=>{throw n},0)}function xf(n,e){Km||function(){var n=ct.Promise.resolve(void 0);Km=function(){n.then(aD)}}(),fw||(Km(),fw=!0),oD.add(n,e)}var fw=!1,oD=new class{constructor(){this.h=this.g=null}add(e,t){const r=nD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function aD(){for(var n;n=zm();){try{n.h.call(n.g)}catch(t){iD(t)}var e=nD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fw=!1}function Ym(n,e){dr.call(this),this.h=n||1,this.g=e||ct,this.j=Cr(this.kb,this),this.l=Date.now()}function Qm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function id(n,e,t){if("function"==typeof n)t&&(n=Cr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Cr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ct.setTimeout(n,e||0)}function Mf(n){n.g=id(()=>{n.g=null,n.i&&(n.i=!1,Mf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(Ym,dr),(Be=Ym.prototype).da=!1,Be.S=null,Be.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rr(this,"tick"),this.da&&(Qm(this),this.start()))}},Be.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Be.M=function(){Ym.Z.M.call(this),Qm(this),delete this.g};class hO extends Ja{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mf(this)}M(){super.M(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(n){Ja.call(this),this.h=n,this.g={}}qr(ta,Ja);var $t=[];function na(n,e,t,r){Array.isArray(t)||(t&&($t[0]=t.toString()),t=$t);for(var a=0;a<t.length;a++){var c=JI(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Sc(n){tw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ac(e)},n),n.g={}}function eu(){this.g=!0}function xr(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return hw(t)}catch(_){return e}}(n,t)+(r?" "+r:"")})}ta.prototype.M=function(){ta.Z.M.call(this),Sc(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eu.prototype.Aa=function(){this.g=!1},eu.prototype.info=function(){};var sd={},gw=null;function Nf(){return gw=gw||new dr}function mx(n){lr.call(this,sd.Ma,n)}function kf(n){const e=Nf();Rr(e,new mx(e,n))}function uD(n,e){lr.call(this,sd.STAT_EVENT,n),this.stat=e}function ln(n){const e=Nf();Rr(e,new uD(e,n))}function vn(n,e){lr.call(this,sd.Na,n),this.size=e}function ui(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){n()},e)}sd.Ma="serverreachability",qr(mx,lr),sd.STAT_EVENT="statevent",qr(uD,lr),sd.Na="timingevent",qr(vn,lr);var Of={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Jm(){}function xc(){}Jm.prototype.h=null;var _w,ra={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mw(){lr.call(this,"d")}function ia(){lr.call(this,"c")}function Pf(){}function Mc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ta(this),this.P=yw,this.W=new Ym(n=sw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new od}function od(){this.i=null,this.g="",this.h=!1}qr(mw,lr),qr(ia,lr),qr(Pf,Jm),Pf.prototype.g=function(){return new XMLHttpRequest},Pf.prototype.i=function(){return{}},_w=new Pf;var yw=45e3,e_={},sa={};function vw(n,e,t){n.K=1,n.v=i_(oa(e)),n.s=t,n.U=!0,Ff(n,null)}function Ff(n,e){n.F=Date.now(),tu(n),n.A=oa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),vD(t.h,"t",r),n.C=0,t=n.l.H,n.h=new od,n.g=FD(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hO(Cr(n.Ia,n,n.g),n.O)),na(n.V,n.g,"readystatechange",n.gb),e=n.H?sx(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),kf(1),function(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",_=c.split("&"),w=0;w<_.length;w++){var I=_[w].split("=");if(1<I.length){var A=I[0];I=I[1];var x=A.split("_");h=2<=x.length&&"type"==x[1]?h+(A+"=")+I+"&":h+(A+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ew(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ww(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=lD(n,t),a==sa){4==e&&(n.o=4,ln(14),r=!1),xr(n.j,n.m,null,"[Incomplete Response]");break}if(a==e_){n.o=4,ln(15),xr(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xr(n.j,n.m,a,null),hD(n,a)}Ew(n)&&a!=sa&&a!=e_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ln(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),kD(e),e.L=!0,ln(11))):(xr(n.j,n.m,t,"[Invalid Chunked Response]"),ud(n),Nc(n))}function lD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sa:(t=Number(e.substring(t,r)),isNaN(t)?e_:(r+=1)+t>e.length?sa:(e=e.substr(r,t),n.C=r+t,e))}function tu(n){n.Y=Date.now()+n.P,dD(n,n.P)}function dD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ui(Cr(n.eb,n),e)}function ad(n){n.B&&(ct.clearTimeout(n.B),n.B=null)}function Nc(n){0==n.l.G||n.I||d_(n.l,n)}function ud(n){ad(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Qm(n.W),Sc(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function hD(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wD(t.i,n)))if(t.I=n.N,!n.J&&wD(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=ui(Cr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;l_(t),c_(t)}Ow(t),ln(18)}if(1>=dd(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else ru(t,11)}else if((n.J||t.g==n)&&l_(t),!ew(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let I=a[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const A=I[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const F=I[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const te=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var c=r.i;!c.g&&(yn(te,"spdy")||yn(te,"quic")||yn(te,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(o_(c,c.h),c.h=null))}if(r.D){const Ee=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Ee&&(r.sa=Ee,En(r.F,r.D,Ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=PD(r,r.H?r.la:null,r.W),h.J){bD(r.i,h);var _=h,w=r.K;w&&_.setTimeout(w),_.B&&(ad(_),tu(_)),r.g=h}else kw(r);0<t.l.length&&Nw(t)}else"stop"!=I[0]&&"close"!=I[0]||ru(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?ru(t,7):Rw(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}kf(4)}catch(I){}}function fD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(YE(n)||"string"==typeof n)Df(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(YE(n)||"string"==typeof n){t=[];for(var r=n.length,a=0;a<r;a++)t.push(a)}else for(a in t=[],r=0,n)t[r++]=a;a=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(YE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}}function bo(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof bo)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function bw(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];kc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)kc(a,r=n.g[e])||(n.g[t++]=r,a[r]=1),e++;n.g.length=t}}function kc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Be=Mc.prototype).setTimeout=function(n){this.P=n},Be.gb=function(n){n=n.target;const e=this.L;e&&3==Hs(n)?e.l():this.Ia(n)},Be.Ia=function(n){try{if(n==this.g)e:{const A=Hs(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||sw||this.g&&(this.h.h||this.g.ga()||RD(this.g)))){this.I||4!=A||7==e||kf(8==e||0>=x?3:2),ad(this);var t=this.g.ba();this.N=t;t:if(Ew(this)){var r=RD(this.g);n="";var a=r.length,c=4==Hs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ud(this),Nc(this);var h="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,w=this.g;if((_=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ew(_)){var I=_;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,ln(12),ud(this),Nc(this);break e}xr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hD(this,t)}this.U?(ww(this,A,h),sw&&this.i&&3==A&&(na(this.V,this.W,"tick",this.fb),this.W.start())):(xr(this.j,this.m,h,null),hD(this,h)),4==A&&ud(this),this.i&&!this.I&&(4==A?d_(this.l,this):(this.i=!1,tu(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,ln(12)):(this.o=0,ln(13)),ud(this),Nc(this)}}}catch(A){}},Be.fb=function(){if(this.g){var n=Hs(this.g),e=this.g.ga();this.C<e.length&&(ad(this),ww(this,n,e),this.i&&4!=n&&tu(this))}},Be.cancel=function(){this.I=!0,ud(this)},Be.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(kf(3),ln(17)),ud(this),this.o=2,Nc(this)):dD(this,this.Y-n)},(Be=bo.prototype).R=function(){bw(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Be.T=function(){return bw(this),this.g.concat()},Be.get=function(n,e){return kc(this.h,n)?this.h[n]:e},Be.set=function(n,e){kc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Be.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var a=t[r],c=this.get(a);n.call(e,c,a,this)}};var pD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof cd){this.g=void 0!==e?e:n.g,hr(this,n.j),this.s=n.s,t_(this,n.i),n_(this,n.m),this.l=n.l,e=n.h;var t=new s_;t.i=e.i,e.g&&(t.g=new bo(e.g),t.h=e.h),r_(this,t),this.o=n.o}else n&&(t=String(n).match(pD))?(this.g=!!e,hr(this,t[1]||"",!0),this.s=Lf(t[2]||""),t_(this,t[3]||"",!0),n_(this,t[4]),this.l=Lf(t[5]||"",!0),r_(this,t[6]||"",!0),this.o=Lf(t[7]||"")):(this.g=!!e,this.h=new s_(null,this.g))}function oa(n){return new cd(n)}function hr(n,e,t){n.j=t?Lf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function t_(n,e,t){n.i=t?Lf(e,!0):e}function n_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function r_(n,e,t){e instanceof s_?(n.h=e,function(n,e){e&&!n.j&&(nu(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(_D(this,r),vD(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Vf(e,Iw)),n.h=new s_(e,n.g))}function En(n,e,t){n.h.set(e,t)}function i_(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Cw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Cw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vf(e,gD,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vf(e,gD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vf(t,"/"==t.charAt(0)?mD:vx,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vf(t,Ex)),n.join("")};var gD=/[#\/\?@]/g,vx=/[#\?:]/g,mD=/[#\?]/g,Iw=/[#\?@]/g,Ex=/#/g;function s_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function nu(n){n.g||(n.g=new bo,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _D(n,e){nu(n),e=ld(n,e),kc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&bw(n)))}function yD(n,e){return nu(n),e=ld(n,e),kc(n.g.h,e)}function vD(n,e,t){_D(n,e),0<t.length&&(n.i=null,n.g.set(ld(n,e),XE(t)),n.h+=t.length)}function ld(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ED(n){this.l=n||bx,n=ct.PerformanceNavigationTiming?0<(n=ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ct.g&&ct.g.Ea&&ct.g.Ea()&&ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Be=s_.prototype).add=function(n,e){nu(this),this.i=null,n=ld(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Be.forEach=function(n,e){nu(this),this.g.forEach(function(t,r){Df(t,function(a){n.call(e,a,r,this)},this)},this)},Be.T=function(){nu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var a=n[r],c=0;c<a.length;c++)t.push(e[r]);return t},Be.R=function(n){nu(this);var e=[];if("string"==typeof n)yD(this,n)&&(e=Dc(e,this.g.get(ld(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Dc(e,n[t])}return e},Be.set=function(n,e){return nu(this),this.i=null,yD(this,n=ld(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Be.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Be.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],a=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var h=a;""!==r[c]&&(h+="="+encodeURIComponent(String(r[c]))),n.push(h)}}return this.i=n.join("&")};var bx=10;function Dw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function dd(n){return n.h?1:n.g?n.g.size:0}function wD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function o_(n,e){n.g?n.g.add(e):n.h=e}function bD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function CD(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return XE(n.i)}function Tw(){}function Cx(){this.g=new Tw}function Ix(n,e,t){const r=t||"";try{fD(n,function(a,c){let h=a;Cf(a)&&(h=hw(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function a_(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(c){}}function Bf(n){this.l=n.$b||null,this.j=n.ib||!1}function Aw(n,e){dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=DD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ED.prototype.cancel=function(){if(this.i=CD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Tw.prototype.stringify=function(n){return ct.JSON.stringify(n,void 0)},Tw.prototype.parse=function(n){return ct.JSON.parse(n,void 0)},qr(Bf,Jm),Bf.prototype.g=function(){return new Aw(this.l,this.j)},Bf.prototype.i=function(n){return function(){return n}}({}),qr(Aw,dr);var DD=0;function Dx(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Oc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jf(n)}function jf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Be=Aw.prototype).open=function(n,e){if(this.readyState!=DD)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jf(this)},Be.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oc(this)),this.readyState=DD},Be.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jf(this)),this.g&&(this.readyState=3,jf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dx(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Be.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Oc(this):jf(this),3==this.readyState&&Dx(this)}},Be.Ua=function(n){this.g&&(this.response=this.responseText=n,Oc(this))},Be.Ta=function(n){this.g&&(this.response=n,Oc(this))},Be.ha=function(){this.g&&Oc(this)},Be.setRequestHeader=function(n,e){this.v.append(n,e)},Be.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Be.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Aw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Tx=ct.JSON.parse;function zn(n){dr.call(this),this.headers=new bo,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=TD,this.K=this.L=!1}qr(zn,dr);var TD="",Ax=/^https?$/i,Sx=["POST","PUT"];function Sw(n){return"content-type"==n.toLowerCase()}function SD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Pc(n),$f(n)}function Pc(n){n.D||(n.D=!0,Rr(n,"complete"),Rr(n,"error"))}function Mr(n){if(n.h&&void 0!==bf&&(!n.C[1]||4!=Hs(n)||2!=n.ba()))if(n.v&&4==Hs(n))id(n.Fa,0,n);else if(Rr(n,"readystatechange"),4==Hs(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===_){var a=String(n.H).match(pD)[1]||null;if(!a&&ct.self&&ct.self.location){var c=ct.self.location.protocol;a=c.substr(0,c.length-1)}r=!Ax.test(a?a.toLowerCase():"")}t=r}if(t)Rr(n,"complete"),Rr(n,"success");else{n.m=6;try{var h=2<Hs(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",Pc(n)}}finally{$f(n)}}}function $f(n,e){if(n.g){ls(n);const t=n.g,r=n.C[0]?td:null;n.g=null,n.C=null,e||Rr(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function ls(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ct.clearTimeout(n.A),n.A=null)}function Hs(n){return n.g?n.g.readyState:0}function RD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case TD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function u_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return tw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function hd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function MD(n){this.za=0,this.l=[],this.h=new eu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=hd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=hd("baseRetryDelayMs",5e3,n),this.$a=hd("retryDelaySeedMs",1e4,n),this.Ya=hd("forwardChannelMaxRetries",2,n),this.ra=hd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ED(n&&n.concurrentRequestLimit),this.Ca=new Cx,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Rw(n){if(xw(n),3==n.G){var e=n.V++,t=oa(n.F);En(t,"SID",n.J),En(t,"RID",e),En(t,"TYPE","terminate"),Co(n,t),(e=new Mc(n,n.h,e,void 0)).K=2,e.v=i_(oa(t)),t=!1,ct.navigator&&ct.navigator.sendBeacon&&(t=ct.navigator.sendBeacon(e.v.toString(),"")),!t&&ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=FD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),tu(e)}OD(n)}function c_(n){n.g&&(kD(n),n.g.cancel(),n.g=null)}function xw(n){c_(n),n.u&&(ct.clearTimeout(n.u),n.u=null),l_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ct.clearTimeout(n.m),n.m=null)}function Mw(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Nw(n)}function Nw(n){Dw(n.i)||n.m||(n.m=!0,xf(n.Ha,n),n.C=0)}function ND(n,e){var t;t=e?e.m:n.V++;const r=oa(n.F);En(r,"SID",n.J),En(r,"RID",t),En(r,"AID",n.U),Co(n,r),n.o&&n.s&&u_(r,n.o,n.s),t=new Mc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xx(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),o_(n.i,t),vw(t,r,e)}function Co(n,e){n.j&&fD({},function(t,r){En(e,r,t)})}function xx(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Cr(n.j.Oa,n.j,n):null;e:{var a=n.l;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let _=!0;for(let w=0;w<t;w++){let I=a[w].h;const A=a[w].g;if(I-=c,0>I)c=Math.max(0,a[w].h-100),_=!1;else try{Ix(A,h,"req"+I+"_")}catch(x){r&&r(A)}}if(_){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function kw(n){n.g||n.u||(n.Y=1,xf(n.Ga,n),n.A=0)}function Ow(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ui(Cr(n.Ga,n),Fw(n,n.A)),n.A++,0))}function kD(n){null!=n.B&&(ct.clearTimeout(n.B),n.B=null)}function Pw(n){n.g=new Mc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=oa(n.oa);En(e,"RID","rpc"),En(e,"SID",n.J),En(e,"CI",n.N?"0":"1"),En(e,"AID",n.U),Co(n,e),En(e,"TYPE","xmlhttp"),n.o&&n.s&&u_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=i_(oa(e)),t.s=null,t.U=!0,Ff(t,n)}function l_(n){null!=n.v&&(ct.clearTimeout(n.v),n.v=null)}function d_(n,e){var t=null;if(n.g==e){l_(n),kD(n),n.g=null;var r=2}else{if(!wD(n.i,e))return;t=e.D,bD(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Rr(r=Nf(),new vn(r,t,e,a)),Nw(n)}else kw(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==r&&function(n,e){return!(dd(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ui(Cr(n.Ha,n,e),Fw(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ow(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:ru(n,5);break;case 4:ru(n,10);break;case 3:ru(n,6);break;default:ru(n,2)}}function Fw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ru(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Cr(n.jb,n);t||(t=new cd("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||hr(t,"https"),i_(t)),function(n,e){const t=new eu;if(ct.Image){const r=new Image;r.onload=If(a_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=If(a_,t,r,"TestLoadImage: error",!1,e),r.onabort=If(a_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=If(a_,t,r,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ln(2);n.G=0,n.j&&n.j.va(e),OD(n),xw(n)}function OD(n){n.G=0,n.I=-1,n.j&&((0!=CD(n.i).length||0!=n.l.length)&&(n.i.i.length=0,XE(n.l),n.l.length=0),n.j.ua())}function PD(n,e,t){let r=function(n){return n instanceof cd?oa(n):new cd(n,void 0)}(t);if(""!=r.i)e&&t_(r,e+"."+r.i),n_(r,r.m);else{const a=ct.location;r=function(n,e,t,r){var a=new cd(null,void 0);return n&&hr(a,n),e&&t_(a,e),t&&n_(a,t),r&&(a.l=r),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&tw(n.aa,function(a,c){En(r,c,a)}),t=n.sa,(e=n.D)&&t&&En(r,e,t),En(r,"VER",n.ma),Co(n,r),r}function FD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(t&&n.Ba&&!n.qa?new Bf({ib:!0}):n.qa)).L=n.H,e}function LD(){}function h_(){if(Tc&&!(10<=Number(lx)))throw Error("Environmental error: no available transport.")}function $i(n,e){dr.call(this),this.g=new MD(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ew(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ew(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Io(this)}function VD(n){mw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UD(){ia.call(this),this.status=1}function Io(n){this.g=n}(Be=zn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_w.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:_w),this.g.onreadystatechange=Cr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void SD(this,c)}n=t||"";const a=new bo(this.headers);r&&fD(r,function(c,h){a.set(h,c)}),r=function(n){e:{var e=Sw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in r&&e.call(void 0,r[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=ct.FormData&&n instanceof ct.FormData,!(0<=Um(Sx,e))||r||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ls(this),0<this.B&&((this.K=function(n){return Tc&&cx()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cr(this.pa,this)):this.A=id(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){SD(this,c)}},Be.pa=function(){void 0!==bf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},Be.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Rr(this,"complete"),Rr(this,"abort"),$f(this))},Be.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$f(this,!0)),zn.Z.M.call(this)},Be.Fa=function(){this.s||(this.F||this.v||this.l?Mr(this):this.cb())},Be.cb=function(){Mr(this)},Be.ba=function(){try{return 2<Hs(this)?this.g.status:-1}catch(n){return-1}},Be.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Be.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Tx(e)}},Be.Da=function(){return this.m},Be.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Be=MD.prototype).ma=8,Be.G=1,Be.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Be.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Mc(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=sx(c),zI(c,this.P)):c=this.P),null===this.o&&(a.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xx(this,a,e),En(t=oa(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),Co(this,t),this.o&&c&&u_(t,this.o,c),o_(this.i,a),this.Ra&&En(t,"TYPE","init"),this.ja?(En(t,"$req",e),En(t,"SID","null"),a.$=!0,vw(a,t,null)):vw(a,t,e),this.G=2}}else 3==this.G&&(n?ND(this,n):0==this.l.length||Dw(this.i)||ND(this))},Be.Ga=function(){if(this.u=null,Pw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ui(Cr(this.bb,this),n)}},Be.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ln(10),c_(this),Pw(this))},Be.ab=function(){null!=this.v&&(this.v=null,c_(this),Ow(this),ln(19))},Be.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ln(2)):(this.h.info("Failed to ping google.com"),ln(1))},(Be=LD.prototype).xa=function(){},Be.wa=function(){},Be.va=function(){},Be.ua=function(){},Be.Oa=function(){},h_.prototype.g=function(n,e){return new $i(n,e)},qr($i,dr),$i.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xf(Cr(n.hb,n,e))),ln(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=PD(n,null,n.W),Nw(n)},$i.prototype.close=function(){Rw(this.g)},$i.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Mw(this.g,e)}else this.v?((e={}).__data__=hw(n),Mw(this.g,e)):Mw(this.g,n)},$i.prototype.M=function(){this.g.j=null,delete this.j,Rw(this.g),delete this.g,$i.Z.M.call(this)},qr(VD,mw),qr(UD,ia),qr(Io,LD),Io.prototype.xa=function(){Rr(this.g,"a")},Io.prototype.wa=function(n){Rr(this.g,new VD(n))},Io.prototype.va=function(n){Rr(this.g,new UD(n))},Io.prototype.ua=function(){Rr(this.g,"b")},h_.prototype.createWebChannel=h_.prototype.g,$i.prototype.send=$i.prototype.u,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,Of.NO_ERROR=0,Of.TIMEOUT=8,Of.HTTP_ERROR=6,cD.COMPLETE="complete",xc.EventType=ra,ra.OPEN="a",ra.CLOSE="b",ra.ERROR="c",ra.MESSAGE="d",dr.prototype.listen=dr.prototype.N,zn.prototype.listenOnce=zn.prototype.O,zn.prototype.getLastError=zn.prototype.La,zn.prototype.getLastErrorCode=zn.prototype.Da,zn.prototype.getStatus=zn.prototype.ba,zn.prototype.getResponseJson=zn.prototype.Qa,zn.prototype.getResponseText=zn.prototype.ga,zn.prototype.send=zn.prototype.ea;var BD=Xo.createWebChannelTransport=function(){return new h_},jD=Xo.getStatEventTarget=function(){return Nf()},f_=Xo.ErrorCode=Of,$D=Xo.EventType=cD,HD=Xo.Event=sd,qD=Xo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Mx=Xo.FetchXmlHttpFactory=Bf,p_=Xo.WebChannel=xc,Nx=Xo.XhrIo=zn;const GD="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let fd="9.6.3";const ds=new us.Yd("@firebase/firestore");function Fc(){return ds.logLevel}function De(n,...e){if(ds.logLevel<=us.in.DEBUG){const t=e.map(pd);ds.debug(`Firestore (${fd}): ${n}`,...t)}}function Qt(n,...e){if(ds.logLevel<=us.in.ERROR){const t=e.map(pd);ds.error(`Firestore (${fd}): ${n}`,...t)}}function Hf(n,...e){if(ds.logLevel<=us.in.WARN){const t=e.map(pd);ds.warn(`Firestore (${fd}): ${n}`,...t)}}function pd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function We(n="Unexpected state"){const e=`FIRESTORE (${fd}) INTERNAL ASSERTION FAILED: `+n;throw Qt(e),new Error(e)}function ut(n,e){n||We()}function xe(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Le.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class g_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ox{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class Px{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fx{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=I=>this.i!==a?(a=this.i,t(I)):Promise.resolve();let h=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Kn,e.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const I=h;e.enqueueRetryable((0,z.Z)(function*(){yield I.promise,yield c(r.currentUser)}))},w=I=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(I=>w(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?w(I):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Kn)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut("string"==typeof r.accessToken),new g_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ut(null===e||"string"==typeof e),new Nr(e)}}class Lx{constructor(e,t,r){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ZD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Lx(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=a=>{e.enqueueRetryable(()=>{return null!=(c=a).error&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`),t(c.token);var c})};const r=a=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?r(a):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut("string"==typeof t.token),new m_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class wi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function zD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}wi.I=-1;class KD{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=zD(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function Lc(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function YD(n){return n+"\0"}class fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gt(e)}static min(){return new gt(new fr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Vx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Un(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vc(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class qf{constructor(e,t,r){void 0===t?t=0:t>e.length&&We(),void 0===r?r=e.length-t:r>e.length-t&&We(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ht extends qf{construct(e,t,r){return new Ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Ht(t)}static emptyPath(){return new Ht([])}}const _O=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends qf{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return _O.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,a+=2}else"`"===_?(h=!h,a++):"."!==_||h?(r+=_,a++):(c(),a++)}if(c(),h)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class gd{constructor(e){this.fields=e,e.sort(Bn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const QD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(n){if(ut(!!n),"string"==typeof n){let e=0;const t=QD.exec(n);if(ut(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function su(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function __(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Vw(n){const e=n.mapValue.fields.__previous_value__;return __(e)?Vw(e):e}function ou(n){const e=iu(n.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}function aa(n){return null==n}function Uw(n){return 0===n&&1/n==-1/0}function Bw(n){return"number"==typeof n&&Number.isInteger(n)&&!Uw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Ht.fromString(e))}static fromName(e){return new Ge(Ht.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Ht.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Ht(e.slice()))}}function au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?__(n)?4:10:We()}function Hi(n,e){if(n===e)return!0;const t=au(n);if(t!==au(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=iu(r.timestampValue),h=iu(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,su(n.bytesValue).isEqual(su(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return Yn(r.geoPointValue.latitude)===Yn(a.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return Yn(r.integerValue)===Yn(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=Yn(r.doubleValue),h=Yn(a.doubleValue);return c===h?Uw(c)===Uw(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Lc(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(Vx(c)!==Vx(h))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===h[_]||!Hi(c[_],h[_])))return!1;return!0}(n,e);default:return We()}var a}function md(n,e){return void 0!==(n.values||[]).find(t=>Hi(t,e))}function _d(n,e){if(n===e)return 0;const t=au(n),r=au(e);if(t!==r)return Tt(t,r);switch(t){case 0:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=Yn(a.integerValue||a.doubleValue),_=Yn(c.integerValue||c.doubleValue);return h<_?-1:h>_?1:h===_?0:isNaN(h)?isNaN(_)?0:-1:1}(n,e);case 3:return y_(n.timestampValue,e.timestampValue);case 4:return y_(ou(n),ou(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(a,c){const h=su(a),_=su(c);return h.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),_=c.split("/");for(let w=0;w<h.length&&w<_.length;w++){const I=Tt(h[w],_[w]);if(0!==I)return I}return Tt(h.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Tt(Yn(a.latitude),Yn(c.latitude));return 0!==h?h:Tt(Yn(a.longitude),Yn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],_=c.values||[];for(let w=0;w<h.length&&w<_.length;++w){const I=_d(h[w],_[w]);if(I)return I}return Tt(h.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){const h=a.fields||{},_=Object.keys(h),w=c.fields||{},I=Object.keys(w);_.sort(),I.sort();for(let A=0;A<_.length&&A<I.length;++A){const x=Tt(_[A],I[A]);if(0!==x)return x;const F=_d(h[_[A]],w[I[A]]);if(0!==F)return F}return Tt(_.length,I.length)}(n.mapValue,e.mapValue);default:throw We()}}function y_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=iu(n),r=iu(e),a=Tt(t.seconds,r.seconds);return 0!==a?a:Tt(t.nanos,r.nanos)}function Gf(n){return jw(n)}function jw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=iu(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?su(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=jw(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const _ of a)h?h=!1:c+=",",c+=`${_}:${jw(r.fields[_])}`;return c+"}"}(n.mapValue):We();var e}function v_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function E_(n){return!!n&&"integerValue"in n}function w_(n){return!!n&&"arrayValue"in n}function $w(n){return!!n&&"nullValue"in n}function JD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zf(n){return!!n&&"mapValue"in n}function yd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Un(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yd(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yd(t)}setAll(e){let t=Bn.emptyPath(),r={},a=[];e.forEach((h,_)=>{if(!t.isImmediateParentOf(_)){const w=this.getFieldsMap(t);this.applyChanges(w,r,a),r={},a=[],t=_.popLast()}h?r[_.lastSegment()]=yd(h):a.push(_.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Zf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Un(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new Gr(yd(this.value))}}function XD(n){const e=[];return Un(n.fields,(t,r)=>{const a=new Bn([t]);if(Zf(r)){const c=XD(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new gd(e)}class pn{constructor(e,t,r,a,c){this.key=e,this.documentType=t,this.version=r,this.data=a,this.documentState=c}static newInvalidDocument(e){return new pn(e,0,gt.min(),Gr.empty(),0)}static newFoundDocument(e,t,r){return new pn(e,1,t,r,0)}static newNoDocument(e,t){return new pn(e,2,t,Gr.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Gr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ux{constructor(e,t=null,r=[],a=[],c=null,h=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=_,this.R=null}}function Hw(n,e=null,t=[],r=[],a=null,c=null,h=null){return new Ux(n,e,t,r,a,c,h)}function vd(n){const e=xe(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+Gf(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),aa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=qw(e.startAt)),e.endAt&&(t+="|ub:",t+=qw(e.endAt)),e.R=t}return e.R}function Wf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!IO(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Hi(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hx(n.startAt,e.startAt)&&Hx(n.endAt,e.endAt)}function b_(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ci extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new tT(e,t,r):"array-contains"===t?new EO(e,r):"in"===t?new wO(e,r):"not-in"===t?new bO(e,r):"array-contains-any"===t?new CO(e,r):new ci(e,t,r)}static P(e,t,r){return"in"===t?new yO(e,r):new vO(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(_d(t,this.value)):null!==t&&au(this.value)===au(t)&&this.v(_d(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return We()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tT extends ci{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class yO extends ci{constructor(e,t){super(e,"in",t),this.keys=jx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vO extends ci{constructor(e,t){super(e,"not-in",t),this.keys=jx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class EO extends ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return w_(t)&&md(t.arrayValue,this.value)}}class wO extends ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&md(this.value.arrayValue,t)}}class bO extends ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!md(this.value.arrayValue,t)}}class CO extends ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!w_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>md(this.value.arrayValue,r))}}class C_{constructor(e,t){this.position=e,this.before=t}}function qw(n){return`${n.before?"b":"a"}:${n.position.map(e=>Gf(e)).join(",")}`}class zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function IO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function $x(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?Ge.comparator(Ge.fromName(h.referenceValue),t.key):_d(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function Hx(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}class uu{constructor(e,t=null,r=[],a=[],c=null,h="F",_=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=_,this.endAt=w,this.S=null,this.D=null}}function qx(n,e,t,r,a,c,h,_){return new uu(n,e,t,r,a,c,h,_)}function Kf(n){return new uu(n)}function Gw(n){return!aa(n.limit)&&"F"===n.limitType}function I_(n){return!aa(n.limit)&&"L"===n.limitType}function Zw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ww(n){for(const e of n.filters)if(e.V())return e.field;return null}function nT(n){return null!==n.collectionGroup}function Yf(n){const e=xe(n);if(null===e.S){e.S=[];const t=Ww(e),r=Zw(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new zf(t)),e.S.push(new zf(Bn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.S.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new zf(Bn.keyField(),c))}}}return e.S}function qs(n){const e=xe(n);if(!e.D)if("F"===e.limitType)e.D=Hw(e.path,e.collectionGroup,Yf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Yf(e))t.push(new zf(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new C_(e.endAt.position,!e.endAt.before):null,a=e.startAt?new C_(e.startAt.position,!e.startAt.before):null;e.D=Hw(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.D}function rT(n,e,t){return new uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qf(n,e){return Wf(qs(n),qs(e))&&n.limitType===e.limitType}function iT(n){return`${vd(qs(n))}|lt:${n.limitType}`}function sT(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Gf(r.value)}`;var r}).join(", ")}]`),aa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+qw(n.startAt)),n.endAt&&(e+=", endAt: "+qw(n.endAt)),`Target(${e})`}(qs(n))}; limitType=${n.limitType})`}function D_(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ge.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!$x(t.startAt,Yf(t),r)||t.endAt&&$x(t.endAt,Yf(t),r)));var t,r}function Gx(n){return(e,t)=>{let r=!1;for(const a of Yf(n)){const c=DO(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function DO(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(a,c,h){const _=c.data.field(a),w=h.data.field(a);return null!==_&&null!==w?_d(_,w):We()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return We()}}function oT(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uw(e)?"-0":e}}function Zx(n){return{integerValue:""+n}}function aT(n,e){return Bw(e)?Zx(e):oT(n,e)}class Ed{constructor(){this._=void 0}}function wd(n,e,t){return n instanceof bd?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof ua?zw(n,e):n instanceof cu?Kw(n,e):function(r,a){const c=cT(r,a),h=Yw(c)+Yw(r.N);return E_(c)&&E_(r.N)?Zx(h):oT(r.k,h)}(n,e)}function uT(n,e,t){return n instanceof ua?zw(n,e):n instanceof cu?Kw(n,e):t}function cT(n,e){return n instanceof Jf?E_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bd extends Ed{}class ua extends Ed{constructor(e){super(),this.elements=e}}function zw(n,e){const t=Xf(e);for(const r of n.elements)t.some(a=>Hi(a,r))||t.push(r);return{arrayValue:{values:t}}}class cu extends Ed{constructor(e){super(),this.elements=e}}function Kw(n,e){let t=Xf(e);for(const r of n.elements)t=t.filter(a=>!Hi(a,r));return{arrayValue:{values:t}}}class Jf extends Ed{constructor(e,t){super(),this.k=e,this.N=t}}function Yw(n){return Yn(n.integerValue||n.doubleValue)}function Xf(n){return w_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Cd{constructor(e,t){this.field=e,this.transform=t}}class AO{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function T_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qw{}function A_(n,e,t){n instanceof ep?function(r,a,c){const h=r.value.clone(),_=lT(r.fieldTransforms,a,c.transformResults);h.setAll(_),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Uc?function(r,a,c){if(!T_(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=lT(r.fieldTransforms,a,c.transformResults),_=a.data;_.setAll(zx(r)),_.setAll(h),a.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Jw(n,e,t){var a;n instanceof ep?function(r,a,c){if(!T_(r.precondition,a))return;const h=r.value.clone(),_=Kx(r.fieldTransforms,c,a);h.setAll(_),a.convertToFoundDocument(S_(a),h).setHasLocalMutations()}(n,e,t):n instanceof Uc?function(r,a,c){if(!T_(r.precondition,a))return;const h=Kx(r.fieldTransforms,c,a),_=a.data;_.setAll(zx(r)),_.setAll(h),a.convertToFoundDocument(S_(a),_).setHasLocalMutations()}(n,e,t):T_(n.precondition,a=e)&&a.convertToNoDocument(gt.min())}function SO(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=cT(r.transform,a||null);null!=c&&(null==t&&(t=Gr.empty()),t.set(r.field,c))}return t||null}function Wx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Lc(t,r,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ua&&r instanceof ua||t instanceof cu&&r instanceof cu?Lc(t.elements,r.elements,Hi):t instanceof Jf&&r instanceof Jf?Hi(t.N,r.N):t instanceof bd&&r instanceof bd);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function S_(n){return n.isFoundDocument()?n.version:gt.min()}class ep extends Qw{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}}class Uc extends Qw{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}}function zx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lT(n,e,t){const r=new Map;ut(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,_=e.data.field(c.field);r.set(c.field,uT(h,_,t[a]))}return r}function Kx(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,wd(c,h,e))}return r}class Id extends Qw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Xw extends Qw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class RO{constructor(e){this.count=e}}var mr,Pt;function Dd(n){switch(n){default:return We();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function dT(n){if(void 0===n)return Qt("GRPC error has no .code"),ne.UNKNOWN;switch(n){case mr.OK:return ne.OK;case mr.CANCELLED:return ne.CANCELLED;case mr.UNKNOWN:return ne.UNKNOWN;case mr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case mr.INTERNAL:return ne.INTERNAL;case mr.UNAVAILABLE:return ne.UNAVAILABLE;case mr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case mr.NOT_FOUND:return ne.NOT_FOUND;case mr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case mr.ABORTED:return ne.ABORTED;case mr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case mr.DATA_LOSS:return ne.DATA_LOSS;default:return We()}}(Pt=mr||(mr={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";class _r{constructor(e,t){this.comparator=e,this.root=t||yr.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new R_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new R_(this.root,e,this.comparator,!1)}getReverseIterator(){return new R_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new R_(this.root,e,this.comparator,!0)}}class R_{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=null!=r?r:yr.RED,this.left=null!=a?a:yr.EMPTY,this.right=null!=c?c:yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new yr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return yr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw We();const e=this.left.check();if(e!==this.right.check())throw We();return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1,yr.EMPTY=new class{constructor(){this.size=0}get key(){throw We()}get value(){throw We()}get color(){throw We()}get left(){throw We()}get right(){throw We()}copy(n,e,t,r,a){return this}insert(n,e,t){return new yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bi(this.data.getIterator())}getIteratorFrom(e){return new bi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class bi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Yx=new _r(Ge.comparator);function Ci(){return Yx}const Qx=new _r(Ge.comparator);function eb(){return Qx}const tb=new _r(Ge.comparator);function nb(){return tb}const hT=new On(Ge.comparator);function Jt(...n){let e=hT;for(const t of n)e=e.add(t);return e}const fT=new On(Tt);function tp(){return fT}class np{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,rp.createSynthesizedTargetChangeForCurrentChange(e,t)),new np(gt.min(),r,tp(),Ci(),Jt())}}class rp{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new rp(pr.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class Td{constructor(e,t,r,a){this.$=e,this.removedTargetIds=t,this.key=r,this.O=a}}class rb{constructor(e,t){this.targetId=e,this.M=t}}class ib{constructor(e,t,r=pr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class x_{constructor(){this.F=0,this.L=pT(),this.B=pr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Jt(),t=Jt(),r=Jt();return this.L.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:We()}}),new rp(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=pT()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class Jx{constructor(e){this.et=e,this.nt=new Map,this.st=Ci(),this.it=hs(),this.rt=new On(Tt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:We()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,a)=>{this.lt(a)&&t(a)})}dt(e){const t=e.targetId,r=e.M.count,a=this.wt(t);if(a){const c=a.target;if(b_(c))if(0===r){const h=new Ge(c.path);this.at(t,h,pn.newNoDocument(h,gt.min()))}else ut(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((c,h)=>{const _=this.wt(h);if(_){if(c.current&&b_(_.target)){const w=new Ge(_.target.path);null!==this.st.get(w)||this.yt(h,w)||this.at(h,w,pn.newNoDocument(w,e))}c.j&&(t.set(h,c.G()),c.H())}});let r=Jt();this.it.forEach((c,h)=>{let _=!0;h.forEachWhile(w=>{const I=this.wt(w);return!I||2===I.purpose||(_=!1,!1)}),_&&(r=r.add(c))});const a=new np(e,t,this.rt,this.st,r);return this.st=Ci(),this.it=hs(),this.rt=new On(Tt),a}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const a=this.ht(e);this.yt(e,t)?a.J(t,1):a.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new x_,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new On(Tt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||De("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new x_),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function hs(){return new _r(Ge.comparator)}function pT(){return new _r(Ge.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},Xx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class MO{constructor(e,t){this.databaseId=e,this.C=t}}function ip(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gT(n,e){return n.C?e.toBase64():e.toUint8Array()}function eM(n,e){return ip(n,e.toTimestamp())}function kr(n){return ut(!!n),gt.fromTimestamp(function(e){const t=iu(e);return new fr(t.seconds,t.nanos)}(n))}function sb(n,e){return(t=n,new Ht(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ob(n){const e=Ht.fromString(n);return ut(CT(e)),e}function sp(n,e){return sb(n.databaseId,e.path)}function Do(n,e){const t=ob(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(ab(t))}function M_(n,e){return sb(n.databaseId,e)}function mT(n){const e=ob(n);return 4===e.length?Ht.emptyPath():ab(e)}function N_(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ab(n){return ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ub(n,e,t){return{name:sp(n,e),fields:t.value.mapValue.fields}}function _T(n,e,t){const r=Do(n,e.name),a=kr(e.updateTime),c=new Gr({mapValue:{fields:e.fields}}),h=pn.newFoundDocument(r,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function lu(n,e){let t;if(e instanceof ep)t={update:ub(n,e.key,e.value)};else if(e instanceof Id)t={delete:sp(n,e.key)};else if(e instanceof Uc)t={update:ub(n,e.key,e.data),updateMask:OO(e.fieldMask)};else{if(!(e instanceof Xw))return We();t={verify:sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof bd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ua)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof cu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Jf)return{fieldPath:c.field.canonicalString(),increment:h.N};throw We()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:eM(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:We()),t;var a}function k_(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?gr.updateTime(kr(a.updateTime)):void 0!==a.exists?gr.exists(a.exists):gr.none():gr.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let _=null;"setToServerValue"in h?(ut("REQUEST_TIME"===h.setToServerValue),_=new bd):"appendMissingElements"in h?_=new ua(h.appendMissingElements.values||[]):"removeAllFromArray"in h?_=new cu(h.removeAllFromArray.values||[]):"increment"in h?_=new Jf(c,h.increment):We();const w=Bn.fromServerFormat(h.fieldPath);return new Cd(w,_)}(n,a)):[];var a;if(e.update){const a=Do(n,e.update.name),c=new Gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new gd((e.updateMask.fieldPaths||[]).map(I=>Bn.fromServerFormat(I)));return new Uc(a,c,h,t,r)}return new ep(a,c,t,r)}if(e.delete){const a=Do(n,e.delete);return new Id(a,t)}if(e.verify){const a=Do(n,e.verify);return new Xw(a,t)}return We()}function ET(n,e){return{documents:[M_(n,e.path)]}}function wT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=M_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=M_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(_){if(0===_.length)return;const w=_.map(I=>function(A){if("=="===A.op){if(JD(A.value))return{unaryFilter:{field:Ad(A.field),op:"IS_NAN"}};if($w(A.value))return{unaryFilter:{field:Ad(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(JD(A.value))return{unaryFilter:{field:Ad(A.field),op:"IS_NOT_NAN"}};if($w(A.value))return{unaryFilter:{field:Ad(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ad(A.field),op:sM(A.op),value:A.value}}}(I));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(_){if(0!==_.length)return _.map(w=>{return{field:Ad((I=w).field),direction:iM(I.dir)};var I})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(w=e.limit,n.C||aa(w)?w:{value:w});var w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=cb(e.startAt)),e.endAt&&(t.structuredQuery.endAt=cb(e.endAt)),t}function nM(n){let e=mT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ut(1===r);const A=t.from[0];A.allDescendants?a=A.collectionId:e=e.child(A.collectionId)}let c=[];t.where&&(c=rM(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(A=>{return new zf(Sd((x=A).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let _=null;t.limit&&(_=function(A){let x;return x="object"==typeof A?A.value:A,aa(x)?null:x}(t.limit));let w=null;t.startAt&&(w=lb(t.startAt));let I=null;return t.endAt&&(I=lb(t.endAt)),qx(e,a,h,c,_,"F",w,I)}function rM(n){return n?void 0!==n.unaryFilter?[kO(n)]:void 0!==n.fieldFilter?[bT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>rM(e)).reduce((e,t)=>e.concat(t)):We():[]}function cb(n){return{before:n.before,values:n.position}}function lb(n){return new C_(n.values||[],!!n.before)}function iM(n){return xO[n]}function sM(n){return Xx[n]}function Ad(n){return{fieldPath:n.canonicalString()}}function Sd(n){return Bn.fromServerFormat(n.fieldPath)}function bT(n){return ci.create(Sd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return We()}}(n.fieldFilter.op),n.fieldFilter.value)}function kO(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Sd(n.unaryFilter.field);return ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Sd(n.unaryFilter.field);return ci.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sd(n.unaryFilter.field);return ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Sd(n.unaryFilter.field);return ci.create(a,"!=",{nullValue:"NULL_VALUE"});default:return We()}}function OO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oM(e)),e=Ir(n.get(t),e);return oM(e)}function Ir(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function oM(n){return n+"\x01\x01"}function To(n){const e=n.length;if(ut(e>=2),2===e)return ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ht.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&We(),n.charAt(h+1)){case"\x01":const _=n.substring(c,h);let w;0===a.length?w=_:(a+=_,w=a,a=""),r.push(w);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:We()}c=h+2}return new Ht(r)}class IT{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Gi{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Gi.store="owner",Gi.key="owner";class Gs{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Gs.store="mutationQueues",Gs.keyPath="userId";class gn{constructor(e,t,r,a,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=a,this.mutations=c}}gn.store="mutations",gn.keyPath="batchId",gn.userMutationsIndex="userMutationsIndex",gn.userMutationsKeyPath=["userId","batchId"];class Zr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,qi(t)]}static key(e,t,r){return[e,qi(t),r]}}Zr.store="documentMutations",Zr.PLACEHOLDER=new Zr;class DT{constructor(e,t){this.path=e,this.readTime=t}}class Bc{constructor(e,t){this.path=e,this.version=t}}class An{constructor(e,t,r,a,c,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=a,this.readTime=c,this.parentPath=h}}An.store="remoteDocuments",An.readTimeIndex="readTimeIndex",An.readTimeIndexPath="readTime",An.collectionReadTimeIndex="collectionReadTimeIndex",An.collectionReadTimeIndexPath=["parentPath","readTime"];class fs{constructor(e){this.byteSize=e}}fs.store="remoteDocumentGlobal",fs.key="remoteDocumentGlobalKey";class Wr{constructor(e,t,r,a,c,h,_){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=a,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=_}}Wr.store="targets",Wr.keyPath="targetId",Wr.queryTargetsIndexName="queryTargetsIndex",Wr.queryTargetsKeyPath=["canonicalId","targetId"];class Or{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Or.store="targetDocuments",Or.keyPath=["targetId","path"],Or.documentTargetsIndex="documentTargetsIndex",Or.documentTargetsKeyPath=["path","targetId"];class zr{constructor(e,t,r,a){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=a}}zr.key="targetGlobalKey",zr.store="targetGlobal";class jc{constructor(e,t){this.collectionId=e,this.parent=t}}jc.store="collectionParents",jc.keyPath=["collectionId","parent"];class Zs{constructor(e,t,r,a){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=a}}Zs.store="clientMetadata",Zs.keyPath="clientId";class $c{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}$c.store="bundles",$c.keyPath="bundleId";class Sn{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Sn.store="namedQueries",Sn.keyPath="name";const PO=[Gs.store,gn.store,Zr.store,An.store,Wr.store,Gi.store,zr.store,Or.store,Zs.store,fs.store,jc.store,$c.store,Sn.store],TT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let a=0,c=0,h=!1;e.forEach(_=>{++a,_.next(()=>{++c,h&&c===a&&t()},w=>r(w))}),h=!0,c===a&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(a=>a?ge.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}}class Hc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Kn,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new O_(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const a=db(r.target.error);this.It.reject(new O_(e,a))}}static open(e,t,r,a){try{return new Hc(t,e.transaction(a,r))}catch(c){throw new O_(t,c)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(De("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new aM(t)}}class Ws{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Ws.bt((0,Le.z$)())&&Qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return De("SimpleDb","Removing database:",e),qc(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,Le.hl)())return!1;if(Ws.vt())return!0;const e=(0,Le.z$)(),t=Ws.bt(e),r=0<t&&t<10,a=Ws.Vt(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,z.Z)(function*(){return t.db||(De("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new O_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const _=h.target.error;a("VersionError"===_.name?new me(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new me(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new O_(e,_))},c.onupgradeneeded=h=>{De("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Rt.Nt(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{De("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,z.Z)(function*(){const h="readonly"===t;let _=0;for(;;){++_;try{c.db=yield c.Ct(e);const w=Hc.open(c.db,e,h?"readonly":"readwrite",r),I=a(w).catch(A=>(w.abort(A),ge.reject(A))).toPromise();return I.catch(()=>{}),yield w.At,I}catch(w){const I="FirebaseError"!==w.name&&_<3;if(De("SimpleDb","Transaction failed with error:",w.message,"Retrying:",I),c.close(),!I)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class FO{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return qc(this.$t.delete())}}class O_ extends me{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rd(n){return"IndexedDbTransactionError"===n.name}class aM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(De("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(De("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qc(r)}add(e){return De("SimpleDb","ADD",this.store.name,e,e),qc(this.store.add(e))}get(e){return qc(this.store.get(e)).next(t=>(void 0===t&&(t=null),De("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return De("SimpleDb","DELETE",this.store.name,e),qc(this.store.delete(e))}count(){return De("SimpleDb","COUNT",this.store.name),qc(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),a=[];return this.Ut(r,(c,h)=>{a.push(h)}).next(()=>a)}qt(e,t){De("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const a=this.cursor(r);return this.Ut(a,(c,h,_)=>_.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Ut(a,t)}Qt(e){const t=this.cursor({});return new ge((r,a)=>{t.onerror=c=>{const h=db(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(_=>{_?h.continue():r()}):r()}})}Ut(e,t){const r=[];return new ge((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const _=h.target.result;if(!_)return void a();const w=new FO(_),I=t(_.primaryKey,_.value,w);if(I instanceof ge){const A=I.catch(x=>(w.done(),ge.reject(x)));r.push(A)}w.isDone?a():null===w.Ft?_.continue():_.continue(w.Ft)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qc(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=db(r.target.error);t(a)}})}let ST=!1;function db(n){const e=Ws.bt((0,Le.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ST||(ST=!0,setTimeout(()=>{throw r},0)),r}}return n}class RT extends AT{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Zi(n,e){const t=xe(n);return Ws.Dt(t.Wt,e)}class hb{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&A_(c,e,r[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Jw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Jw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),a=r;this.applyToLocalView(a),r.isValidDocument()||a.convertToNoDocument(gt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&Lc(this.mutations,e.mutations,(t,r)=>Wx(t,r))&&Lc(this.baseMutations,e.baseMutations,(t,r)=>Wx(t,r))}}class fb{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ut(e.mutations.length===r.length);let a=nb();const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new fb(e,t,r,a)}}class du{constructor(e,t,r,a,c=gt.min(),h=gt.min(),_=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=_}withSequenceNumber(e){return new du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class uM{constructor(e){this.Gt=e}}function xT(n,e){if(e.document)return _T(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ge.fromSegments(e.noDocument.path),r=Md(e.noDocument.readTime),a=pn.newNoDocument(t,r);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){const t=Ge.fromSegments(e.unknownDocument.path),r=Md(e.unknownDocument.version);return pn.newUnknownDocument(t,r)}return We()}function MT(n,e,t){const r=pb(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){const c={name:sp(_=n.Gt,(w=e).key),fields:w.data.value.mapValue.fields,updateTime:ip(_,w.version.toTimestamp())};return new An(null,null,c,e.hasCommittedMutations,r,a)}var _,w;if(e.isNoDocument()){const c=e.key.path.toArray(),h=xd(e.version),_=e.hasCommittedMutations;return new An(null,new DT(c,h),null,_,r,a)}if(e.isUnknownDocument()){const c=e.key.path.toArray(),h=xd(e.version);return new An(new Bc(c,h),null,null,!0,r,a)}return We()}function pb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function NT(n){const e=new fr(n[0],n[1]);return gt.fromTimestamp(e)}function xd(n){const e=n.toTimestamp();return new IT(e.seconds,e.nanoseconds)}function Md(n){const e=new fr(n.seconds,n.nanoseconds);return gt.fromTimestamp(e)}function Kr(n,e){const t=(e.baseMutations||[]).map(c=>k_(n.Gt,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>k_(n.Gt,c)),a=fr.fromMillis(e.localWriteTimeMs);return new hb(e.batchId,a,t,r)}function op(n){const e=Md(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Md(n.lastLimboFreeSnapshotVersion):gt.min();let r;var a;return void 0!==n.query.documents?(ut(1===(a=n.query).documents.length),r=qs(Kf(mT(a.documents[0])))):r=qs(nM(n.query)),new du(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function kT(n,e){const t=xd(e.snapshotVersion),r=xd(e.lastLimboFreeSnapshotVersion);let a;a=b_(e.target)?ET(n.Gt,e.target):wT(n.Gt,e.target);const c=e.resumeToken.toBase64();return new Wr(e.targetId,vd(e.target),t,c,e.sequenceNumber,r,a)}function gb(n){const e=nM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rT(e,e.limit,"L"):e}class cM{getBundleMetadata(e,t){return lM(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Md(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return lM(e).put({bundleId:(r=t).id,createTime:xd(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return OT(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:gb(a.bundledQuery),readTime:Md(a.readTime)};var a})}saveNamedQuery(e,t){return OT(e).put({name:(r=t).name,readTime:xd(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function lM(n){return Zi(n,$c.store)}function OT(n){return Zi(n,Sn.store)}class dM{constructor(){this.zt=new mb}addToCollectionParentIndex(e,t){return this.zt.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.zt.getEntries(t))}}class mb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new On(Ht.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new On(Ht.comparator)).toArray()}}class ap{constructor(){this.Ht=new mb}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const c={collectionId:r,parent:qi(a)};return _b(e).put(c)}return ge.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[YD(t),""],!1,!0);return _b(e).Bt(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(To(h.parent))}return r})}}function _b(n){return Zi(n,jc.store)}const hM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ii{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ii(e,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fM(n,e,t){const r=n.store(gn.store),a=n.store(Zr.store),c=[],h=IDBKeyRange.only(t.batchId);let _=0;const w=r.jt({range:h},(A,x,F)=>(_++,F.delete()));c.push(w.next(()=>{ut(1===_)}));const I=[];for(const A of t.mutations){const x=Zr.key(e,A.key.path,t.batchId);c.push(a.delete(x)),I.push(A.key)}return ge.waitFor(c).next(()=>I)}function yb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw We();e=n.noDocument}return JSON.stringify(e).length}Ii.DEFAULT_COLLECTION_PERCENTILE=10,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ii.DEFAULT=new Ii(41943040,Ii.DEFAULT_COLLECTION_PERCENTILE,Ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ii.DISABLED=new Ii(-1,0,0);class PT{constructor(e,t,r,a){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=a,this.Yt={}}static Xt(e,t,r,a){ut(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new PT(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).jt({index:gn.userMutationsIndex,range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=Nd(e),h=hu(e);return h.add({}).next(_=>{ut("number"==typeof _);const w=new hb(_,t,r,a),I=function(F,Z,te){const Ee=te.baseMutations.map(Xe=>lu(F.Gt,Xe)),Te=te.mutations.map(Xe=>lu(F.Gt,Xe));return new gn(Z,te.batchId,te.localWriteTime.toMillis(),Ee,Te)}(this.k,this.userId,w),A=[];let x=new On((F,Z)=>Tt(F.canonicalString(),Z.canonicalString()));for(const F of a){const Z=Zr.key(this.userId,F.key.path,_);x=x.add(F.key.path.popLast()),A.push(h.put(I)),A.push(c.put(Z,Zr.PLACEHOLDER))}return x.forEach(F=>{A.push(this.Jt.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Yt[_]=w.keys()}),ge.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return hu(e).get(t).next(r=>r?(ut(r.userId===this.userId),Kr(this.k,r)):null)}Zt(e,t){return this.Yt[t]?ge.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Yt[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return hu(e).jt({index:gn.userMutationsIndex,range:a},(h,_,w)=>{_.userId===this.userId&&(ut(_.batchId>=r),c=Kr(this.k,_)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hu(e).jt({index:gn.userMutationsIndex,range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).Bt(gn.userMutationsIndex,t).next(r=>r.map(a=>Kr(this.k,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zr.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Nd(e).jt({range:a},(h,_,w)=>{const[I,A,x]=h,F=To(A);if(I===this.userId&&t.path.isEqual(F))return hu(e).get(x).next(Z=>{if(!Z)throw We();ut(Z.userId===this.userId),c.push(Kr(this.k,Z))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Tt);const a=[];return t.forEach(c=>{const h=Zr.prefixForPath(this.userId,c.path),_=IDBKeyRange.lowerBound(h),w=Nd(e).jt({range:_},(I,A,x)=>{const[F,Z,te]=I,Ee=To(Z);F===this.userId&&c.path.isEqual(Ee)?r=r.add(te):x.done()});a.push(w)}),ge.waitFor(a).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=Zr.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(c);let _=new On(Tt);return Nd(e).jt({range:h},(w,I,A)=>{const[x,F,Z]=w,te=To(F);x===this.userId&&r.isPrefixOf(te)?te.length===a&&(_=_.add(Z)):A.done()}).next(()=>this.te(e,_))}te(e,t){const r=[],a=[];return t.forEach(c=>{a.push(hu(e).get(c).next(h=>{if(null===h)throw We();ut(h.userId===this.userId),r.push(Kr(this.k,h))}))}),ge.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return fM(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),ge.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(Zr.prefixForUser(this.userId)),a=[];return Nd(e).jt({range:r},(c,h,_)=>{if(c[0]===this.userId){const w=To(c[1]);a.push(w)}else _.done()}).next(()=>{ut(0===a.length)})})}containsKey(e,t){return P_(e,this.userId,t)}ne(e){return FT(e).get(this.userId).next(t=>t||new Gs(this.userId,-1,""))}}function P_(n,e,t){const r=Zr.prefixForPath(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return Nd(n).jt({range:c,Kt:!0},(_,w,I)=>{const[A,x,F]=_;A===e&&x===a&&(h=!0),I.done()}).next(()=>h)}function hu(n){return Zi(n,gn.store)}function Nd(n){return Zi(n,Zr.store)}function FT(n){return Zi(n,Gs.store)}class kd{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new kd(0)}static re(){return new kd(-1)}}class pM{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new kd(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>gt.fromTimestamp(new fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.ce(e,a)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Od(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(ut(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return Od(e).jt((h,_)=>{const w=op(_);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(a++,c.push(this.removeTargetData(e,w)))}).next(()=>ge.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Od(e).jt((r,a)=>{const c=op(a);t(c)})}oe(e){return LT(e).get(zr.key).next(t=>(ut(null!==t),t))}ce(e,t){return LT(e).put(zr.key,t)}ae(e,t){return Od(e).put(kT(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vd(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Od(e).jt({range:a,index:Wr.queryTargetsIndexName},(h,_,w)=>{const I=op(_);Wf(t,I.target)&&(c=I,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Dr(e);return t.forEach(h=>{const _=qi(h.path);a.push(c.put(new Or(r,_))),a.push(this.referenceDelegate.addReference(e,r,h))}),ge.waitFor(a)}removeMatchingKeys(e,t,r){const a=Dr(e);return ge.forEach(t,c=>{const h=qi(c.path);return ge.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Dr(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Dr(e);let c=Jt();return a.jt({range:r,Kt:!0},(h,_,w)=>{const I=To(h[1]),A=new Ge(I);c=c.add(A)}).next(()=>c)}containsKey(e,t){const r=qi(t.path),a=IDBKeyRange.bound([r],[YD(r)],!1,!0);let c=0;return Dr(e).jt({index:Or.documentTargetsIndex,Kt:!0,range:a},([h,_],w,I)=>{0!==h&&(c++,I.done())}).next(()=>c>0)}Et(e,t){return Od(e).get(t).next(r=>r?op(r):null)}}function Od(n){return Zi(n,Wr.store)}function LT(n){return Zi(n,zr.store)}function Dr(n){return Zi(n,Or.store)}function Pd(n){return F_.apply(this,arguments)}function F_(){return(F_=(0,z.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==TT)throw n;De("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function VT([n,e],[t,r]){const a=Tt(n,t);return 0===a?Tt(e,r):a}class UT{constructor(e){this.he=e,this.buffer=new On(VT),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;De("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,z.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){Rd(a)?De("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Pd(a)}yield t.me(e)}))}}class jT{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(wi.I);const r=new UT(t);return this.ge.forEachTarget(e,a=>r.de(a.sequenceNumber)).next(()=>this.ge.pe(e,a=>r.de(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(hM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hM):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,a,c,h,_,w,I;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,h=Date.now(),this.nthSequenceNumber(e,a))).next(x=>(r=x,_=Date.now(),this.removeTargets(e,r,t))).next(x=>(c=x,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),Fc()<=us.in.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-A}ms\n\tDetermined least recently used ${a} in `+(_-h)+`ms\n\tRemoved ${c} targets in `+(w-_)+`ms\n\tRemoved ${x} documents in `+(I-w)+`ms\nTotal Duration: ${I-A}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:x})))}}class vb{constructor(e,t){this.db=e,this.garbageCollector=new jT(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,a)=>t(a))}addReference(e,t,r){return Fd(e,r)}removeReference(e,t,r){return Fd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Fd(e,t)}Ae(e,t){return function(r,a){let c=!1;return FT(r).Qt(h=>P_(r,h,a).next(_=>(_&&(c=!0),ge.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Ie(e,(h,_)=>{if(_<=t){const w=this.Ae(e,h).next(I=>{if(!I)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h),Dr(e).delete([0,qi(h.path)])))});a.push(w)}}).next(()=>ge.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Fd(e,t)}Ie(e,t){const r=Dr(e);let a,c=wi.I;return r.jt({index:Or.documentTargetsIndex},([h,_],{path:w,sequenceNumber:I})=>{0===h?(c!==wi.I&&t(new Ge(To(a)),c),c=I,a=w):c=wi.I}).next(()=>{c!==wi.I&&t(new Ge(To(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fd(n,e){return Dr(n).put((r=n.currentSequenceNumber,new Or(0,qi(e.path),r)));var r}class fu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0!==a){for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),!0;return!1}forEach(e){Un(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return Vc(this.inner)}}class up{constructor(){this.changes=new fu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:gt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:pn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class L_{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return pu(e).put(V_(t),r)}removeEntry(e,t){const r=pu(e),a=V_(t);return r.delete(a)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return pu(e).get(V_(t)).next(r=>this.be(t,r))}Pe(e,t){return pu(e).get(V_(t)).next(r=>({document:this.be(t,r),size:yb(r)}))}getEntries(e,t){let r=Ci();return this.ve(e,t,(a,c)=>{const h=this.be(a,c);r=r.insert(a,h)}).next(()=>r)}Ve(e,t){let r=Ci(),a=new _r(Ge.comparator);return this.ve(e,t,(c,h)=>{const _=this.be(c,h);r=r.insert(c,_),a=a.insert(c,yb(h))}).next(()=>({documents:r,Se:a}))}ve(e,t,r){if(t.isEmpty())return ge.resolve();const a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let h=c.getNext();return pu(e).jt({range:a},(_,w,I)=>{const A=Ge.fromSegments(_);for(;h&&Ge.comparator(h,A)<0;)r(h,null),h=c.getNext();h&&h.isEqual(A)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?I.Lt(h.path.toArray()):I.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r){let a=Ci();const c=t.path.length+1,h={};if(r.isEqual(gt.min())){const _=t.path.toArray();h.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),w=pb(r);h.range=IDBKeyRange.lowerBound([_,w],!0),h.index=An.collectionReadTimeIndex}return pu(e).jt(h,(_,w,I)=>{if(_.length!==c)return;const A=xT(this.k,w);t.path.isPrefixOf(A.key.path)?D_(t,A)&&(a=a.insert(A.key,A)):I.done()}).next(()=>a)}newChangeBuffer(e){return new $T(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Eb(e).get(fs.key).next(t=>(ut(!!t),t))}Re(e,t){return Eb(e).put(fs.key,t)}be(e,t){if(t){const r=xT(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(gt.min()))return r}return pn.newInvalidDocument(e)}}class $T extends up{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new fu(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new On((c,h)=>Tt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const _=this.Ce.get(c);if(h.document.isValidDocument()){const w=MT(this.De.k,h.document,this.getReadTime(c));a=a.add(c.path.popLast()),r+=yb(w)-_,t.push(this.De.addEntry(e,c,w))}else if(r-=_,this.trackRemovals){const w=MT(this.De.k,pn.newNoDocument(c,gt.min()),this.getReadTime(c));t.push(this.De.addEntry(e,c,w))}else t.push(this.De.removeEntry(e,c))}),a.forEach(c=>{t.push(this.De.Jt.addToCollectionParentIndex(e,c))}),t.push(this.De.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:a})=>(a.forEach((c,h)=>{this.Ce.set(c,h)}),r))}}function Eb(n){return Zi(n,fs.store)}function pu(n){return Zi(n,An.store)}function V_(n){return n.path.toArray()}class HT{constructor(e){this.k=e}Nt(e,t,r,a){ut(r<a&&r>=0&&a<=11);const c=new Hc("createOrUpgrade",t);var _;r<1&&a>=1&&(e.createObjectStore(Gi.store),(_=e).createObjectStore(Gs.store,{keyPath:Gs.keyPath}),_.createObjectStore(gn.store,{keyPath:gn.keyPath,autoIncrement:!0}).createIndex(gn.userMutationsIndex,gn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(Zr.store),qT(e),function(_){_.createObjectStore(An.store)}(e));let h=ge.resolve();return r<3&&a>=3&&(0!==r&&(function(_){_.deleteObjectStore(Or.store),_.deleteObjectStore(Wr.store),_.deleteObjectStore(zr.store)}(e),qT(e)),h=h.next(()=>function(_){const w=_.store(zr.store),I=new zr(0,0,gt.min().toTimestamp(),0);return w.put(zr.key,I)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(_,w){return w.store(gn.store).Bt().next(I=>{_.deleteObjectStore(gn.store),_.createObjectStore(gn.store,{keyPath:gn.keyPath,autoIncrement:!0}).createIndex(gn.userMutationsIndex,gn.userMutationsKeyPath,{unique:!0});const A=w.store(gn.store),x=I.map(F=>A.put(F));return ge.waitFor(x)})}(e,c))),h=h.next(()=>{!function(_){_.createObjectStore(Zs.store,{keyPath:Zs.keyPath})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.Ne(c))),r<6&&a>=6&&(h=h.next(()=>(function(_){_.createObjectStore(fs.store)}(e),this.ke(c)))),r<7&&a>=7&&(h=h.next(()=>this.xe(c))),r<8&&a>=8&&(h=h.next(()=>this.$e(e,c))),r<9&&a>=9&&(h=h.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const w=_.objectStore(An.store);w.createIndex(An.readTimeIndex,An.readTimeIndexPath,{unique:!1}),w.createIndex(An.collectionReadTimeIndex,An.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&a>=10&&(h=h.next(()=>this.Oe(c))),r<11&&a>=11&&(h=h.next(()=>{(function(_){_.createObjectStore($c.store,{keyPath:$c.keyPath})})(e),function(_){_.createObjectStore(Sn.store,{keyPath:Sn.keyPath})}(e)})),h}ke(e){let t=0;return e.store(An.store).jt((r,a)=>{t+=yb(a)}).next(()=>{const r=new fs(t);return e.store(fs.store).put(fs.key,r)})}Ne(e){const t=e.store(Gs.store),r=e.store(gn.store);return t.Bt().next(a=>ge.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.Bt(gn.userMutationsIndex,h).next(_=>ge.forEach(_,w=>{ut(w.userId===c.userId);const I=Kr(this.k,w);return fM(e,c.userId,I).next(()=>{})}))}))}xe(e){const t=e.store(Or.store),r=e.store(An.store);return e.store(zr.store).get(zr.key).next(a=>{const c=[];return r.jt((h,_)=>{const w=new Ht(h),I=[0,qi(w)];c.push(t.get(I).next(A=>A?ge.resolve():t.put(new Or(0,qi(w),a.highestListenSequenceNumber))))}).next(()=>ge.waitFor(c))})}$e(e,t){e.createObjectStore(jc.store,{keyPath:jc.keyPath});const r=t.store(jc.store),a=new mb,c=h=>{if(a.add(h)){const _=h.lastSegment(),w=h.popLast();return r.put({collectionId:_,parent:qi(w)})}};return t.store(An.store).jt({Kt:!0},(h,_)=>{const w=new Ht(h);return c(w.popLast())}).next(()=>t.store(Zr.store).jt({Kt:!0},([h,_,w],I)=>{const A=To(_);return c(A.popLast())}))}Oe(e){const t=e.store(Wr.store);return t.jt((r,a)=>{const c=op(a),h=kT(this.k,c);return t.put(h)})}}function qT(n){n.createObjectStore(Or.store,{keyPath:Or.keyPath}).createIndex(Or.documentTargetsIndex,Or.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Wr.store,{keyPath:Wr.keyPath}).createIndex(Wr.queryTargetsIndexName,Wr.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(zr.store)}const wb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bb{constructor(e,t,r,a,c,h,_,w,I,A){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=c,this.window=h,this.document=_,this.Fe=I,this.Le=A,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=x=>Promise.resolve(),!bb.Pt())throw new me(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vb(this,a),this.Ge=t+"main",this.k=new uM(w),this.ze=new Ws(this.Ge,11,new HT(this.k)),this.He=new pM(this.referenceDelegate,this.k),this.Jt=new ap,this.Je=new L_(this.k,this.Jt),this.Ye=new cM,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===A&&Qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,wb);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new wi(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,z.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,z.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>U_(e).put(new Zs(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(Rd(e))return De("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return De("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Gc(e).get(Gi.key).next(t=>ge.resolve(this.un(t)))}hn(e){return U_(e).delete(this.clientId)}ln(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Zi(r,Zs.store);return a.Bt().next(c=>{const h=e.dn(c,18e5),_=c.filter(w=>-1===h.indexOf(w));return ge.forEach(_,w=>a.delete(w.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?ge.resolve(!0):Gc(e).get(Gi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,wb);return!1}}return!(!this.networkEnabled||!this.inForeground)||U_(e).Bt().next(r=>void 0===this.dn(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,_=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&De("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,z.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Gi.store,Zs.store],t=>{const r=new RT(t,wi.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>U_(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return PT.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let c;return De("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",PO,h=>(c=new RT(h,this.Be?this.Be.next():wi.I),"readwrite-primary"===t?this.rn(c).next(_=>!!_||this.on(c)).next(_=>{if(!_)throw Qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new me(ne.FAILED_PRECONDITION,TT);return r(c)}).next(_=>this.an(c).next(()=>_)):this.En(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}En(e){return Gc(e).get(Gi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(ne.FAILED_PRECONDITION,wb)})}an(e){const t=new Gi(this.clientId,this.allowTabSynchronization,Date.now());return Gc(e).put(Gi.key,t)}static Pt(){return Ws.Pt()}cn(e){const t=Gc(e);return t.get(Gi.key).next(r=>this.un(r)?(De("IndexedDbPersistence","Releasing primary lease."),t.delete(Gi.key)):ge.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qt(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Le.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return De("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Qt("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gc(n){return Zi(n,Gi.store)}function U_(n){return Zi(n,Zs.store)}function Pr(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cp{constructor(e,t){this.progress=e,this.In=t}}class lp{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(a=>{for(const c of r)c.applyToLocalView(a);return a})}Pn(e,t){e.forEach((r,a)=>{for(const c of t)c.applyToLocalView(a)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Sn(e,t.path):nT(t)?this.Dn(e,t,r):this.Cn(e,t,r);var a}Sn(e,t){return this.Rn(e,new Ge(t)).next(r=>{let a=eb();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}Dn(e,t,r){const a=t.collectionGroup;let c=eb();return this.Jt.getCollectionParents(e,a).next(h=>ge.forEach(h,_=>{const w=(I=t,A=_.child(a),new uu(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,A;return this.Cn(e,w,r).next(I=>{I.forEach((A,x)=>{c=c.insert(A,x)})})}).next(()=>c))}Cn(e,t,r){let a,c;return this.Je.getDocumentsMatchingQuery(e,t,r).next(h=>(a=h,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(c=h,this.Nn(e,c,a).next(_=>{a=_;for(const w of c)for(const I of w.mutations){const A=I.key;let x=a.get(A);null==x&&(x=pn.newInvalidDocument(A),a=a.insert(A,x)),Jw(I,x,w.localWriteTime),x.isFoundDocument()||(a=a.remove(A))}}))).next(()=>(a.forEach((h,_)=>{D_(t,_)||(a=a.remove(h))}),a))}Nn(e,t,r){let a=Jt();for(const h of t)for(const _ of h.mutations)_ instanceof Uc&&null===r.get(_.key)&&(a=a.add(_.key));let c=r;return this.Je.getEntries(e,a).next(h=>(h.forEach((_,w)=>{w.isFoundDocument()&&(c=c.insert(_,w))}),c))}}class B_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=a}static $n(e,t){let r=Jt(),a=Jt();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new B_(e,t.fromCache,r,a)}}class dp{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,a){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(gt.min())?this.Fn(e,t):this.Mn.vn(e,a).next(c=>{const h=this.Ln(t,c);return(Gw(t)||I_(t))&&this.Bn(t.limitType,h,a,r)?this.Fn(e,t):(Fc()<=us.in.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sT(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(_=>(h.forEach(w=>{_=_.insert(w.key,w)}),_)))});var c}Ln(e,t){let r=new On(Gx(e));return t.forEach((a,c)=>{D_(e,c)&&(r=r.add(c))}),r}Bn(e,t,r,a){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Fn(e,t){return Fc()<=us.in.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",sT(t)),this.Mn.getDocumentsMatchingQuery(e,t,gt.min())}}class Cb{constructor(e,t,r,a){this.persistence=e,this.Un=t,this.k=a,this.qn=new _r(Tt),this.Kn=new fu(c=>vd(c),Wf),this.jn=gt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new lp(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function Ib(n,e,t,r){return new Cb(n,e,t,r)}function hp(n,e){return Db.apply(this,arguments)}function Db(){return(Db=(0,z.Z)(function*(n,e){const t=xe(n);let r=t.An,a=t.Wn;const c=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let _;return t.An.getAllMutationBatches(h).next(w=>(_=w,r=t.persistence.getMutationQueue(e),a=new lp(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(w=>{const I=[],A=[];let x=Jt();for(const F of _){I.push(F.batchId);for(const Z of F.mutations)x=x.add(Z.key)}for(const F of w){A.push(F.batchId);for(const Z of F.mutations)x=x.add(Z.key)}return a.vn(h,x).next(F=>({Gn:F,removedBatchIds:I,addedBatchIds:A}))})});return t.An=r,t.Wn=a,t.Un.On(t.Wn),c})).apply(this,arguments)}function gM(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Qn.newChangeBuffer({trackRemovals:!0});return function(h,_,w,I){const A=w.batch,x=A.keys();let F=ge.resolve();return x.forEach(Z=>{F=F.next(()=>I.getEntry(_,Z)).next(te=>{const Ee=w.docVersions.get(Z);ut(null!==Ee),te.version.compareTo(Ee)<0&&(A.applyToRemoteDocument(te,w),te.isValidDocument()&&I.addEntry(te,w.commitVersion))})}),F.next(()=>h.An.removeMutationBatch(_,A))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,a))})}function GT(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function mM(n,e){const t=xe(n),r=e.snapshotVersion;let a=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Qn.newChangeBuffer({trackRemovals:!0});a=t.qn;const _=[];e.targetChanges.forEach((I,A)=>{const x=a.get(A);if(!x)return;_.push(t.He.removeMatchingKeys(c,I.removedDocuments,A).next(()=>t.He.addMatchingKeys(c,I.addedDocuments,A)));let F=x.withSequenceNumber(c.currentSequenceNumber);var Z,te,Ee;e.targetMismatches.has(A)?F=F.withResumeToken(pr.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):I.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(I.resumeToken,r)),a=a.insert(A,F),te=F,Ee=I,(0===(Z=x).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&_.push(t.He.updateTargetData(c,F))});let w=Ci();if(e.documentUpdates.forEach((I,A)=>{e.resolvedLimboDocuments.has(I)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,I))}),_.push(Tb(c,h,e.documentUpdates,r,void 0).next(I=>{w=I})),!r.isEqual(gt.min())){const I=t.He.getLastRemoteSnapshotVersion(c).next(A=>t.He.setTargetsMetadata(c,c.currentSequenceNumber,r));_.push(I)}return ge.waitFor(_).next(()=>h.apply(c)).next(()=>t.Wn.Vn(c,w)).next(()=>w)}).then(c=>(t.qn=a,c))}function Tb(n,e,t,r,a){let c=Jt();return t.forEach(h=>c=c.add(h)),e.getEntries(n,c).next(h=>{let _=Ci();return t.forEach((w,I)=>{const A=h.get(w),x=(null==a?void 0:a.get(w))||r;I.isNoDocument()&&I.version.isEqual(gt.min())?(e.removeEntry(w,x),_=_.insert(w,I)):!A.isValidDocument()||I.version.compareTo(A.version)>0||0===I.version.compareTo(A.version)&&A.hasPendingWrites?(e.addEntry(I,x),_=_.insert(w,I)):De("LocalStore","Ignoring outdated watch update for ",w,". Current version:",A.version," Watch version:",I.version)}),_})}function _M(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function Ld(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.He.getTargetData(r,e).next(c=>c?(a=c,ge.resolve(a)):t.He.allocateTargetId(r).next(h=>(a=new du(e,h,0,r.currentSequenceNumber),t.He.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.qn.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function Vd(n,e,t){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,z.Z)(function*(n,e,t){const r=xe(n),a=r.qn.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Rd(h))throw h;De("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.qn=r.qn.remove(e),r.Kn.delete(a.target)})).apply(this,arguments)}function gu(n,e,t){const r=xe(n);let a=gt.min(),c=Jt();return r.persistence.runTransaction("Execute query","readonly",h=>function(_,w,I){const A=xe(_),x=A.Kn.get(I);return void 0!==x?ge.resolve(A.qn.get(x)):A.He.getTargetData(w,I)}(r,h,qs(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(h,_.targetId).next(w=>{c=w})}).next(()=>r.Un.getDocumentsMatchingQuery(h,e,t?a:gt.min(),t?c:Jt())).next(_=>({documents:_,zn:c})))}function j_(n,e){const t=xe(n),r=xe(t.He),a=t.qn.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Et(c,e).next(h=>h?h.target:null))}function ZT(n){const e=xe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,a,c){const h=xe(r);let _=Ci(),w=pb(c);const I=pu(a),A=IDBKeyRange.lowerBound(w,!0);return I.jt({index:An.readTimeIndex,range:A},(x,F)=>{const Z=xT(h.k,F);_=_.insert(Z.key,Z),w=F.readTime}).next(()=>({In:_,readTime:NT(w)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function Ab(){return(Ab=(0,z.Z)(function*(n){const e=xe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const a=pu(r);let c=gt.min();return a.jt({index:An.readTimeIndex,reverse:!0},(h,_,w)=>{_.readTime&&(c=NT(_.readTime)),w.done()}).next(()=>c)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function Rb(){return(Rb=(0,z.Z)(function*(n,e,t,r){const a=xe(n);let c=Jt(),h=Ci(),_=nb();for(const A of t){const x=e.Hn(A.metadata.name);A.document&&(c=c.add(x)),h=h.insert(x,e.Jn(A)),_=_.insert(x,e.Yn(A.metadata.readTime))}const w=a.Qn.newChangeBuffer({trackRemovals:!0}),I=yield Ld(a,(A=r,qs(Kf(Ht.fromString(`__bundle__/docs/${A}`)))));var A;return a.persistence.runTransaction("Apply bundle documents","readwrite",A=>Tb(A,w,h,gt.min(),_).next(x=>(w.apply(A),x)).next(x=>a.He.removeMatchingKeysForTargetId(A,I.targetId).next(()=>a.He.addMatchingKeys(A,c,I.targetId)).next(()=>a.Wn.Vn(A,x)).next(()=>x)))})).apply(this,arguments)}function WT(n,e){return $_.apply(this,arguments)}function $_(){return($_=(0,z.Z)(function*(n,e,t=Jt()){const r=yield Ld(n,qs(gb(e.bundledQuery))),a=xe(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=kr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ye.saveNamedQuery(c,e);const _=r.withResumeToken(pr.EMPTY_BYTE_STRING,h);return a.qn=a.qn.insert(_.targetId,_),a.He.updateTargetData(c,_).next(()=>a.He.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.He.addMatchingKeys(c,t,r.targetId)).next(()=>a.Ye.saveNamedQuery(c,e))})})).apply(this,arguments)}class vM{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return ge.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:gb(r.bundledQuery),readTime:kr(r.readTime)}),ge.resolve();var r}}class xb{constructor(){this.ts=new On(Tr.es),this.ns=new On(Tr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Tr(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Tr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ge(new Ht([])),r=new Tr(t,e),a=new Tr(t,e+1),c=[];return this.ns.forEachInRange([r,a],h=>{this.os(h),c.push(h.key)}),c}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Ge(new Ht([])),r=new Tr(t,e),a=new Tr(t,e+1);let c=Jt();return this.ns.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new Tr(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Tr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Ge.comparator(e.key,t.key)||Tt(e.fs,t.fs)}static ss(e,t){return Tt(e.fs,t.fs)||Ge.comparator(e.key,t.key)}}class ca{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new On(Tr.es)}checkEmpty(e){return ge.resolve(0===this.An.length)}addMutationBatch(e,t,r,a){const c=this.ds;this.ds++;const h=new hb(c,t,r,a);this.An.push(h);for(const _ of a)this.ws=this.ws.add(new Tr(_.key,c)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return ge.resolve(h)}lookupMutationBatch(e,t){return ge.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.gs(t+1),c=a<0?0:a;return ge.resolve(this.An.length>c?this.An[c]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return ge.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tr(t,0),a=new Tr(t,Number.POSITIVE_INFINITY),c=[];return this.ws.forEachInRange([r,a],h=>{const _=this._s(h.fs);c.push(_)}),ge.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Tt);return t.forEach(a=>{const c=new Tr(a,0),h=new Tr(a,Number.POSITIVE_INFINITY);this.ws.forEachInRange([c,h],_=>{r=r.add(_.fs)})}),ge.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Ge.isDocumentKey(c)||(c=c.child(""));const h=new Tr(new Ge(c),0);let _=new On(Tt);return this.ws.forEachWhile(w=>{const I=w.key.path;return!!r.isPrefixOf(I)&&(I.length===a&&(_=_.add(w.fs)),!0)},h),ge.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(r=>{const a=this._s(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){ut(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return ge.forEach(t.mutations,a=>{const c=new Tr(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Tr(t,0),a=this.ws.firstAfterOrEqual(r);return ge.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ge.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class fp{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new _r(Ge.comparator),this.size=0}addEntry(e,t,r){const a=t.key,c=this.docs.get(a),h=c?c.size:0,_=this.Ts(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:_,readTime:r}),this.size+=_-h,this.Jt.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=Ci();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():pn.newInvalidDocument(a))}),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r){let a=Ci();const c=new Ge(t.path.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:_,value:{document:w,readTime:I}}=h.getNext();if(!t.path.isPrefixOf(_.path))break;I.compareTo(r)<=0||D_(t,w)&&(a=a.insert(w.key,w.mutableCopy()))}return ge.resolve(a)}Es(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ud(this)}getSize(e){return ge.resolve(this.size)}}class Ud extends up{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.document.isValidDocument()?t.push(this.De.addEntry(e,a.document,this.getReadTime(r))):this.De.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class H_{constructor(e){this.persistence=e,this.Is=new fu(t=>vd(t),Wf),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.As=0,this.Rs=new xb,this.targetCount=0,this.bs=kd.ie()}forEachTarget(e,t){return this.Is.forEach((r,a)=>t(a)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),ge.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new kd(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.ae(t),ge.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Is.forEach((h,_)=>{_.sequenceNumber<=t&&null===r.get(_.targetId)&&(this.Is.delete(h),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),ge.waitFor(c).next(()=>a)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),ge.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.Rs.containsKey(t))}}class Bd{constructor(e,t){this.Ps={},this.Be=new wi(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new H_(this),this.Jt=new dM,this.Je=new fp(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new uM(t),this.Ye=new vM(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new ca(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){De("MemoryPersistence","Starting transaction:",e);const a=new EM(this.Be.next());return this.referenceDelegate.Vs(),r(a).next(c=>this.referenceDelegate.Ss(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ds(e,t){return ge.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class EM extends AT{constructor(e){super(),this.currentSequenceNumber=e}}class Mb{constructor(e){this.persistence=e,this.Cs=new xb,this.Ns=null}static ks(e){return new Mb(e)}get xs(){if(this.Ns)return this.Ns;throw We()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(a=>this.xs.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.xs.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.xs,r=>{const a=Ge.fromPath(r);return this.$s(e,a).next(c=>{c||t.removeEntry(a)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return ge.or([()=>ge.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function zT(n,e){return`firestore_clients_${n}_${e}`}function Nb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function q_(n,e){return`firestore_targets_${n}_${e}`}class pp{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Os(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new me(a.error.code,a.error.message))),h?new pp(e,t,a.state,c):(Qt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new me(r.error.code,r.error.message))),c?new jd(e,r.state,a):(Qt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $d{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=tp();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=Bw(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new $d(e,c):(Qt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kb{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kb(t.clientId,t.onlineState):(Qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ob{constructor(){this.activeTargetIds=tp()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G_{constructor(e,t,r,a,c){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new _r(Tt),this.started=!1,this.js=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Qs=zT(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new Ob),this.Gs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const t=yield e.syncEngine.Tn();for(const a of t){if(a===e.Bs)continue;const c=e.getItem(zT(e.persistenceKey,a));if(c){const h=$d.Os(a,c);h&&(e.Ks=e.Ks.insert(h.clientId,h))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const a=e.Zs(r);a&&e.ti(a)}for(const a of e.js)e.qs(a);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(q_(this.persistenceKey,e));if(r){const a=jd.Os(e,r);a&&(t=a.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(q_(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.si(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return De("SharedClientState","READ",e,t),t}setItem(e,t){De("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){De("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(De("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,z.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const a=t.ai(r.key);return t.ui(a,null)}{const a=t.hi(r.key,r.newValue);if(a)return t.ui(a.clientId,a)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const a=t.li(r.key,r.newValue);if(a)return t.fi(a)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const a=t.di(r.key,r.newValue);if(a)return t.wi(a)}}else if(r.key===t.Js){if(null!==r.newValue){const a=t.Zs(r.newValue);if(a)return t.ti(a)}}else if(r.key===t.Ws){const a=function(c){let h=wi.I;if(null!=c)try{const _=JSON.parse(c);ut("number"==typeof _),h=_}catch(_){Qt("SharedClientState","Failed to read sequence number from WebStorage",_)}return h}(r.newValue);a!==wi.I&&t.sequenceNumberHandler(a)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const a=new pp(this.currentUser,e,t,r),c=Nb(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Ms())}si(e){const t=Nb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const a=q_(this.persistenceKey,e),c=new jd(e,t,r);this.setItem(a,c.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return $d.Os(r,t)}li(e,t){const r=this.zs.exec(e),a=Number(r[1]);return pp.Os(new Nr(void 0!==r[2]?r[2]:null),a,t)}di(e,t){const r=this.Hs.exec(e),a=Number(r[1]);return jd.Os(a,t)}Zs(e){return kb.Os(e)}fi(e){var t=this;return(0,z.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);De("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),a=this.ei(this.Ks),c=this.ei(r),h=[],_=[];return c.forEach(w=>{a.has(w)||h.push(w)}),a.forEach(w=>{c.has(w)||_.push(w)}),this.syncEngine.yi(h,_).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=tp();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class mu{constructor(){this.pi=new Ob,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Ob,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Pb{Ei(e){}shutdown(){}}class KT{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){De("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){De("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const wM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class LO{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class VO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,a,c){const h=this.Ui(e,t);De("RestConnection","Sending: ",h,r);const _={};return this.qi(_,a,c),this.Ki(e,h,_,r).then(w=>(De("RestConnection","Received: ",w),w),w=>{throw Hf("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}ji(e,t,r,a,c){return this.Bi(e,t,r,a,c)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}Ui(e,t){return`${this.Fi}/v1/${t}:${wM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,a){return new Promise((c,h)=>{const _=new Nx;_.listenOnce($D.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case f_.NO_ERROR:const I=_.getResponseJson();De("Connection","XHR received:",JSON.stringify(I)),c(I);break;case f_.TIMEOUT:De("Connection",'RPC "'+e+'" timed out'),h(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case f_.HTTP_ERROR:const A=_.getStatus();if(De("Connection",'RPC "'+e+'" failed with status:',A,"response text:",_.getResponseText()),A>0){const x=_.getResponseJson().error;if(x&&x.status&&x.message){const F=function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(te)>=0?te:ne.UNKNOWN}(x.status);h(new me(F,x.message))}else h(new me(ne.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new me(ne.UNAVAILABLE,"Connection failed."));break;default:We()}}finally{De("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(a);_.send(t,"POST",w,r,15)})}Qi(e,t,r){const a=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=BD(),h=jD(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new Mx({})),this.qi(_.initMessageHeaders,t,r),(0,Le.uI)()||(0,Le.b$)()||(0,Le.d)()||(0,Le.w1)()||(0,Le.Mn)()||(0,Le.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const w=a.join("");De("Connection","Creating WebChannel: "+w,_);const I=c.createWebChannel(w,_);let A=!1,x=!1;const F=new LO({Vi:te=>{x?De("Connection","Not sending because WebChannel is closed:",te):(A||(De("Connection","Opening WebChannel transport."),I.open(),A=!0),De("Connection","WebChannel sending:",te),I.send(te))},Si:()=>I.close()}),Z=(te,Ee,Te)=>{te.listen(Ee,Xe=>{try{Te(Xe)}catch(et){setTimeout(()=>{throw et},0)}})};return Z(I,p_.EventType.OPEN,()=>{x||De("Connection","WebChannel transport opened.")}),Z(I,p_.EventType.CLOSE,()=>{x||(x=!0,De("Connection","WebChannel transport closed"),F.Oi())}),Z(I,p_.EventType.ERROR,te=>{x||(x=!0,Hf("Connection","WebChannel transport errored:",te),F.Oi(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),Z(I,p_.EventType.MESSAGE,te=>{var Ee;if(!x){const Te=te.data[0];ut(!!Te);const Xe=Te,et=Xe.error||(null===(Ee=Xe[0])||void 0===Ee?void 0:Ee.error);if(et){De("Connection","WebChannel received error:",et);const mt=et.status;let Qe=function(Yr){const Xd=mr[Yr];if(void 0!==Xd)return dT(Xd)}(mt),en=et.message;void 0===Qe&&(Qe=ne.INTERNAL,en="Unknown error status: "+mt+" with message "+et.message),x=!0,F.Oi(new me(Qe,en)),I.close()}else De("Connection","WebChannel received:",Te),F.Mi(Te)}}),Z(h,HD.STAT_EVENT,te=>{te.stat===qD.PROXY?De("Connection","Detected buffering proxy"):te.stat===qD.NOPROXY&&De("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.$i()},0),F}}function bM(){return"undefined"!=typeof window?window:null}function Fb(){return"undefined"!=typeof document?document:null}function gp(n){return new MO(n,!0)}class Lb{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=a,this.zi=c,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),a=Math.max(0,t-r);a>0&&De("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,a,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class CM{constructor(e,t,r,a,c,h,_,w){this.Me=e,this.nr=r,this.sr=a,this.ir=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=_,this.listener=w,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Lb(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,z.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,z.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,z.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Qt(t.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.rr===t&&this.Ir(r,a)},r=>{e(()=>{const a=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(a)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(a=>{r(()=>this.Ar(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}dr(){var e=this;this.state=5,this.ur.Zi((0,z.Z)(function*(){e.state=0,e.start()}))}Ar(e){return De("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(De("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UO extends CM{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.k=c}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:We(),a=e.targetChange.targetIds||[],c=function(w,I){return w.C?(ut(void 0===I||"string"==typeof I),pr.fromBase64String(I||"")):(ut(void 0===I||I instanceof Uint8Array),pr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,_=h&&function(w){const I=void 0===w.code?ne.UNKNOWN:dT(w.code);return new me(I,w.message||"")}(h);t=new ib(r,a,c,_||null)}else if("documentChange"in e){const r=e.documentChange,a=Do(n,r.document.name),c=kr(r.document.updateTime),h=new Gr({mapValue:{fields:r.document.fields}}),_=pn.newFoundDocument(a,c,h);t=new Td(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,a=Do(n,r.document),c=r.readTime?kr(r.readTime):gt.min(),h=pn.newNoDocument(a,c);t=new Td([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=Do(n,r.document);t=new Td([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return We();{const r=e.filter,c=new RO(r.count||0);t=new rb(r.targetId,c)}}var w;return t}(this.k,e),r=function(a){if(!("targetChange"in a))return gt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?gt.min():c.readTime?kr(c.readTime):gt.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=N_(this.k),t.addTarget=function(a,c){let h;const _=c.target;return h=b_(_)?{documents:ET(a,_)}:{query:wT(a,_)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=gT(a,c.resumeToken):c.snapshotVersion.compareTo(gt.min())>0&&(h.readTime=ip(a,c.snapshotVersion.toTimestamp())),h}(this.k,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return We()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=N_(this.k),t.removeTarget=e,this.gr(t)}}class BO extends CM{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.k=c,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(ut(void 0!==e),n.map(t=>function(r,a){let c=kr(r.updateTime?r.updateTime:a);return c.isEqual(gt.min())&&(c=kr(a)),new AO(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Cr(r,t)}return ut(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=N_(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lu(this.k,r))};this.gr(t)}}class jO extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=a,this.$r=!1}Or(){if(this.$r)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.ir.Bi(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ne.UNKNOWN,a.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.ir.ji(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ne.UNKNOWN,a.toString())})}terminate(){this.$r=!0}}class IM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Qt(t),this.Lr=!1):De("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class $O{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=c,this.Hr.Ei(_=>{r.enqueueAndForget((0,z.Z)(function*(){var w;y(h)&&(De("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,z.Z)(function*(I){const A=xe(I);A.Gr.add(4),yield mp(A),A.Jr.set("Unknown"),A.Gr.delete(4),yield Z_(A)}),function(I){return w.apply(this,arguments)})(h))}))}),this.Jr=new IM(r,a)}}function Z_(n){return YT.apply(this,arguments)}function YT(){return(YT=(0,z.Z)(function*(n){if(y(n))for(const e of n.zr)yield e(!0)})).apply(this,arguments)}function mp(n){return i.apply(this,arguments)}function i(){return(i=(0,z.Z)(function*(n){for(const e of n.zr)yield e(!1)})).apply(this,arguments)}function s(n,e){const t=xe(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),g(t)?d(t):W_(t).lr()&&u(t,e))}function o(n,e){const t=xe(n),r=W_(t);t.Wr.delete(e),r.lr()&&l(t,e),0===t.Wr.size&&(r.lr()?r._r():y(t)&&t.Jr.set("Unknown"))}function u(n,e){n.Yr.X(e.targetId),W_(n).Pr(e)}function l(n,e){n.Yr.X(e),W_(n).vr(e)}function d(n){n.Yr=new Jx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),W_(n).start(),n.Jr.Br()}function g(n){return y(n)&&!W_(n).hr()&&n.Wr.size>0}function y(n){return 0===xe(n).Gr.size}function E(n){n.Yr=void 0}function C(n){return D.apply(this,arguments)}function D(){return(D=(0,z.Z)(function*(n){n.Wr.forEach((e,t)=>{u(n,e)})})).apply(this,arguments)}function R(n,e){return M.apply(this,arguments)}function M(){return(M=(0,z.Z)(function*(n,e){E(n),g(n)?(n.Jr.Kr(e),d(n)):n.Jr.set("Unknown")})).apply(this,arguments)}function P(n,e,t){return q.apply(this,arguments)}function q(){return(q=(0,z.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof ib&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(a,c){const h=c.cause;for(const _ of c.targetIds)a.Wr.has(_)&&(yield a.remoteSyncer.rejectListen(_,h),a.Wr.delete(_),a.Yr.removeTarget(_))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){De("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ee(n,r)}else if(e instanceof Td?n.Yr.ot(e):e instanceof rb?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(gt.min()))try{const r=yield GT(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.Yr.gt(c);return h.targetChanges.forEach((_,w)=>{if(_.resumeToken.approximateByteSize()>0){const I=a.Wr.get(w);I&&a.Wr.set(w,I.withResumeToken(_.resumeToken,c))}}),h.targetMismatches.forEach(_=>{const w=a.Wr.get(_);if(!w)return;a.Wr.set(_,w.withResumeToken(pr.EMPTY_BYTE_STRING,w.snapshotVersion)),l(a,_);const I=new du(w.target,_,1,w.sequenceNumber);u(a,I)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){De("RemoteStore","Failed to raise snapshot:",r),yield ee(n,r)}var r})).apply(this,arguments)}function ee(n,e,t){return K.apply(this,arguments)}function K(){return(K=(0,z.Z)(function*(n,e,t){if(!Rd(e))throw e;n.Gr.add(1),yield mp(n),n.Jr.set("Offline"),t||(t=()=>GT(n.localStore)),n.asyncQueue.enqueueRetryable((0,z.Z)(function*(){De("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield Z_(n)}))})).apply(this,arguments)}function ye(n,e){return e().catch(t=>ee(n,t,e))}function ie(n){return qe.apply(this,arguments)}function qe(){return(qe=(0,z.Z)(function*(n){const e=xe(n),t=qd(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;at(e);)try{const a=yield _M(e.localStore,r);if(null===a){0===e.Qr.length&&t._r();break}r=a.batchId,At(e,a)}catch(a){yield ee(e,a)}Qn(e)&&Wi(e)})).apply(this,arguments)}function at(n){return y(n)&&n.Qr.length<10}function At(n,e){n.Qr.push(e);const t=qd(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function Qn(n){return y(n)&&!qd(n).hr()&&n.Qr.length>0}function Wi(n){qd(n).start()}function _p(n){return _u.apply(this,arguments)}function _u(){return(_u=(0,z.Z)(function*(n){qd(n).kr()})).apply(this,arguments)}function Hd(n){return yu.apply(this,arguments)}function yu(){return(yu=(0,z.Z)(function*(n){const e=qd(n);for(const t of n.Qr)e.Dr(t.mutations)})).apply(this,arguments)}function Vb(n,e,t){return yp.apply(this,arguments)}function yp(){return(yp=(0,z.Z)(function*(n,e,t){const r=n.Qr.shift(),a=fb.from(r,e,t);yield ye(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ie(n)})).apply(this,arguments)}function Ub(n,e){return vp.apply(this,arguments)}function vp(){return(vp=(0,z.Z)(function*(n,e){var t;e&&qd(n).Sr&&(yield(t=(0,z.Z)(function*(r,a){if(Dd(c=a.code)&&c!==ne.ABORTED){const h=r.Qr.shift();qd(r).wr(),yield ye(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield ie(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),Qn(n)&&Wi(n)})).apply(this,arguments)}function Ep(n,e){return DM.apply(this,arguments)}function DM(){return(DM=(0,z.Z)(function*(n,e){const t=xe(n);e?(t.Gr.delete(2),yield Z_(t)):e||(t.Gr.add(2),yield mp(t),t.Jr.set("Unknown"))})).apply(this,arguments)}function W_(n){return n.Xr||(n.Xr=function(e,t,r){const a=xe(e);return a.Or(),new UO(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,r)}(n.datastore,n.asyncQueue,{Di:C.bind(null,n),Ni:R.bind(null,n),br:P.bind(null,n)}),n.zr.push(function(){var e=(0,z.Z)(function*(t){t?(n.Xr.wr(),g(n)?d(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),E(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function qd(n){return n.Zr||(n.Zr=function(e,t,r){const a=xe(e);return a.Or(),new BO(t,a.ir,a.authCredentials,a.appCheckCredentials,a.k,r)}(n.datastore,n.asyncQueue,{Di:_p.bind(null,n),Ni:Ub.bind(null,n),Nr:Hd.bind(null,n),Cr:Vb.bind(null,n)}),n.zr.push(function(){var e=(0,z.Z)(function*(t){t?(n.Zr.wr(),yield ie(n)):(yield n.Zr.stop(),n.Qr.length>0&&(De("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class TM{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,_=new TM(e,t,h,a,c);return _.start(r),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(n,e){if(Qt("AsyncQueue",`${e}: ${n}`),Rd(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class K_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=eb(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new K_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof K_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new K_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HO{constructor(){this.eo=new _r(Ge.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):We():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Y_{constructor(e,t,r,a,c,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=_,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Y_(e,t,K_.emptySet(t),c,r,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class WF{constructor(){this.so=void 0,this.listeners=[]}}class zF{constructor(){this.queries=new fu(e=>iT(e),Qf),this.onlineState="Unknown",this.io=new Set}}function AM(n,e){return SM.apply(this,arguments)}function SM(){return(SM=(0,z.Z)(function*(n,e){const t=xe(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new WF),a)try{c.so=yield t.onListen(r)}catch(h){const _=z_(h,`Initialization of query '${sT(e.query)}' failed`);return void e.onError(_)}t.queries.set(r,c),c.listeners.push(e),e.ro(t.onlineState),c.so&&e.oo(c.so)&&MM(t)})).apply(this,arguments)}function RM(n,e){return xM.apply(this,arguments)}function xM(){return(xM=(0,z.Z)(function*(n,e){const t=xe(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function KF(n,e){const t=xe(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const _ of h.listeners)_.oo(a)&&(r=!0);h.so=a}}r&&MM(t)}function YF(n,e,t){const r=xe(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function MM(n){n.io.forEach(e=>{e.next()})}class NM{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new Y_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Y_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class QF{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class qO{constructor(e){this.k=e}Hn(e){return Do(this.k,e)}Jn(e){return e.metadata.exists?_T(this.k,e.document,!1):pn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return kr(e)}}class JF{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=GO(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new qO(this.k);for(const a of e)if(a.metadata.queries){const c=r.Hn(a.metadata.name);for(const h of a.metadata.queries){const _=(t.get(h)||Jt()).add(c);t.set(h,_)}}return t}complete(){var e=this;return(0,z.Z)(function*(){const t=yield function(n,e,t,r){return Rb.apply(this,arguments)}(e.localStore,new qO(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const a of e.queries)yield WT(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",new cp(Object.assign({},e.progress),t)})()}}function GO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZO{constructor(e){this.key=e}}class WO{constructor(e){this.key=e}}class zO{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Jt(),this.mutatedKeys=Jt(),this.Ao=Gx(e),this.Ro=new K_(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new HO,a=t?t.Ro:this.Ro;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,_=!1;const w=Gw(this.query)&&a.size===this.query.limit?a.last():null,I=I_(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((A,x)=>{const F=a.get(A),Z=D_(this.query,x)?x:null,te=!!F&&this.mutatedKeys.has(F.key),Ee=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Te=!1;F&&Z?F.data.isEqual(Z.data)?te!==Ee&&(r.track({type:3,doc:Z}),Te=!0):this.Vo(F,Z)||(r.track({type:2,doc:Z}),Te=!0,(w&&this.Ao(Z,w)>0||I&&this.Ao(Z,I)<0)&&(_=!0)):!F&&Z?(r.track({type:0,doc:Z}),Te=!0):F&&!Z&&(r.track({type:1,doc:F}),Te=!0,(w||I)&&(_=!0)),Te&&(Z?(h=h.add(Z),c=Ee?c.add(A):c.delete(A)):(h=h.delete(A),c=c.delete(A)))}),Gw(this.query)||I_(this.query))for(;h.size>this.query.limit;){const A=Gw(this.query)?h.last():h.first();h=h.delete(A.key),c=c.delete(A.key),r.track({type:1,doc:A})}return{Ro:h,vo:r,Bn:_,mutatedKeys:c}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const c=e.vo.no();c.sort((I,A)=>function(x,F){const Z=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We()}};return Z(x)-Z(F)}(I.type,A.type)||this.Ao(I.doc,A.doc)),this.So(r);const h=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,w=_!==this.Eo;return this.Eo=_,0!==c.length||w?{snapshot:new Y_(this.query,e.Ro,a,c,e.mutatedKeys,0===_,w,!1),Co:h}:{Co:h}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new HO,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Jt(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new WO(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new ZO(r))}),t}ko(e){this.To=e.zn,this.Io=Jt();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return Y_.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class XF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eL{constructor(e){this.key=e,this.$o=!1}}class tL{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Oo={},this.Mo=new fu(_=>iT(_),Qf),this.Fo=new Map,this.Lo=new Set,this.Bo=new _r(Ge.comparator),this.Uo=new Map,this.qo=new xb,this.Ko={},this.jo=new Map,this.Qo=kd.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function nL(n,e){return kM.apply(this,arguments)}function kM(){return(kM=(0,z.Z)(function*(n,e){const t=nN(n);let r,a;const c=t.Mo.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.xo();else{const h=yield Ld(t.localStore,qs(e)),_=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield OM(t,e,r,"current"===_),t.isPrimaryClient&&s(t.remoteStore,h)}return a})).apply(this,arguments)}function OM(n,e,t,r){return PM.apply(this,arguments)}function PM(){return(PM=(0,z.Z)(function*(n,e,t,r){n.Go=(A,x,F)=>{return(Z=(0,z.Z)(function*(te,Ee,Te,Xe){let et=Ee.view.Po(Te);et.Bn&&(et=yield gu(te.localStore,Ee.query,!1).then(({documents:en})=>Ee.view.Po(en,et)));const mt=Xe&&Xe.targetChanges.get(Ee.targetId),Qe=Ee.view.applyChanges(et,te.isPrimaryClient,mt);return GM(te,Ee.targetId,Qe.Co),Qe.snapshot}),function(te,Ee,Te,Xe){return Z.apply(this,arguments)})(n,A,x,F);var Z};const a=yield gu(n.localStore,e,!0),c=new zO(e,a.zn),h=c.Po(a.documents),_=rp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=c.applyChanges(h,n.isPrimaryClient,_);GM(n,t,w.Co);const I=new XF(e,t,c);return n.Mo.set(e,I),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),w.snapshot})).apply(this,arguments)}function rL(n,e){return FM.apply(this,arguments)}function FM(){return(FM=(0,z.Z)(function*(n,e){const t=xe(n),r=t.Mo.get(e),a=t.Fo.get(r.targetId);if(a.length>1)return t.Fo.set(r.targetId,a.filter(c=>!Qf(c,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Vd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),o(t.remoteStore,r.targetId),Q_(t,r.targetId)}).catch(Pd))):(Q_(t,r.targetId),yield Vd(t.localStore,r.targetId,!0))})).apply(this,arguments)}function LM(){return(LM=(0,z.Z)(function*(n,e,t){const r=rN(n);try{const a=yield function(c,h){const _=xe(c),w=fr.now(),I=h.reduce((x,F)=>x.add(F.key),Jt());let A;return _.persistence.runTransaction("Locally write mutations","readwrite",x=>_.Wn.vn(x,I).next(F=>{A=F;const Z=[];for(const te of h){const Ee=SO(te,A.get(te.key));null!=Ee&&Z.push(new Uc(te.key,Ee,XD(Ee.value.mapValue),gr.exists(!0)))}return _.An.addMutationBatch(x,w,Z,h)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,_){let w=c.Ko[c.currentUser.toKey()];w||(w=new _r(Tt)),w=w.insert(h,_),c.Ko[c.currentUser.toKey()]=w}(r,a.batchId,t),yield Zc(r,a.changes),yield ie(r.remoteStore)}catch(a){const c=z_(a,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function KO(n,e){return VM.apply(this,arguments)}function VM(){return(VM=(0,z.Z)(function*(n,e){const t=xe(n);try{const r=yield mM(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.Uo.get(c);h&&(ut(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.$o=!0:a.modifiedDocuments.size>0?ut(h.$o):a.removedDocuments.size>0&&(ut(h.$o),h.$o=!1))}),yield Zc(t,r,e)}catch(r){yield Pd(r)}})).apply(this,arguments)}function YO(n,e,t){const r=xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.Mo.forEach((c,h)=>{const _=h.view.ro(e);_.snapshot&&a.push(_.snapshot)}),function(c,h){const _=xe(c);_.onlineState=h;let w=!1;_.queries.forEach((I,A)=>{for(const x of A.listeners)x.ro(h)&&(w=!0)}),w&&MM(_)}(r.eventManager,e),a.length&&r.Oo.br(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sL(n,e,t){return UM.apply(this,arguments)}function UM(){return(UM=(0,z.Z)(function*(n,e,t){const r=xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Uo.get(e),c=a&&a.key;if(c){let h=new _r(Ge.comparator);h=h.insert(c,pn.newNoDocument(c,gt.min()));const _=Jt().add(c),w=new np(gt.min(),new Map,new On(Tt),h,_);yield KO(r,w),r.Bo=r.Bo.remove(c),r.Uo.delete(e),ZM(r)}else yield Vd(r.localStore,e,!1).then(()=>Q_(r,e,t)).catch(Pd)})).apply(this,arguments)}function oL(n,e){return BM.apply(this,arguments)}function BM(){return(BM=(0,z.Z)(function*(n,e){const t=xe(n),r=e.batch.batchId;try{const a=yield gM(t.localStore,e);qM(t,r,null),HM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zc(t,a)}catch(a){yield Pd(a)}})).apply(this,arguments)}function aL(n,e,t){return jM.apply(this,arguments)}function jM(){return(jM=(0,z.Z)(function*(n,e,t){const r=xe(n);try{const a=yield function(c,h){const _=xe(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let I;return _.An.lookupMutationBatch(w,h).next(A=>(ut(null!==A),I=A.keys(),_.An.removeMutationBatch(w,A))).next(()=>_.An.performConsistencyCheck(w)).next(()=>_.Wn.vn(w,I))})}(r.localStore,e);qM(r,e,t),HM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zc(r,a)}catch(a){yield Pd(a)}})).apply(this,arguments)}function $M(){return($M=(0,z.Z)(function*(n,e){const t=xe(n);y(t.remoteStore)||De("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=xe(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>h.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const a=t.jo.get(r)||[];a.push(e),t.jo.set(r,a)}catch(r){const a=z_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function HM(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function qM(n,e,t){const r=xe(n);let a=r.Ko[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.Ko[r.currentUser.toKey()]=a}}function Q_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||QO(n,r)})}function QO(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(o(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),ZM(n))}function GM(n,e,t){for(const r of t)r instanceof ZO?(n.qo.addReference(r.key,e),cL(n,r)):r instanceof WO?(De("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||QO(n,r.key)):We()}function cL(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(De("SyncEngine","New document in limbo: "+t),n.Lo.add(r),ZM(n))}function ZM(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Ge(Ht.fromString(e)),r=n.Qo.next();n.Uo.set(r,new eL(t)),n.Bo=n.Bo.insert(t,r),s(n.remoteStore,new du(qs(Kf(t.path)),r,2,wi.I))}}function Zc(n,e,t){return WM.apply(this,arguments)}function WM(){return(WM=(0,z.Z)(function*(n,e,t){const r=xe(n),a=[],c=[],h=[];var _;r.Mo.isEmpty()||(r.Mo.forEach((_,w)=>{h.push(r.Go(w,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,I.fromCache?"not-current":"current"),a.push(I);const A=B_.$n(w.targetId,I);c.push(A)}}))}),yield Promise.all(h),r.Oo.br(a),yield(_=(0,z.Z)(function*(w,I){const A=xe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ge.forEach(I,F=>ge.forEach(F.kn,Z=>A.persistence.referenceDelegate.addReference(x,F.targetId,Z)).next(()=>ge.forEach(F.xn,Z=>A.persistence.referenceDelegate.removeReference(x,F.targetId,Z)))))}catch(x){if(!Rd(x))throw x;De("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const F=x.targetId;if(!x.fromCache){const Z=A.qn.get(F),Ee=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);A.qn=A.qn.insert(F,Ee)}}}),function(w,I){return _.apply(this,arguments)})(r.localStore,c))})).apply(this,arguments)}function lL(n,e){return zM.apply(this,arguments)}function zM(){return(zM=(0,z.Z)(function*(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){De("SyncEngine","User change. New user:",e.toKey());const r=yield hp(t.localStore,e);t.currentUser=e,(a=t).jo.forEach(h=>{h.forEach(_=>{_.reject(new me(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zc(t,r.Gn)}var a})).apply(this,arguments)}function dL(n,e){const t=xe(n),r=t.Uo.get(e);if(r&&r.$o)return Jt().add(r.key);{let a=Jt();const c=t.Fo.get(e);if(!c)return a;for(const h of c){const _=t.Mo.get(h);a=a.unionWith(_.view.bo)}return a}}function hL(n,e){return KM.apply(this,arguments)}function KM(){return(KM=(0,z.Z)(function*(n,e){const t=xe(n),r=yield gu(t.localStore,e.query,!0),a=e.view.ko(r);return t.isPrimaryClient&&GM(t,e.targetId,a.Co),a})).apply(this,arguments)}function fL(n){return YM.apply(this,arguments)}function YM(){return(YM=(0,z.Z)(function*(n){const e=xe(n);return ZT(e.localStore).then(t=>Zc(e,t))})).apply(this,arguments)}function pL(n,e,t,r){return QM.apply(this,arguments)}function QM(){return(QM=(0,z.Z)(function*(n,e,t,r){const a=xe(n),c=yield function(h,_){const w=xe(h),I=xe(w.An);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>I.Zt(A,_).next(x=>x?w.Wn.vn(A,x):ge.resolve(null)))}(a.localStore,e);var _;null!==c?("pending"===t?yield ie(a.remoteStore):"acknowledged"===t||"rejected"===t?(qM(a,e,r||null),HM(a,e),_=e,xe(xe(a.localStore).An).ee(_)):We(),yield Zc(a,c)):De("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function JM(){return(JM=(0,z.Z)(function*(n,e){const t=xe(n);if(nN(t),rN(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield JO(t,r.toArray());t.Wo=!0,yield Ep(t.remoteStore,!0);for(const c of a)s(t.remoteStore,c)}else if(!1===e&&!1!==t.Wo){const r=[];let a=Promise.resolve();t.Fo.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(Q_(t,h),Vd(t.localStore,h,!0))),o(t.remoteStore,h)}),yield a,yield JO(t,r),function(c){const h=xe(c);h.Uo.forEach((_,w)=>{o(h.remoteStore,w)}),h.qo.hs(),h.Uo=new Map,h.Bo=new _r(Ge.comparator)}(t),t.Wo=!1,yield Ep(t.remoteStore,!1)}})).apply(this,arguments)}function JO(n,e,t){return XM.apply(this,arguments)}function XM(){return(XM=(0,z.Z)(function*(n,e,t){const r=xe(n),a=[],c=[];for(const h of e){let _;const w=r.Fo.get(h);if(w&&0!==w.length){_=yield Ld(r.localStore,qs(w[0]));for(const I of w){const A=r.Mo.get(I),x=yield hL(r,A);x.snapshot&&c.push(x.snapshot)}}else{const I=yield j_(r.localStore,h);_=yield Ld(r.localStore,I),yield OM(r,XO(I),h,!1)}a.push(_)}return r.Oo.br(c),a})).apply(this,arguments)}function XO(n){return qx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mL(n){const e=xe(n);return xe(xe(e.localStore).persistence).Tn()}function _L(n,e,t,r){return eN.apply(this,arguments)}function eN(){return(eN=(0,z.Z)(function*(n,e,t,r){const a=xe(n);if(a.Wo)De("SyncEngine","Ignoring unexpected query state notification.");else if(a.Fo.has(e))switch(t){case"current":case"not-current":{const c=yield ZT(a.localStore),h=np.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Zc(a,c,h);break}case"rejected":yield Vd(a.localStore,e,!0),Q_(a,e,r);break;default:We()}})).apply(this,arguments)}function yL(n,e,t){return tN.apply(this,arguments)}function tN(){return(tN=(0,z.Z)(function*(n,e,t){const r=nN(n);if(r.Wo){for(const a of e){if(r.Fo.has(a)){De("SyncEngine","Adding an already active target "+a);continue}const c=yield j_(r.localStore,a),h=yield Ld(r.localStore,c);yield OM(r,XO(c),h.targetId,!1),s(r.remoteStore,h)}for(const a of t)r.Fo.has(a)&&(yield Vd(r.localStore,a,!1).then(()=>{o(r.remoteStore,a),Q_(r,a)}).catch(Pd))}})).apply(this,arguments)}function nN(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sL.bind(null,e),e.Oo.br=KF.bind(null,e.eventManager),e.Oo.zo=YF.bind(null,e.eventManager),e}function rN(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aL.bind(null,e),e}class e1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,z.Z)(function*(){t.k=gp(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return Ib(this.persistence,new dp,e.initialUser,this.k)}Yo(e){return new Bd(Mb.ks,this.k)}Jo(e){return new mu}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class t1 extends e1{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e),yield function(n){return Ab.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield rN(r.tc.syncEngine),yield ie(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return Ib(this.persistence,new dp,e.initialUser,this.k)}Xo(e){return new BT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=Pr(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ii.withCacheSize(this.cacheSizeBytes):Ii.DEFAULT;return new bb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bM(),Fb(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new mu}}class EL extends t1{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e);const a=r.tc.syncEngine;r.sharedClientState instanceof G_&&(r.sharedClientState.syncEngine={mi:pL.bind(null,a),gi:_L.bind(null,a),yi:yL.bind(null,a),Tn:mL.bind(null,a),_i:fL.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var c=(0,z.Z)(function*(h){yield function(n,e){return JM.apply(this,arguments)}(r.tc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Jo(e){const t=bM();if(!G_.Pt(t))throw new me(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pr(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new G_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iN{initialize(e,t){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>YO(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=lL.bind(null,r.syncEngine),yield Ep(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zF}createDatastore(e){const t=gp(e.databaseInfo.databaseId),r=new VO(e.databaseInfo);return new jO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=_=>YO(this.syncEngine,_,0),h=KT.Pt()?new KT:new Pb,new $O(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,_,w,I){const A=new tL(r,a,c,h,_,w);return I&&(A.Wo=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,z.Z)(function*(t){const r=xe(t);De("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield mp(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function n1(n,e=10240){let t=0;return{read:()=>(0,z.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class QT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wL{constructor(e,t){this.sc=e,this.k=t,this.metadata=new Kn,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,z.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),a=Number(r);isNaN(a)&&e.cc(`length string (${r}) is not valid number`);const c=yield e.ac(a);return new QF(JSON.parse(c),t.length+a)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,z.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,z.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,z.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class bL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,z.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,z.Z)(function*(c,h){const _=xe(c),w=N_(_.k)+"/documents",I={documents:h.map(Z=>sp(_.k,Z))},A=yield _.ji("BatchGetDocuments",w,I),x=new Map;A.forEach(Z=>{const te=function(n,e){return"found"in e?function(t,r){ut(!!r.found);const a=Do(t,r.found.name),c=kr(r.found.updateTime),h=new Gr({mapValue:{fields:r.found.fields}});return pn.newFoundDocument(a,c,h)}(n,e):"missing"in e?function(t,r){ut(!!r.missing),ut(!!r.readTime);const a=Do(t,r.missing),c=kr(r.readTime);return pn.newNoDocument(a,c)}(n,e):We()}(_.k,Z);x.set(te.key.toString(),te)});const F=[];return h.forEach(Z=>{const te=x.get(Z.toString());ut(!!te),F.push(te)}),F}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Id(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=Ge.fromPath(a);e.mutations.push(new Xw(c,e.precondition(c)))}),yield(r=(0,z.Z)(function*(a,c){const h=xe(a),_=N_(h.k)+"/documents",w={writes:c.map(I=>lu(h.k,I))};yield h.Bi("Commit",_,w)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw We();t=gt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gt.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CL{constructor(e,t,r,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=a,this.lc=5,this.ur=new Lb(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,z.Z)(function*(){const t=new bL(e.datastore),r=e.dc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.wc(c)}))}).catch(a=>{e.wc(a)})}))}dc(e){try{const t=this.updateFunction(e);return!aa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Dd(t)}return!1}}class IL{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Nr.UNAUTHENTICATED,this.clientId=KD.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,z.Z)(function*(_){De("FirestoreClient","Received user=",_.uid),yield c.authCredentialListener(_),c.user=_});return function(_){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=z_(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function r1(n,e){return sN.apply(this,arguments)}function sN(){return(sN=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),De("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,z.Z)(function*(c){r.isEqual(c)||(yield hp(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function i1(n,e){return oN.apply(this,arguments)}function oN(){return(oN=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aN(n);De("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>{return(c=(0,z.Z)(function*(h,_){const w=xe(h);w.asyncQueue.verifyOperationInProgress(),De("RemoteStore","RemoteStore received new credentials");const I=y(w);w.Gr.add(3),yield mp(w),I&&w.Jr.set("Unknown"),yield w.remoteSyncer.handleCredentialChange(_),w.Gr.delete(3),yield Z_(w)}),function(h,_){return c.apply(this,arguments)})(e.remoteStore,a);var c}),n.onlineComponents=e})).apply(this,arguments)}function aN(n){return uN.apply(this,arguments)}function uN(){return(uN=(0,z.Z)(function*(n){return n.offlineComponents||(De("FirestoreClient","Using default OfflineComponentProvider"),yield r1(n,new e1)),n.offlineComponents})).apply(this,arguments)}function JT(n){return cN.apply(this,arguments)}function cN(){return(cN=(0,z.Z)(function*(n){return n.onlineComponents||(De("FirestoreClient","Using default OnlineComponentProvider"),yield i1(n,new iN)),n.onlineComponents})).apply(this,arguments)}function s1(n){return aN(n).then(e=>e.persistence)}function lN(n){return aN(n).then(e=>e.localStore)}function o1(n){return JT(n).then(e=>e.remoteStore)}function dN(n){return JT(n).then(e=>e.syncEngine)}function J_(n){return hN.apply(this,arguments)}function hN(){return(hN=(0,z.Z)(function*(n){const e=yield JT(n),t=e.eventManager;return t.onListen=nL.bind(null,e.syncEngine),t.onUnlisten=rL.bind(null,e.syncEngine),t})).apply(this,arguments)}function a1(n,e,t={}){const r=new Kn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(a,c,h,_,w){const I=new QT({next:x=>{c.enqueueAndForget(()=>RM(a,A));const F=x.docs.has(h);!F&&x.fromCache?w.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&x.fromCache&&_&&"server"===_.source?w.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(x)},error:x=>w.reject(x)}),A=new NM(Kf(h.path),I,{includeMetadataChanges:!0,wo:!0});return AM(a,A)}(yield J_(n),n.asyncQueue,e,t,r)})),r.promise}function u1(n,e,t={}){const r=new Kn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(a,c,h,_,w){const I=new QT({next:x=>{c.enqueueAndForget(()=>RM(a,A)),x.fromCache&&"server"===_.source?w.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(x)},error:x=>w.reject(x)}),A=new NM(h,I,{includeMetadataChanges:!0,wo:!0});return AM(a,A)}(yield J_(n),n.asyncQueue,e,t,r)})),r.promise}class kL{constructor(e,t,r,a,c,h,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=_,this.useFetchStreams=w}}class X_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof X_&&e.projectId===this.projectId&&e.database===this.database}}const c1=new Map;function fN(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function l1(n,e,t,r){if(!0===e&&!0===r)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function d1(n){if(!Ge.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function h1(n){if(Ge.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":We()}function Ut(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XT(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function f1(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class p1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,l1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p1({}),this._settingsFrozen=!1,e instanceof X_?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new X_(a.options.projectId)}(e))}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ox;switch(t.type){case"gapi":const r=t.client;return ut(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ZD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=c1.get(e);t&&(De("ComponentProvider","Removing Datastore"),c1.delete(e),t.terminate())}(this),Promise.resolve()}}class Rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class vu extends Di{constructor(e,t,r){super(e,t,Kf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Ge(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function g1(n,e,...t){if(n=(0,Le.m9)(n),fN("collection","path",e),n instanceof Bb){const r=Ht.fromString(e,...t);return h1(r),new vu(n,null,r)}{if(!(n instanceof Rn||n instanceof vu))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ht.fromString(e,...t));return h1(r),new vu(n.firestore,null,r)}}function eA(n,e,...t){if(n=(0,Le.m9)(n),1===arguments.length&&(e=KD.A()),fN("doc","path",e),n instanceof Bb){const r=Ht.fromString(e,...t);return d1(r),new Rn(n,null,new Ge(r))}{if(!(n instanceof Rn||n instanceof vu))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ht.fromString(e,...t));return d1(r),new Rn(n.firestore,n instanceof vu?n.converter:null,new Ge(r))}}function m1(n,e){return n=(0,Le.m9)(n),e=(0,Le.m9)(e),(n instanceof Rn||n instanceof vu)&&(e instanceof Rn||e instanceof vu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _1(n,e){return n=(0,Le.m9)(n),e=(0,Le.m9)(e),n instanceof Di&&e instanceof Di&&n.firestore===e.firestore&&Qf(n._query,e._query)&&n.converter===e.converter}class FL{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Lb(this,"async_queue_retry"),this.bc=()=>{const t=Fb();t&&De("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Fb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Fb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new Kn;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,z.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!Rd(t))throw t;De("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,Qt("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const a=TM.createAndSchedule(this,e,t,r,c=>this.Sc(c));return this.Tc.push(a),a}Pc(){this.Ec&&We()}verifyOperationInProgress(){}Dc(){var e=this;return(0,z.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function pN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class LL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends Bb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new FL,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||y1(this),this._firestoreClient.terminate()}}function Fr(n){return n._firestoreClient||y1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function y1(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kL(n._databaseId,c,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var c,_;n._firestoreClient=new IL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function v1(n,e,t){const r=new Kn;return n.asyncQueue.enqueue((0,z.Z)(function*(){try{yield r1(n,t),yield i1(n,e),r.resolve()}catch(a){if(!("FirebaseError"===(c=a).name?c.code===ne.FAILED_PRECONDITION||c.code===ne.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function E1(n){if(n._initialized||n._terminated)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eu(pr.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eu(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wp{constructor(e){this._methodName=e}}class tA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const WL=/^__.*__$/;class zL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Uc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ep(e,this.data,t,this.fieldTransforms)}}class w1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Uc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We()}}class nA{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=a,void 0===c&&this.xc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new nA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Oc({path:r,Fc:!1});return a.Lc(e),a}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Oc({path:r,Fc:!1});return a.xc(),a}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return iA(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(b1(this.$c)&&WL.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class KL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||gp(e)}Qc(e,t,r,a=!1){return new nA({$c:e,methodName:t,jc:r,path:Bn.emptyPath(),Fc:!1,Kc:a},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function bp(n){const e=n._freezeSettings(),t=gp(n._databaseId);return new KL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rA(n,e,t,r,a,c={}){const h=n.Qc(c.merge||c.mergeFields?2:0,e,t,a);yN("Data must be an object, but it was:",h,r);const _=D1(r,h);let w,I;if(c.merge)w=new gd(h.fieldMask),I=h.fieldTransforms;else if(c.mergeFields){const A=[];for(const x of c.mergeFields){const F=vN(e,x,t);if(!h.contains(F))throw new me(ne.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);A1(A,F)||A.push(F)}w=new gd(A),I=h.fieldTransforms.filter(x=>w.covers(x.field))}else w=null,I=h.fieldTransforms;return new zL(new Gr(_),w,I)}class jb extends wp{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jb}}function C1(n,e,t){return new nA({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class gN extends wp{_toFieldTransform(e){return new Cd(e.path,new bd)}isEqual(e){return e instanceof gN}}class YL extends wp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=C1(this,e,!0),r=this.Wc.map(c=>Cp(c,t)),a=new ua(r);return new Cd(e.path,a)}isEqual(e){return this===e}}class QL extends wp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=C1(this,e,!0),r=this.Wc.map(c=>Cp(c,t)),a=new cu(r);return new Cd(e.path,a)}isEqual(e){return this===e}}class JL extends wp{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Jf(e.k,aT(e.k,this.Gc));return new Cd(e.path,t)}isEqual(e){return this===e}}function mN(n,e,t,r){const a=n.Qc(1,e,t);yN("Data must be an object, but it was:",a,r);const c=[],h=Gr.empty();Un(r,(w,I)=>{const A=EN(e,w,t);I=(0,Le.m9)(I);const x=a.Bc(A);if(I instanceof jb)c.push(A);else{const F=Cp(I,x);null!=F&&(c.push(A),h.set(A,F))}});const _=new gd(c);return new w1(h,_,a.fieldTransforms)}function _N(n,e,t,r,a,c){const h=n.Qc(1,e,t),_=[vN(e,r,t)],w=[a];if(c.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<c.length;F+=2)_.push(vN(e,c[F])),w.push(c[F+1]);const I=[],A=Gr.empty();for(let F=_.length-1;F>=0;--F)if(!A1(I,_[F])){const Z=_[F];let te=w[F];te=(0,Le.m9)(te);const Ee=h.Bc(Z);if(te instanceof jb)I.push(Z);else{const Te=Cp(te,Ee);null!=Te&&(I.push(Z),A.set(Z,Te))}}const x=new gd(I);return new w1(A,x,h.fieldTransforms)}function I1(n,e,t,r=!1){return Cp(t,n.Qc(r?4:3,e))}function Cp(n,e){if(T1(n=(0,Le.m9)(n)))return yN("Unsupported field value:",e,n),D1(n,e);if(n instanceof wp)return function(t,r){if(!b1(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let _=Cp(h,r.Uc(c));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Le.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return aT(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=fr.fromDate(t);return{timestampValue:ip(r.k,a)}}if(t instanceof fr){const a=new fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ip(r.k,a)}}if(t instanceof tA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Eu)return{bytesValue:gT(r.k,t._byteString)};if(t instanceof Rn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.qc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${XT(t)}`)}(n,e)}function D1(n,e){const t={};return Vc(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Un(n,(r,a)=>{const c=Cp(a,e.Mc(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function T1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fr||n instanceof tA||n instanceof Eu||n instanceof Rn||n instanceof wp)}function yN(n,e,t){if(!T1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=XT(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function vN(n,e,t){if((e=(0,Le.m9)(e))instanceof Wc)return e._internalPath;if("string"==typeof e)return EN(n,e);throw iA("Field path arguments must be of type string or ",n,!1,void 0,t)}const XL=new RegExp("[~\\*/\\[\\]]");function EN(n,e,t){if(e.search(XL)>=0)throw iA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch(r){throw iA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iA(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let w="";return(c||h)&&(w+=" (found",c&&(w+=` in field ${r}`),h&&(w+=` in document ${a}`),w+=")"),new me(ne.INVALID_ARGUMENT,_+n+w)}function A1(n,e){return n.some(t=>t.isEqual(e))}class $b{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eV extends $b{data(){return super.data()}}function sA(n,e){return"string"==typeof e?EN(n,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zc extends $b{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Hb extends zc{data(e={}){return super.data(e)}}class Gd{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ip(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hb(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Hb(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ip(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const _=new Hb(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ip(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,I=-1;return 0!==h.type&&(w=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),I=c.indexOf(h.doc.key)),{type:tV(h.type),doc:_,oldIndex:w,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We()}}function S1(n,e){return n instanceof zc&&e instanceof zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gd&&e instanceof Gd&&n._firestore===e._firestore&&_1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function R1(n){if(I_(n)&&0===n.explicitOrderBy.length)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qb{}function Zd(n,...e){for(const t of e)n=t._apply(n);return n}class nV extends qb{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=bp(e.firestore),r=function(a,c,h,_,w,I,A){let x;if(w.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){P1(A,I);const Z=[];for(const te of A)Z.push(O1(_,a,te));x={arrayValue:{values:Z}}}else x=O1(_,a,A)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||P1(A,I),x=I1(h,"where",A,"in"===I||"not-in"===I);const F=ci.create(w,I,x);return function(Z,te){if(te.V()){const Te=Ww(Z);if(null!==Te&&!Te.isEqual(te.field))throw new me(ne.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${te.field.toString()}'`);const Xe=Zw(Z);null!==Xe&&F1(0,te.field,Xe)}const Ee=function(Te,Xe){for(const et of Te.filters)if(Xe.indexOf(et.op)>=0)return et.op;return null}(Z,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Ee)throw new me(ne.INVALID_ARGUMENT,Ee===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Ee.toString()}' filters.`)}(a,F),F}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Di(e.firestore,e.converter,function(a,c){const h=a.filters.concat([c]);return new uu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class iV extends qb{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new zf(a,c);return function(_,w){if(null===Zw(_)){const I=Ww(_);null!==I&&F1(0,I,w.field)}}(r,h),h}(e._query,this.zc,this.Yc);return new Di(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new uu(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class x1 extends qb{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new Di(e.firestore,e.converter,rT(e._query,this.Xc,this.Zc))}}class M1 extends qb{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=k1(e,this.type,this.ta,this.ea);return new Di(e.firestore,e.converter,(a=t,new uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class N1 extends qb{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=k1(e,this.type,this.ta,this.ea);return new Di(e.firestore,e.converter,(a=t,new uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function k1(n,e,t,r){if(t[0]=(0,Le.m9)(t[0]),t[0]instanceof $b)return function(a,c,h,_,w){if(!_)throw new me(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const I=[];for(const A of Yf(a))if(A.field.isKeyField())I.push(v_(c,_.key));else{const x=_.data.field(A.field);if(__(x))throw new me(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const F=A.field.canonicalString();throw new me(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}I.push(x)}return new C_(I,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=bp(n.firestore);return function(c,h,_,w,I,A){const x=c.explicitOrderBy;if(I.length>x.length)throw new me(ne.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let Z=0;Z<I.length;Z++){const te=I[Z];if(x[Z].field.isKeyField()){if("string"!=typeof te)throw new me(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof te}`);if(!nT(c)&&-1!==te.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${te}' contains a slash.`);const Ee=c.path.child(Ht.fromString(te));if(!Ge.isDocumentKey(Ee))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ee}' is not because it contains an odd number of segments.`);const Te=new Ge(Ee);F.push(v_(h,Te))}else{const Ee=I1(_,w,te);F.push(Ee)}}return new C_(F,A)}(n._query,n.firestore._databaseId,a,e,t,r)}}function O1(n,e,t){if("string"==typeof(t=(0,Le.m9)(t))){if(""===t)throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nT(e)&&-1!==t.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ht.fromString(t));if(!Ge.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return v_(n,new Ge(r))}if(t instanceof Rn)return v_(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XT(t)}.`)}function P1(n,e){if(!Array.isArray(n)||0===n.length)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function F1(n,e,t){if(!t.isEqual(e))throw new me(ne.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wN{convertValue(e,t="none"){switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw We()}}convertObject(e,t){const r={};return Un(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new tA(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const t=iu(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ht.fromString(e);ut(CT(r));const a=new X_(r.get(1),r.get(3)),c=new Ge(r.popFirst(5));return a.isEqual(t)||Qt(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function oA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hV extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}class L1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bp(e)}set(e,t,r){this._verifyNotCommitted();const a=Wd(e,this._firestore),c=oA(a.converter,t,r),h=rA(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,gr.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=Wd(e,this._firestore);let h;return h="string"==typeof(t=(0,Le.m9)(t))||t instanceof Wc?_N(this._dataReader,"WriteBatch.update",c._key,t,r,a):mN(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Id(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(n,e){if((n=(0,Le.m9)(n)).firestore!==e)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dp extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function V1(n,e,t){n=Ut(n,Rn);const r=Ut(n.firestore,jn),a=oA(n.converter,e,t);return ey(r,[rA(bp(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,gr.none())])}function U1(n,e,t,...r){n=Ut(n,Rn);const a=Ut(n.firestore,jn),c=bp(a);let h;return h="string"==typeof(e=(0,Le.m9)(e))||e instanceof Wc?_N(c,"updateDoc",n._key,e,t,r):mN(c,"updateDoc",n._key,e),ey(a,[h.toMutation(n._key,gr.exists(!0))])}function B1(n,...e){var t,r,a;n=(0,Le.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||pN(e[h])||(c=e[h],h++);const _={includeMetadataChanges:c.includeMetadataChanges};if(pN(e[h])){const x=e[h];e[h]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[h+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[h+2]=null===(a=x.complete)||void 0===a?void 0:a.bind(x)}let w,I,A;if(n instanceof Rn)I=Ut(n.firestore,jn),A=Kf(n._key.path),w={next:x=>{e[h]&&e[h](bN(I,n,x))},error:e[h+1],complete:e[h+2]};else{const x=Ut(n,Di);I=Ut(x.firestore,jn),A=x._query;const F=new Dp(I);w={next:Z=>{e[h]&&e[h](new Gd(I,F,x,Z))},error:e[h+1],complete:e[h+2]},R1(n._query)}return function(x,F,Z,te){const Ee=new QT(te),Te=new NM(F,Ee,Z);return x.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return AM(yield J_(x),Te)})),()=>{Ee.nc(),x.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return RM(yield J_(x),Te)}))}}(Fr(I),A,_,w)}function ey(n,e){return function(t,r){const a=new Kn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(n,e,t){return LM.apply(this,arguments)}(yield dN(t),r,a)})),a.promise}(Fr(n),e)}function bN(n,e,t){const r=t.docs.get(e._key),a=new Dp(n);return new zc(n,a,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}class bV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bp(e)}get(e){const t=Wd(e,this._firestore),r=new hV(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return We();const c=a[0];if(c.isFoundDocument())return new $b(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new $b(this._firestore,r,t._key,null,t.converter);throw We()})}set(e,t,r){const a=Wd(e,this._firestore),c=oA(a.converter,t,r),h=rA(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=Wd(e,this._firestore);let h;return h="string"==typeof(t=(0,Le.m9)(t))||t instanceof Wc?_N(this._dataReader,"Transaction.update",c._key,t,r,a):mN(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=Wd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wd(e,this._firestore),r=new Dp(this._firestore);return super.get(e).then(a=>new zc(this._firestore,r,t._key,a._document,new Ip(!1,!1),t.converter))}}function CN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function j1(){if("undefined"==typeof Uint8Array)throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function $1(){if("undefined"==typeof atob)throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fd=ke.SDK_VERSION,(0,ke._registerComponent)(new gi.wA("firestore",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),c=new jn(a,new Fx(t.getProvider("auth-internal")),new WD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,ke.registerVersion)(GD,"3.4.3",n),(0,ke.registerVersion)(GD,"3.4.3","esm2017")}();class Gb{constructor(e){this._delegate=e}static fromBase64String(e){return $1(),new Gb(Eu.fromBase64String(e))}static fromUint8Array(e){return j1(),new Gb(Eu.fromUint8Array(e))}toBase64(){return $1(),this._delegate.toBase64()}toUint8Array(){return j1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IN(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class NV{enableIndexedDbPersistence(e,t){return function(n,e){E1(n=Ut(n,jn));const t=Fr(n),r=n._freezeSettings(),a=new iN;return v1(t,a,new t1(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){E1(n=Ut(n,jn));const e=Fr(n),t=n._freezeSettings(),r=new iN;return v1(e,r,new EL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new me(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(t=(0,z.Z)(function*(r){if(!Ws.Pt())return Promise.resolve();const a=r+"main";yield Ws.delete(a)}),function(r){return t.apply(this,arguments)})(Pr(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class H1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof X_||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const c=(n=Ut(n,Bb))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Hf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,_;if("string"==typeof r.mockUserToken)h=r.mockUserToken,_=Nr.MOCK_USER;else{h=(0,Le.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Nr(w)}n._authCredentials=new Px(new g_(h,_))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield s1(n),t=yield o1(n);return e.setNetworkEnabled(!0),function(r){const a=xe(r);return a.Gr.delete(0),Z_(a)}(t)}))}(Fr(n=Ut(n,jn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield s1(n),t=yield o1(n);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(a){const c=xe(a);c.Gr.add(0),yield mp(c),c.Jr.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Ut(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,l1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Kn;return e.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(n,e){return $M.apply(this,arguments)}(yield dN(e),t)})),t.promise}(Fr(n=Ut(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new QT(e);return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield J_(n),a=t,xe(r).io.add(a),void a.next();var r,a})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield J_(n),a=t,void xe(r).io.delete(a);var r,a}))}}(Fr(n=Ut(n,jn)),pN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ty(this,g1(this._delegate,e))}catch(t){throw zi(t,"collection()","Firestore.collection()")}}doc(e){try{return new So(this,eA(this._delegate,e))}catch(t){throw zi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ki(this,function(n,e){if(n=Ut(n,Bb),fN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Di(n,null,(t=e,new uu(Ht.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw zi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const r=yield(a=n,JT(a).then(c=>c.datastore));var a;new CL(n.asyncQueue,r,e,t).run()})),t.promise}(Fr(n=Ut(n,jn)),t=>e(new bV(n,t)))}(this._delegate,t=>e(new q1(this,t)))}batch(){return Fr(this._delegate),new G1(new L1(this._delegate,e=>ey(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Fr(n=Ut(n,jn)),r=new LL;return function(n,e,t,r){const a=function(c,h){let _;return _="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,I){if(w instanceof Uint8Array)return n1(w,I);if(w instanceof ArrayBuffer)return n1(new Uint8Array(w),I);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new wL(w,h);var w}(t,gp(e));n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function(n,e,t){const r=xe(n);var a;(a=(0,z.Z)(function*(c,h,_){try{const w=yield h.getMetadata();if(yield function(F,Z){const te=xe(F),Ee=kr(Z.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Te=>te.Ye.getBundleMetadata(Te,Z.id)).then(Te=>!!Te&&Te.createTime.compareTo(Ee)>=0)}(c.localStore,w))return yield h.close(),void _._completeWith((F=w,{taskState:"Success",documentsLoaded:F.totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}));_._updateProgress(GO(w));const I=new JF(w,c.localStore,h.k);let A=yield h.Ho();for(;A;){const F=yield I.yo(A);F&&_._updateProgress(F),A=yield h.Ho()}const x=yield I.complete();yield Zc(c,x.In,void 0),yield function(F,Z){const te=xe(F);return te.persistence.runTransaction("Save bundle","readwrite",Ee=>te.Ye.saveBundleMetadata(Ee,Z))}(c.localStore,w),_._completeWith(x.progress)}catch(w){Hf("SyncEngine",`Loading bundle failed with ${w}`),_._failWith(w)}var F}),function(c,h,_){return a.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield dN(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,z.Z)(function*(){return function(t,r){const a=xe(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ye.getNamedQuery(c,r))}(yield lN(n),e)}))}(Fr(n=Ut(n,jn)),e).then(t=>t?new Di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ki(this,t):null)}}class aA extends wN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gb(new Eu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return So.forKey(t,this.firestore,null)}}class q1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aA(e)}get(e){const t=Ap(e);return this._delegate.get(t).then(r=>new Zb(this._firestore,new zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Ap(e);return r?(CN("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Ap(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}}class G1{constructor(e){this._delegate=e}set(e,t,r){const a=Ap(e);return r?(CN("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Ap(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Hb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tp.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new Tp(e,new aA(e),t),a.set(t,c)),c}}Tp.INSTANCES=new WeakMap;class So{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new So(t,new Rn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new So(t,new Rn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ty(this.firestore,g1(this._delegate,e))}catch(t){throw zi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Le.m9)(e))instanceof Rn&&m1(this._delegate,e)}set(e,t){t=CN("DocumentReference.set",t);try{return t?V1(this._delegate,e,t):V1(this._delegate,e)}catch(r){throw zi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?U1(this._delegate,e):U1(this._delegate,e,t,...r)}catch(a){throw zi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return ey(Ut(n.firestore,jn),[new Id(n._key,gr.none())])}(this._delegate)}onSnapshot(...e){const t=Z1(e),r=W1(e,a=>new Zb(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return B1(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ut(n,Rn);const e=Ut(n.firestore,jn),t=Fr(e),r=new Dp(e);return function(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(a,c,h){try{const _=yield function(w,I){const A=xe(w);return A.persistence.runTransaction("read document","readonly",x=>A.Wn.Rn(x,I))}(a,c);_.isFoundDocument()?h.resolve(_):_.isNoDocument()?h.resolve(null):h.reject(new me(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const w=z_(_,`Failed to get document '${c} from cache`);h.reject(w)}}),function(a,c,h){return r.apply(this,arguments)})(yield lN(n),e,t);var r})),t.promise}(t,n._key).then(a=>new zc(e,r,n._key,a,new Ip(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ut(n,Rn);const e=Ut(n.firestore,jn);return a1(Fr(e),n._key,{source:"server"}).then(t=>bN(e,n,t))}(this._delegate):function(n){n=Ut(n,Rn);const e=Ut(n.firestore,jn);return a1(Fr(e),n._key).then(t=>bN(e,n,t))}(this._delegate),t.then(r=>new Zb(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new So(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function zi(n,e,t){return n.message=n.message.replace(e,t),n}function Z1(n){for(const e of n)if("object"==typeof e&&!IN(e))return e;return{}}function W1(n,e){var t,r;let a;return a=IN(n[0])?n[0]:IN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class Zb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new So(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return S1(this._delegate,e._delegate)}}class Wb extends Zb{data(e){const t=this._delegate.data(e);return function(n,e){n||We()}(void 0!==t),t}}class Ki{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aA(e)}where(e,t,r){try{return new Ki(this.firestore,Zd(this._delegate,function(n,e,t){const r=e,a=sA("where",n);return new nV(a,r,t)}(e,t,r)))}catch(a){throw zi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ki(this.firestore,Zd(this._delegate,function(n,e="asc"){const t=e,r=sA("orderBy",n);return new iV(r,t)}(e,t)))}catch(r){throw zi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ki(this.firestore,Zd(this._delegate,function(n){return f1("limit",n),new x1("limit",n,"F")}(e)))}catch(t){throw zi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ki(this.firestore,Zd(this._delegate,function(n){return f1("limitToLast",n),new x1("limitToLast",n,"L")}(e)))}catch(t){throw zi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ki(this.firestore,Zd(this._delegate,function(...n){return new M1("startAt",n,!0)}(...e)))}catch(t){throw zi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ki(this.firestore,Zd(this._delegate,function(...n){return new M1("startAfter",n,!1)}(...e)))}catch(t){throw zi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ki(this.firestore,Zd(this._delegate,function(...n){return new N1("endBefore",n,!0)}(...e)))}catch(t){throw zi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ki(this.firestore,Zd(this._delegate,function(...n){return new N1("endAt",n,!1)}(...e)))}catch(t){throw zi(t,"endAt()","Query.endAt()")}}isEqual(e){return _1(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ut(n,Di);const e=Ut(n.firestore,jn),t=Fr(e),r=new Dp(e);return function(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(a,c,h){try{const _=yield gu(a,c,!0),w=new zO(c,_.zn),I=w.Po(_.documents),A=w.applyChanges(I,!1);h.resolve(A.snapshot)}catch(_){const w=z_(_,`Failed to execute query '${c} against cache`);h.reject(w)}}),function(a,c,h){return r.apply(this,arguments)})(yield lN(n),e,t);var r})),t.promise}(t,n._query).then(a=>new Gd(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ut(n,Di);const e=Ut(n.firestore,jn),t=Fr(e),r=new Dp(e);return u1(t,n._query,{source:"server"}).then(a=>new Gd(e,r,n,a))}(this._delegate):function(n){n=Ut(n,Di);const e=Ut(n.firestore,jn),t=Fr(e),r=new Dp(e);return R1(n._query),u1(t,n._query).then(a=>new Gd(e,r,n,a))}(this._delegate),t.then(r=>new DN(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Z1(e),r=W1(e,a=>new DN(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return B1(this._delegate,t,r)}withConverter(e){return new Ki(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}class OV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new OV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Wb(this._firestore,r))})}isEqual(e){return S1(this._delegate,e._delegate)}}class ty extends Ki{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new So(this.firestore,e):null}doc(e){try{return new So(this.firestore,void 0===e?eA(this._delegate):eA(this._delegate,e))}catch(t){throw zi(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Ut(n.firestore,jn),r=eA(n),a=oA(n.converter,e);return ey(t,[rA(bp(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new So(this.firestore,t))}isEqual(e){return m1(this._delegate,e._delegate)}withConverter(e){return new ty(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function Ap(n){return Ut(n,Rn)}class TN{constructor(...e){this._delegate=new Wc(...e)}static documentId(){return new TN(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,Le.m9)(e))instanceof Wc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sp{constructor(e){this._delegate=e}static serverTimestamp(){const e=new gN("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Sp(e)}static delete(){const e=new jb("deleteField");return e._methodName="FieldValue.delete",new Sp(e)}static arrayUnion(...e){const t=function(...n){return new YL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sp(t)}static arrayRemove(...e){const t=function(...n){return new QL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sp(t)}static increment(e){const t=function(n){return new JL("increment",n)}(e);return t._methodName="FieldValue.increment",new Sp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const PV={Firestore:H1,GeoPoint:tA,Timestamp:fr,Blob:Gb,Transaction:q1,WriteBatch:G1,DocumentReference:So,DocumentSnapshot:Zb,Query:Ki,QueryDocumentSnapshot:Wb,QuerySnapshot:DN,CollectionReference:ty,FieldPath:TN,FieldValue:Sp,setLogLevel:function(n){!function(n){ds.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function z1(n,e){return function(n,e=mm){return new Vn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function AN(n,e){return z1(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function uA(n,e){return AN(n,e).pipe(Mh(void 0),KE(),(0,it.U)(([t,r])=>{const a=r.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,_)=>{const w=a.find(A=>A.doc.ref.isEqual(h.ref)),I=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&I&&JSON.stringify(I.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:h}})}),c}))}function K1(n,e,t){return uA(n,t).pipe(zu((r,a)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(c=>c.payload),e),[]),t=>t.lift(new XR(void 0,void 0)),(0,it.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function SN(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function Y1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new gi.wA("firestore-compat",t=>((e,t)=>new H1(e,t,new NV))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},PV)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.12")}($I.Z);class Q1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Mh(void 0),KE(),oo(([r,a])=>a.length>0||!r),(0,it.U)(([r,a])=>a),si)}auditTrail(e){return this.stateChanges(e).pipe(zu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Y1(e);return K1(this.query,t,this.afs.schedulers.outsideAngular).pipe(si)}valueChanges(e={}){return AN(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),si)}get(e){return(0,Kt.D)(this.query.get(e)).pipe(si)}add(e){return this.ref.add(e)}doc(e){return new J1(this.ref.doc(e),this.afs)}}class J1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:c}=X1(r,t);return new Q1(a,c,this.afs)}snapshotChanges(){return function(n,e){return z1(n,e).pipe(Mh(void 0),KE(),(0,it.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(si)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Kt.D)(this.ref.get(e)).pipe(si)}}class $V{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uA(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),oo(t=>t.length>0),si):uA(this.query,this.afs.schedulers.outsideAngular).pipe(si)}auditTrail(e){return this.stateChanges(e).pipe(zu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Y1(e);return K1(this.query,t,this.afs.schedulers.outsideAngular).pipe(si)}valueChanges(e={}){return AN(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),si)}get(e){return(0,Kt.D)(this.query.get(e)).pipe(si)}}const HV=new f.OlP("angularfire2.enableFirestorePersistence"),qV=new f.OlP("angularfire2.firestore.persistenceSettings"),GV=new f.OlP("angularfire2.firestore.settings"),ZV=new f.OlP("angularfire2.firestore.use-emulator");function X1(n,e=(t=>t)){return{query:e(n),ref:n}}let eP=(()=>{class n{constructor(t,r,a,c,h,_,w,I,A,x,F,Z,te,Ee,Te,Xe,et){this.schedulers=w;const mt=(0,oi.on)(t,_,r),Qe=A;x&&UI(mt,_,F,te,Ee,Te,Z,Xe),[this.firestore,this.persistenceEnabled$]=(0,oi.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const en=_.runOutsideAngular(()=>mt.firestore());if(c&&en.settings(c),Qe&&en.useEmulator(...Qe),a&&!Ou(h)){const Yr=()=>{try{return(0,Kt.D)(en.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Xd){return"undefined"!=typeof console&&console.warn(Xd),ze(!1)}};return[en,_.runOutsideAngular(Yr)]}return[en,ze(!1)]},[c,Qe,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=X1(a,r),_=this.schedulers.ngZone.run(()=>c);return new Q1(_,h,this)}collectionGroup(t,r){const a=r||(h=>h),c=this.firestore.collectionGroup(t);return new $V(a(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new J1(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oi.Dh),f.LFG(oi.xv,8),f.LFG(HV,8),f.LFG(GV,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ji),f.LFG(qV,8),f.LFG(ZV,8),f.LFG(zE,8),f.LFG(PI,8),f.LFG(Lm,8),f.LFG(FI,8),f.LFG(WE,8),f.LFG(LI,8),f.LFG(VI,8),f.LFG(Fm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class zV{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new KV(e,this.dueTime,this.scheduler))}}class KV extends Ln.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(YV,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function YV(n){n.debouncedNext()}const tP="firebasestorage.googleapis.com",nP="storageBucket";class Jn extends Le.ZR{constructor(e,t){super(RN(e),`Firebase Storage: ${t} (${RN(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jn.prototype)}_codeEquals(e){return RN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function RN(n){return"storage/"+n}function xN(){return new Jn("unknown","An unknown error occurred, please check the error payload for server response.")}function rP(){return new Jn("canceled","User canceled the upload/download.")}function iP(){return new Jn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ny(n){return new Jn("invalid-argument",n)}function sP(){return new Jn("app-deleted","The Firebase app was deleted.")}function oP(n){return new Jn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zb(n,e){return new Jn("invalid-format","String does not match format '"+n+"': "+e)}function Kb(n){throw new Jn("internal-error","Internal error: "+n)}class Ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ti.makeFromUrl(e,t)}catch(a){return new Ti(e,"")}if(""===r.path)return r;throw function(n){return new Jn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)",_=new RegExp("^gs://"+a+"(/(.*))?$","i");function I(Qe){Qe.path_=decodeURIComponent(Qe.path)}const x=t.replace(/[.]/g,"\\."),mt=[{regex:_,indices:{bucket:1,path:3},postModify:function(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${a}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===tP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${a}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let Qe=0;Qe<mt.length;Qe++){const en=mt[Qe],Yr=en.regex.exec(e);if(Yr){let o0=Yr[en.indices.path];o0||(o0=""),r=new Ti(Yr[en.indices.bucket],o0),en.postModify(r);break}}if(null==r)throw function(n){return new Jn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class lU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function cA(n){return"string"==typeof n||n instanceof String}function aP(n){return MN()&&n instanceof Blob}function MN(){return"undefined"!=typeof Blob}function NN(n,e,t,r){if(r<e)throw ny(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ny(`Invalid value for '${n}'. Expected ${t} or less.`)}function Kc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function uP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var zd=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(zd||(zd={})),zd))();class mU{constructor(e,t,r,a,c,h,_,w,I,A,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=_,this.errorCallback_=w,this.timeout_=I,this.progressCallback_=A,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,Z)=>{this.resolve_=F,this.reject_=Z,this.start_()})}start_(){const t=(r,a)=>{const c=this.resolve_,h=this.reject_,_=a.connection;if(a.wasSuccessCode)try{const w=this.callback_(_,_.getResponse());!function(n){return void 0!==n}(w)?c():c(w)}catch(w){h(w)}else if(null!==_){const w=xN();w.serverResponse=_.getErrorText(),h(this.errorCallback_?this.errorCallback_(_,w):w)}else h(a.canceled?this.appDelete_?sP():rP():new Jn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new lA(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,a=null,c=null,h=!1,_=0;function w(){return 2===_}let I=!1;function A(...Te){I||(I=!0,e.apply(null,Te))}function x(Te){a=setTimeout(()=>{a=null,n(Z,w())},Te)}function F(){c&&clearTimeout(c)}function Z(Te,...Xe){if(I)return void F();if(Te)return F(),void A.call(null,Te,...Xe);if(w()||h)return F(),void A.call(null,Te,...Xe);let mt;r<64&&(r*=2),1===_?(_=2,mt=0):mt=1e3*(r+Math.random()),x(mt)}let te=!1;function Ee(Te){te||(te=!0,F(),!I&&(null!==a?(Te||(_=2),clearTimeout(a),x(0)):Te||(_=1)))}return x(0),c=setTimeout(()=>{h=!0,Ee(!0)},t),Ee}((r,a)=>{if(a)return void r(!1,new lA(!1,null,!0));const c=this.connectionFactory_();this.pendingConnection_=c;const h=_=>{null!==this.progressCallback_&&this.progressCallback_(_.loaded,_.lengthComputable?_.total:-1)};null!==this.progressCallback_&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const _=c.getErrorCode()===zd.NO_ERROR,w=c.getStatus();if(!_||this.isRetryStatusCode_(w)){const A=c.getErrorCode()===zd.ABORT;return void r(!1,new lA(!1,null,A))}const I=-1!==this.successCodes_.indexOf(w);r(!0,new lA(I,c))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,a=-1!==[408,429].indexOf(e),c=-1!==this.additionalRetryCodes_.indexOf(e);return t||a||c}}class lA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function CU(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(MN())return new Blob(n);throw new Jn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const zs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kN{constructor(e,t){this.data=e,this.contentType=t||null}}function ON(n,e){switch(n){case zs.RAW:return new kN(cP(e));case zs.BASE64:case zs.BASE64URL:return new kN(lP(n,e));case zs.DATA_URL:return new kN(function(n){const e=new dP(n);return e.base64?lP(zs.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw zb(zs.DATA_URL,"Malformed data URL.")}return cP(e)}(e.rest)}(e),function(n){return new dP(n).contentType}(e))}throw xN()}function cP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function lP(n,e){switch(n){case zs.BASE64:{const a=-1!==e.indexOf("-"),c=-1!==e.indexOf("_");if(a||c)throw zb(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zs.BASE64URL:{const a=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(a||c)throw zb(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(a){throw zb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class dP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw zb(zs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class wu{constructor(e,t){let r=0,a="";aP(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(aP(this.data_)){const a=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===a?null:new wu(a)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new wu(r,!0)}}static getBlob(...e){if(MN()){const t=e.map(r=>r instanceof wu?r.data_:r);return new wu(CU.apply(null,t))}{const t=e.map(h=>cA(h)?ON(zs.RAW,h).data:h.data_);let r=0;t.forEach(h=>{r+=h.byteLength});const a=new Uint8Array(r);let c=0;return t.forEach(h=>{for(let _=0;_<h.length;_++)a[c++]=h[_]}),new wu(a,!0)}}uploadData(){return this.data_}}function PN(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function hP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function NU(n,e){return e}class Yi{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||NU}}let dA=null;function Yb(){if(dA)return dA;const n=[];n.push(new Yi("bucket")),n.push(new Yi("generation")),n.push(new Yi("metageneration")),n.push(new Yi("name","fullPath",!0));const t=new Yi("name");t.xform=function(c,h){return function(n){return!cA(n)||n.length<2?n:hP(n)}(h)},n.push(t);const a=new Yi("size");return a.xform=function(c,h){return void 0!==h?Number(h):h},n.push(a),n.push(new Yi("timeCreated")),n.push(new Yi("updated")),n.push(new Yi("md5Hash",null,!0)),n.push(new Yi("cacheControl",null,!0)),n.push(new Yi("contentDisposition",null,!0)),n.push(new Yi("contentEncoding",null,!0)),n.push(new Yi("contentLanguage",null,!0)),n.push(new Yi("contentType",null,!0)),n.push(new Yi("metadata","customMetadata",!0)),dA=n,dA}function fP(n,e,t){const r=PN(e);return null===r?null:function(n,e,t){const r={type:"file"},a=t.length;for(let c=0;c<a;c++){const h=t[c];r[h.local]=h.xform(r,e[h.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const c=new Ti(n.bucket,n.fullPath);return e._makeStorageReference(c)}})}(r,n),r}(n,r,t)}function FN(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const c=e[a];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}const pP="prefixes";class bu{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cu(n){if(!n)throw xN()}function hA(n,e){return function(r,a){const c=fP(n,a,e);return Cu(null!==c),c}}function ry(n){return function(t,r){let a;return a=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Jn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Jn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Jn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Jn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,a.serverResponse=r.serverResponse,a}}function Qb(n){const e=ry(n);return function(r,a){let c=e(r,a);return 404===r.getStatus()&&(c=function(n){return new Jn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),c.serverResponse=a.serverResponse,c}}function mP(n,e,t){const a=Kc(e.fullServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,_=new bu(a,"GET",hA(n,t),h);return _.errorHandler=Qb(e),_}function jU(n,e,t,r,a){const c={};c.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(c.delimiter=t),r&&(c.pageToken=r),a&&(c.maxResults=a);const _=Kc(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,A=new bu(_,"GET",function(n,e){return function(r,a){const c=function(n,e,t){const r=PN(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[pP])for(const a of t[pP]){const c=a.replace(/\/$/,""),h=n._makeStorageReference(new Ti(e,c));r.prefixes.push(h)}if(t.items)for(const a of t.items){const c=n._makeStorageReference(new Ti(e,a.name));r.items.push(c)}return r}(n,e,r)}(n,e,a);return Cu(null!==c),c}}(n,e.bucket),I);return A.urlParams=c,A.errorHandler=ry(e),A}function yP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class fA{constructor(e,t,r,a){this.current=e,this.total=t,this.finalized=!!r,this.metadata=a||null}}function LN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(a){Cu(!1)}return Cu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const KU={STATE_CHANGED:"state_changed"},Qi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VN(n){switch(n){case"running":case"pausing":case"canceling":return Qi.RUNNING;case"paused":return Qi.PAUSED;case"success":return Qi.SUCCESS;case"canceled":return Qi.CANCELED;case"error":default:return Qi.ERROR}}class YU{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function iy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class JU extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a){if(this.sent_)throw Kb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==a)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Kb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Kb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Kb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Kb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function la(){return new JU}class bP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Yb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{this._request=void 0,this._chunkMultiplier=1,a._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=a,this._transition("error"))},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals("canceled")?this.completeTransitions_():(this._error=a,this._transition("error"))},this._promise=new Promise((a,c)=>{this._resolve=a,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,a){const c=e.bucketOnlyServerUrl(),h=yP(e,r,a),_={name:h.fullPath},w=Kc(c,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},x=FN(h,t),te=new bu(w,"POST",function(Ee){let Te;LN(Ee);try{Te=Ee.getResponseHeader("X-Goog-Upload-URL")}catch(Xe){Cu(!1)}return Cu(cA(Te)),Te},n.maxUploadRetryTime);return te.urlParams=_,te.headers=A,te.body=x,te.errorHandler=ry(e),te}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,la,e,t);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const a=function(n,e,t,r){const w=new bu(t,"POST",function(I){const A=LN(I,["active","final"]);let x=null;try{x=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Z){Cu(!1)}x||Cu(!1);const F=Number(x);return Cu(!isNaN(F)),new fA(F,r.size(),"final"===A)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=ry(e),w}(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(a,la,t,r);this._request=c,c.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new fA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((a,c)=>{let h;try{h=function(n,e,t,r,a,c,h,_){const w=new fA(0,0);if(h?(w.current=h.current,w.total=h.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw new Jn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const I=w.total-w.current;let A=I;a>0&&(A=Math.min(A,a));const x=w.current,te={"X-Goog-Upload-Command":A===I?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},Ee=r.slice(x,x+A);if(null===Ee)throw iP();const mt=new bu(t,"POST",function(Qe,en){const Yr=LN(Qe,["active","final"]),Xd=w.current+A,o0=r.size();let uk;return uk="final"===Yr?hA(e,c)(Qe,en):null,new fA(Xd,o0,"final"===Yr,uk)},e.maxUploadRetryTime);return mt.headers=te,mt.body=Ee.uploadData(),mt.progressCallback=_||null,mt.errorHandler=ry(n),mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const _=this._ref.storage._makeRequest(h,la,a,c);this._request=_,_.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=mP(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(r,la,e,t);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,a){const c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},w=function(){let mt="";for(let Qe=0;Qe<2;Qe++)mt+=Math.random().toString().slice(2);return mt}();h["Content-Type"]="multipart/related; boundary="+w;const I=yP(e,r,a),A=FN(I,t),Z=wu.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+w+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===Z)throw iP();const te={name:I.fullPath},Ee=Kc(c,n.host,n._protocol),Xe=n.maxUploadRetryTime,et=new bu(Ee,"POST",hA(n,t),Xe);return et.urlParams=te,et.headers=h,et.body=Z.uploadData(),et.errorHandler=ry(e),et}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,la,e,t);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rP(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=VN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,a){const c=new YU(t||void 0,r||void 0,a||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(VN(this._state)){case Qi.SUCCESS:iy(this._resolve.bind(null,this.snapshot))();break;case Qi.CANCELED:case Qi.ERROR:iy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(VN(this._state)){case Qi.RUNNING:case Qi.PAUSED:e.next&&iy(e.next.bind(e,this.snapshot))();break;case Qi.SUCCESS:e.complete&&iy(e.complete.bind(e))();break;case Qi.CANCELED:case Qi.ERROR:e.error&&iy(e.error.bind(e,this._error))();break;default:e.error&&iy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Rp{constructor(e,t){this._service=e,this._location=t instanceof Ti?t:Ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rp(e,t)}get root(){const e=new Ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hP(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ti(this._location.bucket,e);return new Rp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw oP(e)}}function IP(n,e,t){return UN.apply(this,arguments)}function UN(){return(UN=(0,z.Z)(function*(n,e,t){const a=yield DP(n,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),null!=a.nextPageToken&&(yield IP(n,e,a.nextPageToken))})).apply(this,arguments)}function DP(n,e){null!=e&&"number"==typeof e.maxResults&&NN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=jU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,la)}function l2(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const a=Kc(e.fullServerUrl(),n.host,n._protocol),h=n.maxOperationRetryTime,_=new bu(a,"GET",function(n,e){return function(r,a){const c=fP(n,a,e);return Cu(null!==c),function(n,e,t,r){const a=PN(e);if(null===a||!cA(a.downloadTokens))return null;const c=a.downloadTokens;if(0===c.length)return null;const h=encodeURIComponent;return c.split(",").map(I=>{const x=n.fullPath;return Kc("/b/"+h(n.bucket)+"/o/"+h(x),t,r)+uP({alt:"media",token:I})})[0]}(c,a,n.host,n._protocol)}}(n,t),h);return _.errorHandler=Qb(e),_}(n.storage,n._location,Yb());return n.storage.makeRequestWithTokens(e,la).then(t=>{if(null===t)throw new Jn("no-download-url","The given file does not have any download URLs.");return t})}function TP(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ti(n._location.bucket,t);return new Rp(n.storage,r)}function AP(n,e){if(n instanceof BN){const t=n;if(null==t._bucket)throw new Jn("no-default-bucket","No default bucket found. Did you set the '"+nP+"' property when initializing the app?");const r=new Rp(t,t._bucket);return null!=e?AP(r,e):r}return void 0!==e?TP(n,e):n}function p2(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BN)return function(n,e){return new Rp(n,e)}(n,e);throw ny("To use ref(service, url), the first argument must be a Storage instance.")}return AP(n,e)}function SP(n,e){const t=null==e?void 0:e[nP];return null==t?null:Ti.makeFromBucketSpec(t,n)}class BN{constructor(e,t,r,a,c){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=c,this._bucket=null,this._host=tP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Ti.makeFromBucketSpec(a,this._host):SP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ti.makeFromBucketSpec(this._url,e):SP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,z.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,z.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rp(this,e)}_makeRequest(e,t,r,a){if(this._deleted)return new lU(sP());{const c=function(n,e,t,r,a,c){const h=uP(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,c),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new mU(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a)}(e,this._appId,r,a,t,this._firebaseVersion);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,z.Z)(function*(){const[a,c]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,a,c).getPromise()})()}}const RP="@firebase/storage";function NP(n,e){return p2(n=(0,Le.m9)(n),e)}(0,ke._registerComponent)(new gi.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new BN(t,r,a,e,ke.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(RP,"0.9.1",""),(0,ke.registerVersion)(RP,"0.9.1","esm2017");class pA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class kP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new pA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new pA(r,this,this._ref))},t)}on(e,t,r,a){let c;return t&&(c="function"==typeof t?h=>t(new pA(h,this,this._ref)):{next:t.next?h=>t.next(new pA(h,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,c,r||void 0,a||void 0)}}class OP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Yc(e,this._service))}get items(){return this._delegate.items.map(e=>new Yc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Yc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return TP(n,e)}(this._delegate,e);return new Yc(t,this.storage)}get root(){return new Yc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Yc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new kP(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new bP(n,new wu(e),t)}(n=(0,Le.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zs.RAW,r){this._throwIfRoot("putString");const a=ON(t,e),c=Object.assign({},r);return null==c.contentType&&null!=a.contentType&&(c.contentType=a.contentType),new kP(new bP(this._delegate,new wu(a.data,!0),c),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return IP(n,e).then(()=>e)}(n=(0,Le.m9)(n))}(this._delegate).then(e=>new OP(e,this.storage))}list(e){return function(n,e){return DP(n=(0,Le.m9)(n),e)}(this._delegate,e||void 0).then(t=>new OP(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=mP(n.storage,n._location,Yb());return n.storage.makeRequestWithTokens(e,la)}(n=(0,Le.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const c=Kc(e.fullServerUrl(),n.host,n._protocol),_=FN(t,r),I=n.maxOperationRetryTime,A=new bu(c,"PATCH",hA(n,r),I);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=_,A.errorHandler=Qb(e),A}(n.storage,n._location,e,Yb());return n.storage.makeRequestWithTokens(t,la)}(n=(0,Le.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return l2(n=(0,Le.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=Kc(e.fullServerUrl(),n.host,n._protocol),_=new bu(r,"DELETE",function(w,I){},n.maxOperationRetryTime);return _.successCodes=[200,204],_.errorHandler=Qb(e),_}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,la)}(n=(0,Le.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw oP(e)}}class PP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(FP(e))throw ny("ref() expected a child path but got a URL, use refFromURL instead.");return new Yc(NP(this._delegate,e),this)}refFromURL(e){if(!FP(e))throw ny("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ti.makeFromUrl(e,this._delegate.host)}catch(t){throw ny("refFromUrl() expected a valid full URL but got an invalid one.")}return new Yc(NP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken="string"==typeof a?a:(0,Le.Sg)(a,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function FP(n){return/^[A-Za-z]+:\/\//.test(n)}function x2(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new PP(t,r)}function LP(n){const e=function(n){return new Vn.y(e=>{const t=h=>e.next(h);t(n.snapshot);const c=n.on("state_changed",t);return n.then(h=>{t(h),e.complete()},h=>{t(n.snapshot),(h=>{e.error(h)})(h)}),function(){c()}}).pipe(function(n,e=aR){return t=>t.lift(new zV(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,it.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gA(n){return{getDownloadURL:()=>ze(void 0).pipe(oI,or(()=>n.getDownloadURL()),si),getMetadata:()=>ze(void 0).pipe(oI,or(()=>n.getMetadata()),si),delete:()=>(0,Kt.D)(n.delete()),child:e=>gA(n.child(e)),updateMetadata:e=>(0,Kt.D)(n.updateMetadata(e)),put:(e,t)=>LP(n.put(e,t)),putString:(e,t,r)=>LP(n.putString(e,t,r)),list:e=>(0,Kt.D)(n.list(e)),listAll:()=>(0,Kt.D)(n.listAll())}}!function(n){const e={TaskState:Qi,TaskEvent:KU,StringFormat:zs,Storage:PP,Reference:Yc};n.INTERNAL.registerComponent(new gi.wA("storage-compat",x2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.9")}($I.Z);const k2=new f.OlP("angularfire2.storageBucket"),O2=new f.OlP("angularfire2.storage.maxUploadRetryTime"),P2=new f.OlP("angularfire2.storage.maxOperationRetryTime"),F2=new f.OlP("angularfire2.storage.use-emulator");let jN=(()=>{class n{constructor(t,r,a,c,h,_,w,I,A,x){const F=(0,oi.on)(t,h,r);this.storage=(0,oi.cc)(`${F.name}.storage.${a}`,"AngularFireStorage",F.name,()=>{const Z=h.runOutsideAngular(()=>F.storage(a||void 0)),te=A;return te&&Z.useEmulator(...te),w&&Z.setMaxUploadRetryTime(w),I&&Z.setMaxOperationRetryTime(I),Z},[w,I])}ref(t){return gA(this.storage.ref(t))}refFromURL(t){return gA(this.storage.refFromURL(t))}upload(t,r,a){return gA(this.storage.ref(t)).put(r,a)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oi.Dh),f.LFG(oi.xv,8),f.LFG(k2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ji),f.LFG(O2,8),f.LFG(P2,8),f.LFG(F2,8),f.LFG(Fm,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VP=(()=>{class n{constructor(t,r){this.afs=t,this.fireStorage=r}addStudent(t){return t.id=this.afs.createId(),this.afs.collection("/Students").add(t)}getAllStudents(){return this.afs.collection("/Students").snapshotChanges()}deleteStudent(t){this.afs.doc("/Students/"+t.id).delete()}updateStudent(t){this.deleteStudent(t),this.addStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(eP),f.LFG(jN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var L2=V(555);function mA(n,e){return new Vn.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let c=0,h=0;for(let _=0;_<r;_++){const w=(0,Kt.D)(n[_]);let I=!1;t.add(w.subscribe({next:A=>{I||(I=!0,h++),a[_]=A},error:A=>t.error(A),complete:()=>{c++,(c===r||!I)&&(h===r&&t.next(e?e.reduce((A,x,F)=>(A[x]=a[F],A),{}):a),t.complete())}}))}})}let UP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),xp=(()=>{class n extends UP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Iu=new f.OlP("NgValueAccessor"),B2={provide:Iu,useExisting:(0,f.Gpc)(()=>Mp),multi:!0},$2=new f.OlP("CompositionEventMode");let Mp=(()=>{class n extends UP{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36($2,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[f._Bn([B2]),f.qOj]}),n})();const Ai=new f.OlP("NgValidators"),Yd=new f.OlP("NgAsyncValidators");function YP(n){return null!=n}function QP(n){const e=(0,f.QGY)(n)?(0,Kt.D)(n):n;return(0,f.CqO)(e),e}function JP(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function XP(n,e){return e.map(t=>t(n))}function eF(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function $N(n){return null!=n?function(n){if(!n)return null;const e=n.filter(YP);return 0==e.length?null:function(t){return JP(XP(t,e))}}(eF(n)):null}function HN(n){return null!=n?function(n){if(!n)return null;const e=n.filter(YP);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,hl.k)(e))return mA(e,null);if((0,L2.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return mA(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return mA(n=1===n.length&&(0,hl.k)(n[0])?n[0]:n,null).pipe((0,it.U)(t=>e(...t)))}return mA(n,null)}(XP(t,e).map(QP)).pipe((0,it.U)(JP))}}(eF(n)):null}function rF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qN(n){return n?Array.isArray(n)?n:[n]:[]}function _A(n,e){return Array.isArray(n)?n.includes(e):n===e}function oF(n,e){const t=qN(e);return qN(n).forEach(a=>{_A(t,a)||t.push(a)}),t}function aF(n,e){return qN(e).filter(t=>!_A(n,t))}let uF=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$N(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=HN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),Ji=(()=>{class n extends uF{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class Jd extends uF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cF{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}let Jb=(()=>{class n extends cF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Jd,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Xb=(()=>{class n extends cF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ji,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function e0(n,e){WN(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&lF(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&lF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WN(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();wA(e._rawValidators,a),wA(e._rawAsyncValidators,a)}function lF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const t0="VALID",IA="INVALID",sy="PENDING",n0="DISABLED";function YN(n){return(JN(n)?n.validators:n)||null}function fF(n){return Array.isArray(n)?$N(n):n||null}function QN(n,e){return(JN(e)?e.asyncValidators:n)||null}function pF(n){return Array.isArray(n)?HN(n):n||null}function JN(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class XN{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=fF(this._rawValidators),this._composedAsyncValidatorFn=pF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===t0}get invalid(){return this.status===IA}get pending(){return this.status==sy}get disabled(){return this.status===n0}get enabled(){return this.status!==n0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=fF(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=pF(e)}addValidators(e){this.setValidators(oF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aF(e,this._rawAsyncValidators))}hasValidator(e){return _A(this._rawValidators,e)}hasAsyncValidator(e){return _A(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=n0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=t0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===t0||this.status===sy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?n0:t0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sy,this._hasOwnPendingAsyncValidator=!0;const t=QP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof ek?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof nB&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?n0:this.errors?IA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sy)?sy:this._anyControlsHaveStatus(IA)?IA:t0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){JN(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class DA extends XN{constructor(e=null,t,r){super(YN(t),QN(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ek extends XN{constructor(e,t,r){super(YN(t),QN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof DA?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,c)=>{r=t(r,a,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class nB extends XN{constructor(e,t,r){super(YN(t),QN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof DA?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const rB={provide:Ji,useExisting:(0,f.Gpc)(()=>Np)},r0=(()=>Promise.resolve(null))();let Np=(()=>{class n extends Ji{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new ek({},$N(t),HN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){r0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),e0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){r0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),CA(this._directives,t)})}addFormGroup(t){r0.then(()=>{const r=this._findContainer(t.path),a=new ek({});(function(n,e){WN(n,e)})(a,t),r.registerControl(t.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){r0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){r0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ai,10),f.Y36(Yd,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([rB]),f.qOj]}),n})();const sB={provide:Jd,useExisting:(0,f.Gpc)(()=>oy)},_F=(()=>Promise.resolve(null))();let oy=(()=>{class n extends Jd{constructor(t,r,a,c){super(),this.control=new DA,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===Mp?t=c:function(n){return Object.getPrototypeOf(n.constructor)===xp}(c)?r=c:a=c}),a||r||t||null}(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){e0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_F.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=""===r||r&&"false"!==r;_F.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ji,9),f.Y36(Ai,10),f.Y36(Yd,10),f.Y36(Iu,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([sB]),f.qOj,f.TTD]}),n})(),s0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),vF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),FF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[vF]]}),n})(),RB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[FF]}),n})();function xB(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f.TgZ(10,"button",23),f.NdJ("click",function(){const c=f.CHM(t).$implicit;return f.oxw().deleteStudent(c)}),f._uU(11,"Delete"),f.qZA(),f.qZA(),f.qZA()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.first_name),f.xp6(2),f.Oqu(t.last_name),f.xp6(2),f.Oqu(t.email),f.xp6(2),f.Oqu(t.mobile)}}let MB=(()=>{class n{constructor(t,r){this.auth=t,this.data=r,this.studentsList=[],this.studentObj={id:"",first_name:"",last_name:"",email:"",mobile:""},this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}ngOnInit(){this.getAllStudents()}getAllStudents(){this.data.getAllStudents().subscribe(t=>{this.studentsList=t.map(r=>{const a=r.payload.doc.data();return a.id=r.payload.doc.id,a})},t=>{alert("Error while fetching student data")})}resetForm(){this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}addStudent(){""!=this.first_name&&""!=this.last_name&&""!=this.mobile&&""!=this.email?(this.studentObj.id="",this.studentObj.email=this.email,this.studentObj.first_name=this.first_name,this.studentObj.last_name=this.last_name,this.studentObj.mobile=this.mobile,this.data.addStudent(this.studentObj),this.resetForm()):alert("Fill all input fields")}updateStudent(){}deleteStudent(t){window.confirm("Are you sure you want to delete "+t.first_name+" "+t.last_name+" ?")&&this.data.deleteStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vm),f.Y36(VP))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:45,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","tetx-center"],[1,"text-center","text-warning"],[1,"form-floating","mb-3"],["type","text","id","firstName","name","firstname",1,"form-control",3,"ngModel","ngModelChange"],["for","firstname"],["type","text","id","lastName","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","mobile","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"h5",5),f._uU(6,"Add Student"),f.qZA(),f.qZA(),f.TgZ(7,"div",6),f.TgZ(8,"input",7),f.NdJ("ngModelChange",function(c){return r.first_name=c}),f.qZA(),f.TgZ(9,"label",8),f._uU(10,"First name"),f.qZA(),f.qZA(),f.TgZ(11,"div",6),f.TgZ(12,"input",9),f.NdJ("ngModelChange",function(c){return r.last_name=c}),f.qZA(),f.TgZ(13,"label",10),f._uU(14,"Last name"),f.qZA(),f.qZA(),f.TgZ(15,"div",6),f.TgZ(16,"input",11),f.NdJ("ngModelChange",function(c){return r.email=c}),f.qZA(),f.TgZ(17,"label",12),f._uU(18,"Email address"),f.qZA(),f.qZA(),f.TgZ(19,"div",6),f.TgZ(20,"input",13),f.NdJ("ngModelChange",function(c){return r.mobile=c}),f.qZA(),f.TgZ(21,"label",14),f._uU(22,"Mobile"),f.qZA(),f.qZA(),f.TgZ(23,"button",15),f.NdJ("click",function(){return r.addStudent()}),f._uU(24,"Add Student"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(25,"div",16),f.TgZ(26,"h5",17),f._uU(27," Student List"),f.qZA(),f.TgZ(28,"div",18),f.TgZ(29,"div",19),f.TgZ(30,"table",20),f.TgZ(31,"thead"),f.TgZ(32,"tr"),f.TgZ(33,"th",21),f._uU(34,"First name"),f.qZA(),f.TgZ(35,"th",21),f._uU(36,"Last name"),f.qZA(),f.TgZ(37,"th",21),f._uU(38,"Email"),f.qZA(),f.TgZ(39,"th",21),f._uU(40,"Mobile"),f.qZA(),f.TgZ(41,"th",21),f._uU(42,"Action"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(43,"tbody"),f.YNc(44,xB,12,4,"tr",22),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(8),f.Q6J("ngModel",r.first_name),f.xp6(4),f.Q6J("ngModel",r.last_name),f.xp6(4),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.mobile),f.xp6(24),f.Q6J("ngForOf",r.studentsList))},directives:[Mp,Jb,oy,_s],styles:[""]}),n})();class NB{constructor(e){this.id="",this.name="",this.size=0,this.url="",this.file=e}}let kB=(()=>{class n{constructor(t,r){this.fireStore=t,this.fireStorage=r}saveMetaDataOfFile(t){const r={id:"",name:t.name,url:t.url,size:t.size};r.id=this.fireStore.createId(),this.fireStore.collection("/Upload").add(r)}getAllFiles(){return this.fireStore.collection("/Upload").snapshotChanges()}deleteFile(t){this.fireStore.collection("/Upload").doc(t.id).delete(),this.fireStorage.ref("/Uploads/"+t.name).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(eP),f.LFG(jN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OB(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f.TgZ(6,"a",15),f._uU(7,"Download"),f.qZA(),f.TgZ(8,"a",16),f.NdJ("click",function(){const c=f.CHM(t).$implicit;return f.oxw().deleteFile(c)}),f._uU(9,"Delete"),f.qZA(),f.qZA(),f.qZA()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.name),f.xp6(2),f.Oqu(t.size),f.xp6(2),f.s9C("href",t.url,f.LSH)}}const PB=function(n){return{width:n}},FB=[{path:"",redirectTo:"file-upload",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}login(){""!=this.email?""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Please enter password"):alert("Please enter email")}signInWithGoogle(){this.auth.googleSignIn()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:38,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"text-center"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",2,"background-color","#ffc107",3,"click"],[1,"row"],[1,"col-md-6"],["href","/register",2,"text-decoration","none"],[1,"text-danger"],["href","/forgot-password",1,"text-dark",2,"text-decoration","none"],[1,"row","mt-2"],[2,"text-decoration","none","cursor","pointer",3,"click"],[1,"card","shadow","text-center"],["src","../../../assets/icons8-google-48.png","alt","","height","24px","width","24px"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"h4",5),f._uU(6,"Welcome to Admin Panel"),f.qZA(),f.TgZ(7,"div",6),f.TgZ(8,"form"),f.TgZ(9,"div",7),f.TgZ(10,"h4",8),f._uU(11,"Login (Admin)"),f.qZA(),f.qZA(),f.TgZ(12,"div",7),f.TgZ(13,"label",9),f._uU(14,"Email"),f.qZA(),f.TgZ(15,"input",10),f.NdJ("ngModelChange",function(c){return r.email=c}),f.qZA(),f.qZA(),f.TgZ(16,"div",7),f.TgZ(17,"label",11),f._uU(18,"Password"),f.qZA(),f.TgZ(19,"input",12),f.NdJ("ngModelChange",function(c){return r.password=c}),f.qZA(),f.qZA(),f.TgZ(20,"button",13),f.NdJ("click",function(){return r.login()}),f._uU(21,"Login"),f.qZA(),f.TgZ(22,"div",14),f.TgZ(23,"div",15),f.TgZ(24,"a",16),f._uU(25,"Need Account ? "),f.TgZ(26,"span",17),f._uU(27,"Register"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"div",15),f.TgZ(29,"a",18),f._uU(30," Forgot Password ? "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",19),f.TgZ(32,"a",20),f.NdJ("click",function(){return r.signInWithGoogle()}),f.TgZ(33,"div",21),f.TgZ(34,"div",6),f._UZ(35,"img",22),f._uU(36," Sign In with Google "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(37,"div",2),f.qZA(),f.qZA()),2&t&&(f.xp6(15),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.password))},directives:[s0,Xb,Np,Mp,Jb,oy],styles:[""]}),n})()},{path:"dashboard",component:MB},{path:"register",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}register(){""!=this.email?""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("Please enter password"):alert("Please enter email")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-register"]],decls:29,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"p-2"],["type","button",1,"btn","btn-info",2,"background-color","#ffc107",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"form"),f.TgZ(7,"div",6),f.TgZ(8,"h4",7),f._uU(9,"Register (Admin)"),f.qZA(),f.qZA(),f.TgZ(10,"div",6),f.TgZ(11,"label",8),f._uU(12,"Email"),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(c){return r.email=c}),f.qZA(),f.qZA(),f.TgZ(14,"div",6),f.TgZ(15,"label",10),f._uU(16,"Password"),f.qZA(),f.TgZ(17,"input",11),f.NdJ("ngModelChange",function(c){return r.password=c}),f.qZA(),f.TgZ(18,"h6",12),f._uU(19,"NOTE: Only Administator is allowed to register into this portal"),f.qZA(),f.qZA(),f.TgZ(20,"button",13),f.NdJ("click",function(){return r.register()}),f._uU(21,"Register"),f.qZA(),f.TgZ(22,"div",14),f.TgZ(23,"div",15),f.TgZ(24,"a",16),f._uU(25,"Have an account ? "),f.TgZ(26,"span",17),f._uU(27,"Login"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(28,"div",2),f.qZA(),f.qZA()),2&t&&(f.xp6(13),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.password))},directives:[s0,Xb,Np,Mp,Jb,oy],styles:[""]}),n})()},{path:"varify-email",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-varify-email"]],decls:14,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"form"),f.TgZ(7,"div",6),f.TgZ(8,"h4",7),f._uU(9,"Welcome"),f.qZA(),f.qZA(),f.TgZ(10,"div",6),f.TgZ(11,"p",8),f._uU(12,"Link has sent on your registered email. Please verify it."),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(13,"div",2),f.qZA(),f.qZA())},directives:[s0,Xb,Np],styles:[""]}),n})()},{path:"forgot-password",component:(()=>{class n{constructor(t){this.auth=t,this.email=""}ngOnInit(){}forgotPassword(){this.auth.forgotPassword(this.email),this.email=""}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:23,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f._UZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"form"),f.TgZ(7,"div",6),f.TgZ(8,"h4",7),f._uU(9,"Forgot password"),f.qZA(),f.qZA(),f.TgZ(10,"div",6),f.TgZ(11,"label",8),f._uU(12,"Email"),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(c){return r.email=c}),f.qZA(),f.qZA(),f.TgZ(14,"button",10),f.NdJ("click",function(){return r.forgotPassword()}),f._uU(15,"Send Link"),f.qZA(),f.TgZ(16,"div",11),f.TgZ(17,"div",12),f.TgZ(18,"a",13),f._uU(19,"Back to "),f.TgZ(20,"span",14),f._uU(21,"Login"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(22,"div",2),f.qZA(),f.qZA()),2&t&&(f.xp6(13),f.Q6J("ngModel",r.email))},directives:[s0,Xb,Np,Mp,Jb,oy],styles:[""]}),n})()},{path:"file-upload",component:(()=>{class n{constructor(t,r,a){this.fileService=t,this.fireStorage=r,this.dataService=a,this.percentage=0,this.listOfFiles=[]}ngOnInit(){this.getAllFiles()}selectFile(t){this.selectedFiles=t.target.files}uploadFile(){this.currentFileUpload=new NB(this.selectedFiles[0]);const r=this.fireStorage.ref("Uploads/"+this.currentFileUpload.file.name);r.put(this.selectedFiles[0]).snapshotChanges().pipe(pl(()=>{r.getDownloadURL().subscribe(c=>{this.currentFileUpload.id="",this.currentFileUpload.url=c,this.currentFileUpload.size=this.currentFileUpload.file.size,this.currentFileUpload.name=this.currentFileUpload.file.name,this.fileService.saveMetaDataOfFile(this.currentFileUpload)}),this.ngOnInit()})).subscribe(c=>{this.percentage=100*c.bytesTransferred/c.totalBytes},c=>{console.log("Error occured")})}getAllFiles(){this.fileService.getAllFiles().subscribe(t=>{this.listOfFiles=t.map(r=>{const a=r.payload.doc.data();return a.id=r.payload.doc.id,a})},t=>{console.log("Error occured while fetching file meta data")})}deleteFile(t){window.confirm("Are you sure you want to delete "+t.name+"?")&&(this.fileService.deleteFile(t),this.ngOnInit())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kB),f.Y36(jN),f.Y36(VP))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-fileupload"]],decls:28,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow"],[1,"card-body"],["type","file",1,"text-nowrap","text-truncate","file",3,"change"],["type","button",1,"btn","btn-outline-warning",3,"disabled","click"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],[1,"col-md-8"],[1,"mb-3","mt-3"],[1,"text-primary"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","download","",1,"btn","btn-outline-info",3,"href"],["type","button",1,"btn","btn-outline-danger","ms-2",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f._uU(5,"x "),f.TgZ(6,"div"),f.TgZ(7,"input",5),f.NdJ("change",function(c){return r.selectFile(c)}),f.qZA(),f.TgZ(8,"button",6),f.NdJ("click",function(){return r.uploadFile()}),f._uU(9,"Upload"),f.qZA(),f.qZA(),f.TgZ(10,"div",7),f.TgZ(11,"div",8),f._uU(12),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(13,"div",9),f.TgZ(14,"div",10),f.TgZ(15,"h4",11),f._uU(16,"File list"),f.qZA(),f.qZA(),f.TgZ(17,"table",12),f.TgZ(18,"thead"),f.TgZ(19,"tr"),f.TgZ(20,"th",13),f._uU(21,"File name"),f.qZA(),f.TgZ(22,"th",13),f._uU(23,"File size"),f.qZA(),f.TgZ(24,"th",13),f._uU(25,"Action"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(26,"tbody"),f.YNc(27,OB,10,3,"tr",14),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(8),f.Q6J("disabled",!r.selectedFiles),f.xp6(3),f.Q6J("ngStyle",f.VKq(5,PB,r.percentage+"%")),f.uIk("aria-valuenow",r.percentage),f.xp6(1),f.hij(" ",r.percentage,"% "),f.xp6(15),f.Q6J("ngForOf",r.listOfFiles))},directives:[Gn,_s],styles:[""]}),n})()}];let LB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[_v.forRoot(FB)],_v]}),n})();const VB=function(){return{color:"#ffc107","font-weight":"bold","font-size":"22px"}};let UB=(()=>{class n{constructor(){this.title="AngularFirebaseconnect"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:2,consts:[[1,"listStyle","flexFlow"],[3,"ngStyle"]],template:function(t,r){1&t&&(f.TgZ(0,"ul",0),f.TgZ(1,"li",1),f._uU(2,"StudentRecord+"),f.qZA(),f.TgZ(3,"h5"),f._uU(4,"Student Record for Class 10"),f.qZA(),f.qZA(),f._UZ(5,"router-outlet")),2&t&&(f.xp6(1),f.Q6J("ngStyle",f.DdM(1,VB)))},directives:[Gn,Og],styles:[""]}),n})(),BB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[UB]}),n.\u0275inj=f.cJS({providers:[],imports:[[$u,LB,RB]]}),n})();(0,f.G48)(),wy().bootstrapModule(BB).catch(n=>console.error(n))},394:(tt,be,V)=>{"use strict";V.d(be,{Z:()=>Ie});var f=V(854),H=V(910),O=V(26),pe=V(422);class Oe{constructor(G,ce){this._delegate=G,this.firebase=ce,(0,O._addComponent)(G,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=G.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this._delegate.automaticDataCollectionEnabled=G}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(G=>{this._delegate.checkDestroyed(),G()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(G,ce=O._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(G);return!Se.isInitialized()&&"EXPLICIT"===(null===(he=Se.getComponent())||void 0===he?void 0:he.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:ce})}_removeServiceInstance(G,ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(G).clearInstance(ce)}_addComponent(G){(0,O._addComponent)(this._delegate,G)}_addOrOverwriteComponent(G){(0,O._addOrOverwriteComponent)(this._delegate,G)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),N=function se(){const ue=function(ue){const G={},ce={__esModule:!0,initializeApp:function(bt,Zt={}){const It=O.initializeApp(bt,Zt);if((0,f.r3)(G,It.name))return G[It.name];const Et=new ue(It,ce);return G[It.name]=Et,Et},app:Se,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(bt){const Zt=bt.name,It=Zt.replace("-compat","");if(O._registerComponent(bt)&&"PUBLIC"===bt.type){const Et=(nt=Se())=>{if("function"!=typeof nt[It])throw ve.create("invalid-app-argument",{appName:Zt});return nt[It]()};void 0!==bt.serviceProps&&(0,f.ZB)(Et,bt.serviceProps),ce[It]=Et,ue.prototype[It]=function(...nt){return this._getService.bind(this,Zt).apply(this,bt.multipleInstances?nt:[])}}return"PUBLIC"===bt.type?ce[It]:null},removeApp:function(bt){delete G[bt]},useAsService:function(bt,Zt){return"serverAuth"===Zt?null:Zt},modularAPIs:O}};function Se(bt){if(!(0,f.r3)(G,bt=bt||O._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:bt});return G[bt]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(G).map(bt=>G[bt])}}),Se.App=ue,ce}(Oe);return ue.INTERNAL=Object.assign(Object.assign({},ue.INTERNAL),{createFirebaseNamespace:se,extendNamespace:function(ce){(0,f.ZB)(ue,ce)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),ue}(),k=new pe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ue=self.firebase.SDK_VERSION;ue&&ue.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=N;(0,O.registerVersion)("@firebase/app-compat","0.1.15",undefined)},26:(tt,be,V)=>{"use strict";V.r(be),V.d(be,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Xi,_DEFAULT_ENTRY_NAME:()=>ps,_addComponent:()=>Au,_addOrOverwriteComponent:()=>Su,_apps:()=>er,_clearComponents:()=>wn,_components:()=>Si,_getProvider:()=>tn,_registerComponent:()=>Ri,_removeServiceInstance:()=>St,deleteApp:()=>tr,getApp:()=>_e,getApps:()=>Pn,initializeApp:()=>Lr,onLog:()=>xt,registerVersion:()=>xn,setLogLevel:()=>nr});var f=V(239),H=V(910),O=V(422),pe=V(854);class Oe{constructor(fe){this.container=fe}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function(rt){const fe=rt.getComponent();return"VERSION"===(null==fe?void 0:fe.type)}(Nt)){const nn=Nt.getImmediate();return`${nn.library}/${nn.version}`}return null}).filter(Nt=>Nt).join(" ")}}const ve="@firebase/app",se=new O.Yd("@firebase/app"),ps="[DEFAULT]",Tu={[ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},er=new Map,Si=new Map;function Au(rt,fe){try{rt.container.addComponent(fe)}catch(Nt){se.debug(`Component ${fe.name} failed to register with FirebaseApp ${rt.name}`,Nt)}}function Su(rt,fe){rt.container.addOrOverwriteComponent(fe)}function Ri(rt){const fe=rt.name;if(Si.has(fe))return se.debug(`There were multiple attempts to register component ${fe}.`),!1;Si.set(fe,rt);for(const Nt of er.values())Au(Nt,rt);return!0}function tn(rt,fe){return rt.container.getProvider(fe)}function St(rt,fe,Nt=ps){tn(rt,fe).clearInstance(Nt)}function wn(){Si.clear()}const dn=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class on{constructor(fe,Nt,nn){this._isDeleted=!1,this._options=Object.assign({},fe),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=nn,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(fe){this._isDeleted=fe}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}const Xi="9.6.4";function Lr(rt,fe={}){"object"!=typeof fe&&(fe={name:fe});const Nt=Object.assign({name:ps,automaticDataCollectionEnabled:!1},fe),nn=Nt.name;if("string"!=typeof nn||!nn)throw dn.create("bad-app-name",{appName:String(nn)});const qt=er.get(nn);if(qt){if((0,pe.vZ)(rt,qt.options)&&(0,pe.vZ)(Nt,qt.config))return qt;throw dn.create("duplicate-app",{appName:nn})}const kt=new H.H0(nn);for(const je of Si.values())kt.addComponent(je);const Ue=new on(rt,Nt,kt);return er.set(nn,Ue),Ue}function _e(rt=ps){const fe=er.get(rt);if(!fe)throw dn.create("no-app",{appName:rt});return fe}function Pn(){return Array.from(er.values())}function tr(rt){return es.apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(rt){const fe=rt.name;er.has(fe)&&(er.delete(fe),yield Promise.all(rt.container.getProviders().map(Nt=>Nt.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function xn(rt,fe,Nt){var nn;let qt=null!==(nn=Tu[rt])&&void 0!==nn?nn:rt;Nt&&(qt+=`-${Nt}`);const kt=qt.match(/\s|\//),Ue=fe.match(/\s|\//);if(kt||Ue){const je=[`Unable to register library "${qt}" with version "${fe}":`];return kt&&je.push(`library name "${qt}" contains illegal characters (whitespace or "/")`),kt&&Ue&&je.push("and"),Ue&&je.push(`version name "${fe}" contains illegal characters (whitespace or "/")`),void se.warn(je.join(" "))}Ri(new H.wA(`${qt}-version`,()=>({library:qt,version:fe}),"VERSION"))}function xt(rt,fe){if(null!==rt&&"function"!=typeof rt)throw dn.create("invalid-log-argument");(0,O.Am)(rt,fe)}function nr(rt){(0,O.Ub)(rt)}Ri(new H.wA("platform-logger",fe=>new Oe(fe),"PRIVATE")),xn(ve,"0.7.14",""),xn(ve,"0.7.14","esm2017"),xn("fire-js","")},910:(tt,be,V)=>{"use strict";V.d(be,{wA:()=>O,H0:()=>Ae});var f=V(239),H=V(854);class O{constructor(N,k,Q){this.name=N,this.instanceFactory=k,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(N){return this.instantiationMode=N,this}setMultipleInstances(N){return this.multipleInstances=N,this}setServiceProps(N){return this.serviceProps=N,this}setInstanceCreatedCallback(N){return this.onInstanceCreated=N,this}}const pe="[DEFAULT]";class Oe{constructor(N,k){this.name=N,this.container=k,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(N){const k=this.normalizeInstanceIdentifier(N);if(!this.instancesDeferred.has(k)){const Q=new H.BH;if(this.instancesDeferred.set(k,Q),this.isInitialized(k)||this.shouldAutoInitialize())try{const Y=this.getOrInitializeService({instanceIdentifier:k});Y&&Q.resolve(Y)}catch(Y){}}return this.instancesDeferred.get(k).promise}getImmediate(N){var k;const Q=this.normalizeInstanceIdentifier(null==N?void 0:N.identifier),Y=null!==(k=null==N?void 0:N.optional)&&void 0!==k&&k;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Y)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(we){if(Y)return null;throw we}}getComponent(){return this.component}setComponent(N){if(N.name!==this.name)throw Error(`Mismatching Component ${N.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=N,this.shouldAutoInitialize()){if("EAGER"===N.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:pe})}catch(k){}for(const[k,Q]of this.instancesDeferred.entries()){const Y=this.normalizeInstanceIdentifier(k);try{const we=this.getOrInitializeService({instanceIdentifier:Y});Q.resolve(we)}catch(we){}}}}clearInstance(N=pe){this.instancesDeferred.delete(N),this.instancesOptions.delete(N),this.instances.delete(N)}delete(){var N=this;return(0,f.Z)(function*(){const k=Array.from(N.instances.values());yield Promise.all([...k.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...k.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(N=pe){return this.instances.has(N)}getOptions(N=pe){return this.instancesOptions.get(N)||{}}initialize(N={}){const{options:k={}}=N,Q=this.normalizeInstanceIdentifier(N.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Y=this.getOrInitializeService({instanceIdentifier:Q,options:k});for(const[we,Ie]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(we)&&Ie.resolve(Y);return Y}onInit(N,k){var Q;const Y=this.normalizeInstanceIdentifier(k),we=null!==(Q=this.onInitCallbacks.get(Y))&&void 0!==Q?Q:new Set;we.add(N),this.onInitCallbacks.set(Y,we);const Ie=this.instances.get(Y);return Ie&&N(Ie,Y),()=>{we.delete(N)}}invokeOnInitCallbacks(N,k){const Q=this.onInitCallbacks.get(k);if(Q)for(const Y of Q)try{Y(N,k)}catch(we){}}getOrInitializeService({instanceIdentifier:N,options:k={}}){let Q=this.instances.get(N);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(se=N,se===pe?void 0:se),options:k}),this.instances.set(N,Q),this.instancesOptions.set(N,k),this.invokeOnInitCallbacks(Q,N),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,N,Q)}catch(Y){}var se;return Q||null}normalizeInstanceIdentifier(N=pe){return this.component?this.component.multipleInstances?N:pe:N}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(N){this.name=N,this.providers=new Map}addComponent(N){const k=this.getProvider(N.name);if(k.isComponentSet())throw new Error(`Component ${N.name} has already been registered with ${this.name}`);k.setComponent(N)}addOrOverwriteComponent(N){this.getProvider(N.name).isComponentSet()&&this.providers.delete(N.name),this.addComponent(N)}getProvider(N){if(this.providers.has(N))return this.providers.get(N);const k=new Oe(N,this);return this.providers.set(N,k),k}getProviders(){return Array.from(this.providers.values())}}},422:(tt,be,V)=>{"use strict";V.d(be,{in:()=>H,Yd:()=>ve,Ub:()=>Ae,Am:()=>se});const f=[];var H=(()=>{return(N=H||(H={}))[N.DEBUG=0]="DEBUG",N[N.VERBOSE=1]="VERBOSE",N[N.INFO=2]="INFO",N[N.WARN=3]="WARN",N[N.ERROR=4]="ERROR",N[N.SILENT=5]="SILENT",H;var N})();const O={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},pe=H.INFO,Oe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},de=(N,k,...Q)=>{if(k<N.logLevel)return;const Y=(new Date).toISOString(),we=Oe[k];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${k})`);console[we](`[${Y}]  ${N.name}:`,...Q)};class ve{constructor(k){this.name=k,this._logLevel=pe,this._logHandler=de,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(k){if(!(k in H))throw new TypeError(`Invalid value "${k}" assigned to \`logLevel\``);this._logLevel=k}setLogLevel(k){this._logLevel="string"==typeof k?O[k]:k}get logHandler(){return this._logHandler}set logHandler(k){if("function"!=typeof k)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=k}get userLogHandler(){return this._userLogHandler}set userLogHandler(k){this._userLogHandler=k}debug(...k){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...k),this._logHandler(this,H.DEBUG,...k)}log(...k){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...k),this._logHandler(this,H.VERBOSE,...k)}info(...k){this._userLogHandler&&this._userLogHandler(this,H.INFO,...k),this._logHandler(this,H.INFO,...k)}warn(...k){this._userLogHandler&&this._userLogHandler(this,H.WARN,...k),this._logHandler(this,H.WARN,...k)}error(...k){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...k),this._logHandler(this,H.ERROR,...k)}}function Ae(N){f.forEach(k=>{k.setLogLevel(N)})}function se(N,k){for(const Q of f){let Y=null;k&&k.level&&(Y=O[k.level]),Q.userLogHandler=null===N?null:(we,Ie,...ue)=>{const G=ue.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(he){return null}}).filter(ce=>ce).join(" ");Ie>=(null!=Y?Y:we.logLevel)&&N({level:H[Ie].toLowerCase(),message:G,args:ue,type:we.name})}}}},239:(tt,be,V)=>{"use strict";function f(O,pe,Oe,de,ve,Ae,se){try{var N=O[Ae](se),k=N.value}catch(Q){return void Oe(Q)}N.done?pe(k):Promise.resolve(k).then(de,ve)}function H(O){return function(){var pe=this,Oe=arguments;return new Promise(function(de,ve){var Ae=O.apply(pe,Oe);function se(k){f(Ae,de,ve,se,N,"next",k)}function N(k){f(Ae,de,ve,se,N,"throw",k)}se(void 0)})}}V.d(be,{Z:()=>H})}},tt=>{tt(tt.s=136)}]);